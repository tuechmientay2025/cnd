import{u as X,ac as se,ad as ne,_ as l,s as Y,b as Z,C as V,j as e,t as i,ag as ie,ah as oe,f as re,x as H,M as $}from"../main.aHgQEcd5.1748844857753.js";import{r,u as ae}from"./vendor.Cii7CkpR.1748844857753.js";import"./toast.D8JcjdRp.1748844857753.js";import{C as ee}from"./CopyButton.BHPgmrhV.1748844857753.js";import{j as b,s as A,b as P,C as g,A as O,u as E,w as te,d as z,ak as N,o as U,B,T as Q,al as J,k as ce,S as le}from"./antd.v1CHGtH-.1748844857753.js";function de({setIsLoading:_}){const k=["login_client_secret"],G={login_status:!1,login_username:"",login_client_id:"",login_client_secret:""},y=X(),[m]=b.useForm(),[o,T]=r.useState(null),[p,C]=r.useState(null),[h,S]=r.useState(!0),[I,j]=r.useState(!0),[w,q]=r.useState(""),[F,f]=r.useState(""),[M,L]=se(),{Text:R}=Q,K=ne({action:"envato_system_data_login"}),D=(t,s)=>{s=l.mapValues(s,function(n){return l.isString(n)?l.trim(n):n});for(const n of k){const a=t==null?void 0:t[n];a&&l.includes(a,"*")&&(s[n]=o[n])}C(s||{}),S(!(s!=null&&s.login_status)||!1);const c=l.pick(o,l.keys(s));l.isEqual(c,s)?j(!0):o!=null&&o.login_status||s!=null&&s.login_status?j(!1):j(!0)},W=async t=>{var d,u,x;const s=t!=null&&t.login_status?"A":"I",c=((d=t==null?void 0:t.login_username)==null?void 0:d.trim())||"",n=((u=t==null?void 0:t.login_client_id)==null?void 0:u.trim())||"",a=((x=t==null?void 0:t.login_client_secret)==null?void 0:x.trim())||"";M({params:{action:"envato_system_login"},data:{login_status:s,login_username:c,login_client_id:n,login_client_secret:a}})},v=()=>{m.setFieldsValue(o||{}),D(null,o)};return r.useEffect(()=>{m.setFieldsValue(o||{}),C(o||{}),S(!(o!=null&&o.login_status)||!1),j(!0)},[o,m]),r.useEffect(()=>{var a,d,u;const{data:t,isFetching:s,isError:c,error:n}=K;if(_(s),!s&&c&&A.error((d=(a=n==null?void 0:n.data)==null?void 0:a.errors)==null?void 0:d.message),!s&&!c&&t){const x=l.clone((t==null?void 0:t.data)||{});l.unset(x,"confirmation_url"),q(((u=t==null?void 0:t.data)==null?void 0:u.confirmation_url)||""),T(x||{})}},[K,_]),r.useEffect(()=>{var a,d,u,x;const{data:t,isLoading:s,isError:c,error:n}=L;y(s?Y():Z()),!s&&c&&((d=(a=n==null?void 0:n.data)==null?void 0:a.errors)!=null&&d.message)&&A.error((x=(u=n==null?void 0:n.data)==null?void 0:u.errors)==null?void 0:x.message),!s&&!c&&t&&t!=null&&t.msg&&(t!=null&&t.status?(f(""),A.success(t==null?void 0:t.msg)):(f(t==null?void 0:t.msg),V()))},[L,y]),e.jsx(b,{form:m,name:"saveEnvatoLogin",layout:"vertical",autoComplete:"off",onFinish:W,onValuesChange:D,initialValues:G,children:e.jsxs(P,{children:[F?e.jsx(g,{span:24,children:e.jsx(O,{message:F,type:"error",showIcon:!0,closable:!0,afterClose:()=>f(""),style:{marginBottom:"24px"}})}):null,e.jsx(g,{span:24,children:e.jsxs(E,{align:"center",style:{marginBottom:"24px"},children:[e.jsx(b.Item,{name:"login_status",valuePropName:"checked",style:{marginBottom:0},children:e.jsx(te,{})}),e.jsx(R,{onClick:()=>{m.setFieldValue("login_status",!(p!=null&&p.login_status)),D(null,m.getFieldsValue())},style:{cursor:"pointer"},children:p!=null&&p.login_status?i("Click to disable."):i("Click to enable and setup.")})]})}),e.jsx(g,{span:24,children:e.jsx(O,{message:e.jsxs(E,{children:[e.jsx(z,{title:i("Please use this Confirmation URL while Register Envato App."),children:e.jsx(N,{})}),w||i("Loading...")]}),action:e.jsx(ee,{text:w,style:{marginLeft:"16px"}}),style:{backgroundColor:"rgba(0, 0, 0, 0.04)",borderColor:"#d9d9d9",marginBottom:"24px"}})}),e.jsx(g,{span:24,children:e.jsx(b.Item,{label:i("Envato Username"),name:"login_username",rules:[{required:!0,message:i("%s is required.",i("Envato username")),whitespace:!0}],help:h?"":void 0,children:e.jsx(U,{disabled:h})})}),e.jsx(g,{span:24,children:e.jsx(b.Item,{label:i("App Client ID"),name:"login_client_id",rules:[{required:!0,message:i("%s is required.",i("App client ID")),whitespace:!0}],help:h?"":void 0,children:e.jsx(U,{disabled:h})})}),e.jsx(g,{span:24,children:e.jsx(b.Item,{label:i("App Client Secret"),name:"login_client_secret",rules:[{required:!0,message:i("%s is required.",i("App client secret")),whitespace:!0}],help:h?"":void 0,tooltip:i("Value containing any asterisk (*) will not be updated."),children:e.jsx(U,{disabled:h})})}),e.jsx(g,{span:24,children:e.jsxs(E,{children:[e.jsx(B,{type:"primary",htmlType:"submit",loading:!1,disabled:I,children:i("Save Changes")}),e.jsx(B,{htmlType:"button",onClick:v,disabled:I,children:i("Discard")})]})})]})})}function ge({setIsLoading:_}){const k=["login_client_secret"],G={login_status:!1,login_client_id:"",login_client_secret:""},y=X(),[m]=b.useForm(),[o,T]=r.useState(null),[p,C]=r.useState(null),[h,S]=r.useState(!0),[I,j]=r.useState(!0),[w,q]=r.useState(""),[F,f]=r.useState(""),[M,L]=ie(),{Text:R}=Q,K=oe({action:"google_data"}),D=(t,s)=>{s=l.mapValues(s,function(n){return l.isString(n)?l.trim(n):n});for(const n of k){const a=t==null?void 0:t[n];a&&l.includes(a,"*")&&(s[n]=o[n])}C(s||{}),S(!(s!=null&&s.login_status)||!1);const c=l.pick(o,l.keys(s));l.isEqual(c,s)?j(!0):o!=null&&o.login_status||s!=null&&s.login_status?j(!1):j(!0)},W=async t=>{var a,d;const s=t!=null&&t.login_status?"A":"I",c=((a=t==null?void 0:t.login_client_id)==null?void 0:a.trim())||"",n=((d=t==null?void 0:t.login_client_secret)==null?void 0:d.trim())||"";M({params:{action:"google"},data:{login_status:s,login_client_id:c,login_client_secret:n}})},v=()=>{m.setFieldsValue(o||{}),D(null,o)};return r.useEffect(()=>{m.setFieldsValue(o||{}),C(o||{}),S(!(o!=null&&o.login_status)||!1),j(!0)},[o,m]),r.useEffect(()=>{var a,d,u;const{data:t,isFetching:s,isError:c,error:n}=K;if(_(s),!s&&c&&A.error((d=(a=n==null?void 0:n.data)==null?void 0:a.errors)==null?void 0:d.message),!s&&!c&&t){const x=l.clone((t==null?void 0:t.data)||{});l.unset(x,"confirmation_url"),q(((u=t==null?void 0:t.data)==null?void 0:u.confirmation_url)||""),T(x||{})}},[K,_]),r.useEffect(()=>{var a,d,u,x;const{data:t,isLoading:s,isError:c,error:n}=L;y(s?Y():Z()),!s&&c&&((d=(a=n==null?void 0:n.data)==null?void 0:a.errors)!=null&&d.message)&&A.error((x=(u=n==null?void 0:n.data)==null?void 0:u.errors)==null?void 0:x.message),!s&&!c&&t&&t!=null&&t.msg&&(t!=null&&t.status?(f(""),A.success(t==null?void 0:t.msg)):(f(t==null?void 0:t.msg),V()))},[L,y]),e.jsx(b,{form:m,name:"saveGoogleLogin",layout:"vertical",autoComplete:"off",onFinish:W,onValuesChange:D,initialValues:G,children:e.jsxs(P,{children:[F?e.jsx(g,{span:24,children:e.jsx(O,{message:F,type:"error",showIcon:!0,closable:!0,afterClose:()=>f(""),style:{marginBottom:"24px"}})}):null,e.jsx(g,{span:24,children:e.jsxs(E,{align:"center",style:{marginBottom:"24px"},children:[e.jsx(b.Item,{name:"login_status",valuePropName:"checked",style:{marginBottom:0},children:e.jsx(te,{})}),e.jsx(R,{onClick:()=>{m.setFieldValue("login_status",!(p!=null&&p.login_status)),D(null,m.getFieldsValue())},style:{cursor:"pointer"},children:p!=null&&p.login_status?i("Click to disable."):i("Click to enable and setup.")})]})}),e.jsx(g,{span:24,children:e.jsx(O,{message:e.jsxs(E,{children:[e.jsx(z,{title:i("Please use this Confirmation URL while Register Google App."),children:e.jsx(N,{})}),w||i("Loading...")]}),action:e.jsx(ee,{text:w,style:{marginLeft:"16px"}}),style:{backgroundColor:"rgba(0, 0, 0, 0.04)",borderColor:"#d9d9d9",marginBottom:"24px"}})}),e.jsx(g,{span:24,children:e.jsx(b.Item,{label:i("App Client ID"),name:"login_client_id",rules:[{required:!0,message:i("%s is required.",i("App client ID")),whitespace:!0}],help:h?"":void 0,children:e.jsx(U,{disabled:h})})}),e.jsx(g,{span:24,children:e.jsx(b.Item,{label:i("App Client Secret"),name:"login_client_secret",rules:[{required:!0,message:i("%s is required.",i("App client secret")),whitespace:!0}],help:h?"":void 0,tooltip:i("Value containing any asterisk (*) will not be updated."),children:e.jsx(U,{disabled:h})})}),e.jsx(g,{span:24,children:e.jsxs(E,{children:[e.jsx(B,{type:"primary",htmlType:"submit",loading:!1,disabled:I,children:i("Save Changes")}),e.jsx(B,{htmlType:"button",onClick:v,disabled:I,children:i("Discard")})]})})]})})}const{Title:me}=Q;function je(){var F;const _=re(),k=ae(),[G,y]=r.useState(!0),[m,o]=r.useState(!0),[T,p]=r.useState(!0),[C,h]=r.useState(""),S=(F=H(k,"settings/login-systems",["main"]))==null?void 0:F[0];function I(){const f=C||S||"",M={main:e.jsx(ge,{setIsLoading:o}),envato:e.jsx(de,{setIsLoading:p})};return e.jsx(e.Fragment,{children:Object.entries(M).map(([L,R])=>e.jsx("div",{className:L===f?"":"sg-hidden",children:R},L))})}r.useEffect(()=>{!m&&!T&&y(!1)},[m,T]),r.useEffect(()=>{var f;h((f=H(k,"settings/login-systems",["main"]))==null?void 0:f[0])},[k]);const j=[{key:"main",label:e.jsx($,{to:"/settings/login-systems",pro:!0,badge:!0,style:{color:"inherit"},children:i("Login with Google")})},{key:"envato",label:e.jsx($,{to:"/settings/login-systems/envato",pro:!0,badge:!0,style:{color:"inherit"},children:i("Login with Envato")})}],w=()=>(C||S||"")==="envato"?i("Login with Envato"):i("Login with Google"),q=_.lg||_.xl||_.xxl?{tabList:j,activeTabKey:C,defaultActiveKey:S,tabProps:{size:"middle"}}:{title:w()};return e.jsx(P,{justify:"space-around",children:e.jsxs(g,{span:24,style:{maxWidth:"960px"},children:[e.jsxs(P,{gutter:16,justify:"space-between",align:"middle",style:{paddingBottom:"8px",marginBottom:"8px"},children:[e.jsx(g,{style:{paddingBottom:"8px"},children:e.jsx(me,{level:5,style:{fontSize:"18px",margin:0},children:i("Login Systems")})}),e.jsx(g,{style:{paddingBottom:"8px"},children:e.jsxs(E,{children:[e.jsx(z,{title:e.jsxs(E,{align:"center",children:[e.jsx(N,{}),e.jsx("span",{children:i("Learn more")})]}),children:e.jsx(B,{icon:e.jsx(N,{}),href:"https://supportgenix.com",target:"_blank"})}),e.jsx(z,{title:e.jsxs(E,{align:"center",children:[e.jsx(J,{}),e.jsx("span",{children:i("Documentation")})]}),children:e.jsx(B,{icon:e.jsx(J,{}),href:"https://supportgenix.com/docs/",target:"_blank"})})]})})]}),e.jsx(P,{children:e.jsx(g,{span:24,children:e.jsx(ce,{size:"small",...q,styles:{header:{background:"#fafafa",fontWeight:500},body:{padding:"20px 24px 24px 24px"}},children:e.jsx(le,{spinning:G,style:{maxHeight:"unset"},children:I()})})})})]})})}export{je as default};
