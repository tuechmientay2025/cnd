import{u as H,aa as Q,ab as $,s as J,b as U,C as X,j as t,t as i,_ as a}from"../main.aHgQEcd5.1748844857753.js";import{r as p}from"./vendor.Cii7CkpR.1748844857753.js";import{t as Y}from"./editor-value.B-WWB6lV.1748844857753.js";import"./toast.D8JcjdRp.1748844857753.js";import{j as b,s as B,b as h,C as d,A as Z,u as f,w as v,o as V,v as tt,B as g,T as N,d as q,ak as L,al as M,k as et}from"./antd.v1CHGtH-.1748844857753.js";function st(){const R=[],A=[],G={betterdocs_status:!1,betterdocs_heading:"",betterdocs_limit:5},y=H(),[m]=b.useForm(),[r,z]=p.useState(null),[l,F]=p.useState(null),[u,S]=p.useState(!0),[C,j]=p.useState(!0),[k,_]=p.useState(""),[K,E]=Q(),{Text:O}=N,I=$({action:"betterdocs_data"}),D=(e,o)=>{o=a.mapValues(o,function(s){return a.isString(s)?a.trim(s):s});for(const s of R){const n=e==null?void 0:e[s];n&&a.includes(n,"*")&&(o[s]=r[s])}for(const s of A)(e==null?void 0:e[s])&&(o[s]=Y((e==null?void 0:e[s])||""));F(o||{}),S(!(o!=null&&o.betterdocs_status)||!1);const c=a.pick(r,a.keys(o));a.isEqual(c,o)?j(!0):r!=null&&r.betterdocs_status||o!=null&&o.betterdocs_status?j(!1):j(!0)},P=async e=>{var n;const o=e!=null&&e.betterdocs_status?"A":"I",c=((n=e==null?void 0:e.betterdocs_heading)==null?void 0:n.trim())||"",s=a.toInteger((e==null?void 0:e.betterdocs_limit)||0)||0;K({params:{action:"betterdocs"},data:{betterdocs_status:o,betterdocs_heading:c,betterdocs_limit:s}})},W=()=>{m.setFieldsValue(r||{}),D(null,r)};return p.useEffect(()=>{m.setFieldsValue(r||{}),F(r||{}),S(!(r!=null&&r.betterdocs_status)||!1),j(!0)},[r,m]),p.useEffect(()=>{var n,x;const{data:e,isFetching:o,isError:c,error:s}=I;!o&&c&&B.error((x=(n=s==null?void 0:s.data)==null?void 0:n.errors)==null?void 0:x.message),!o&&!c&&e&&z((e==null?void 0:e.data)||{})},[I]),p.useEffect(()=>{var n,x,T,w;const{data:e,isLoading:o,isError:c,error:s}=E;y(o?J():U()),!o&&c&&((x=(n=s==null?void 0:s.data)==null?void 0:n.errors)!=null&&x.message)&&B.error((w=(T=s==null?void 0:s.data)==null?void 0:T.errors)==null?void 0:w.message),!o&&!c&&e&&e!=null&&e.msg&&(e!=null&&e.status?(_(""),B.success(e==null?void 0:e.msg)):(_(e==null?void 0:e.msg),X()))},[E,y]),t.jsx(b,{form:m,name:"saveBetterDocs",layout:"vertical",autoComplete:"off",onFinish:P,onValuesChange:D,initialValues:G,children:t.jsxs(h,{children:[k?t.jsx(d,{span:24,children:t.jsx(Z,{message:k,type:"error",showIcon:!0,closable:!0,afterClose:()=>_(""),style:{marginBottom:"24px"}})}):null,t.jsx(d,{span:24,children:t.jsxs(f,{align:"center",style:{marginBottom:"24px"},children:[t.jsx(b.Item,{name:"betterdocs_status",valuePropName:"checked",style:{marginBottom:0},children:t.jsx(v,{})}),t.jsx(O,{onClick:()=>{m.setFieldValue("betterdocs_status",!(l!=null&&l.betterdocs_status)),D(null,m.getFieldsValue())},style:{cursor:"pointer"},children:l!=null&&l.betterdocs_status?i("Click to disable."):i("Click to enable and setup.")})]})}),t.jsx(d,{span:24,children:t.jsx(b.Item,{label:i("Suggested Docs Heading"),name:"betterdocs_heading",rules:[{required:!0,message:i("%s is required.",i("Suggested Docs heading")),whitespace:!0}],help:u?"":void 0,children:t.jsx(V,{disabled:u})})}),t.jsx(d,{span:24,children:t.jsx(b.Item,{label:i("Number of Suggested Docs"),name:"betterdocs_limit",rules:[{required:!0,message:i("%s is required.",i("Number of Suggested Docs"))}],help:u?"":void 0,tooltip:i("Enter a value between 1 and 20."),children:t.jsx(tt,{disabled:u,style:{width:"100%"}})})}),t.jsx(d,{span:24,children:t.jsxs(f,{children:[t.jsx(g,{type:"primary",htmlType:"submit",loading:!1,disabled:C,children:i("Save Changes")}),t.jsx(g,{htmlType:"button",onClick:W,disabled:C,children:i("Discard")})]})})]})})}const{Title:ot}=N;function at(){return t.jsx(h,{justify:"space-around",children:t.jsxs(d,{span:24,style:{maxWidth:"960px"},children:[t.jsxs(h,{gutter:16,justify:"space-between",align:"middle",style:{paddingBottom:"8px",marginBottom:"8px"},children:[t.jsx(d,{style:{paddingBottom:"8px"},children:t.jsx(ot,{level:5,style:{fontSize:"18px",margin:0},children:i("%s Integration",i("BetterDocs"))})}),t.jsx(d,{style:{paddingBottom:"8px"},children:t.jsxs(f,{children:[t.jsx(q,{title:t.jsxs(f,{align:"center",children:[t.jsx(L,{}),t.jsx("span",{children:i("Learn more")})]}),children:t.jsx(g,{icon:t.jsx(L,{}),href:"https://supportgenix.com/integrations/betterdocs/",target:"_blank"})}),t.jsx(q,{title:t.jsxs(f,{align:"center",children:[t.jsx(M,{}),t.jsx("span",{children:i("Documentation")})]}),children:t.jsx(g,{icon:t.jsx(M,{}),href:"https://supportgenix.com/doc/betterdocs-integration/",target:"_blank"})})]})})]}),t.jsx(h,{children:t.jsx(d,{span:24,children:t.jsx(et,{size:"small",styles:{header:{background:"#fafafa"},body:{padding:"20px 24px 24px 24px"}},children:t.jsx(st,{})})})})]})})}export{at as default};
