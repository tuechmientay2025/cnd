import{u as Y,ae as $,af as J,s as X,b as Z,C as V,j as e,t,_}from"../main.aHgQEcd5.1748844857753.js";import{r as x}from"./vendor.Cii7CkpR.1748844857753.js";import"./toast.D8JcjdRp.1748844857753.js";import{j as h,s as w,b as g,C as r,A as v,u,w as G,o as H,x as j,D as ee,d as C,ak as q,B as F,T as O,al as M,k as se}from"./antd.v1CHGtH-.1748844857753.js";function te(){const z=["el_api_key"],N={el_status:!1,el_api_end_point:"",el_api_key:"",el_form_opts:["is_required","support_expiry"],el_display_opts:["show_in_tckt_form"],is_cache_req:!1},E=Y(),[d]=h.useForm(),[o,K]=x.useState(null),[a,L]=x.useState(null),[l,S]=x.useState(!0),[B,y]=x.useState(!0),[D,I]=x.useState(""),[U,T]=$(),{Text:P}=O,R=J({action:"elite_licenser_data"}),b=(s,i)=>{i=_.mapValues(i,function(n){return _.isString(n)?_.trim(n):n});for(const n of z){const c=s==null?void 0:s[n];c&&_.includes(c,"*")&&(i[n]=o[n])}L(i||{}),S(!(i!=null&&i.el_status)||!1);const p=_.pick(o,_.keys(i));_.isEqual(p,i)?y(!0):o!=null&&o.el_status||i!=null&&i.el_status?y(!1):y(!0)},W=async s=>{var f,A;const i=s!=null&&s.el_status?"A":"I",p=((f=s==null?void 0:s.el_api_end_point)==null?void 0:f.trim())||"",n=((A=s==null?void 0:s.el_api_key)==null?void 0:A.trim())||"",c=(s==null?void 0:s.el_form_opts)||[],m=(s==null?void 0:s.el_display_opts)||[],k=s!=null&&s.is_cache_req?"Y":"N";U({params:{action:"elite_licenser"},data:{el_status:i,el_api_end_point:p,el_api_key:n,el_form_opts:c,el_display_opts:m,is_cache_req:k}})},Q=()=>{d.setFieldsValue(o||{}),b(null,o)};return x.useEffect(()=>{d.setFieldsValue(o||{}),L(o||{}),S(!(o!=null&&o.el_status)||!1),y(!0)},[o,d]),x.useEffect(()=>{var c,m;const{data:s,isFetching:i,isError:p,error:n}=R;!i&&p&&w.error((m=(c=n==null?void 0:n.data)==null?void 0:c.errors)==null?void 0:m.message),!i&&!p&&s&&K((s==null?void 0:s.data)||{})},[R]),x.useEffect(()=>{var c,m,k,f;const{data:s,isLoading:i,isError:p,error:n}=T;E(i?X():Z()),!i&&p&&((m=(c=n==null?void 0:n.data)==null?void 0:c.errors)!=null&&m.message)&&w.error((f=(k=n==null?void 0:n.data)==null?void 0:k.errors)==null?void 0:f.message),!i&&!p&&s&&s!=null&&s.msg&&(s!=null&&s.status?(I(""),w.success(s==null?void 0:s.msg)):(I(s==null?void 0:s.msg),V()))},[T,E]),e.jsx(h,{form:d,name:"saveEliteLicenser",layout:"vertical",autoComplete:"off",onFinish:W,onValuesChange:b,initialValues:N,children:e.jsxs(g,{children:[D?e.jsx(r,{span:24,children:e.jsx(v,{message:D,type:"error",showIcon:!0,closable:!0,afterClose:()=>I(""),style:{marginBottom:"24px"}})}):null,e.jsx(r,{span:24,children:e.jsxs(u,{align:"center",style:{marginBottom:"24px"},children:[e.jsx(h.Item,{name:"el_status",valuePropName:"checked",style:{marginBottom:0},children:e.jsx(G,{})}),e.jsx(P,{onClick:()=>{d.setFieldValue("el_status",!(a!=null&&a.el_status)),b(null,d.getFieldsValue())},style:{cursor:"pointer"},children:a!=null&&a.el_status?t("Click to disable."):t("Click to enable and setup.")})]})}),e.jsx(r,{span:24,children:e.jsx(h.Item,{label:t("API Endpoint"),name:"el_api_end_point",rules:[{required:!0,message:t("%s is required.",t("API endpoint")),whitespace:!0},{type:"url",message:t("Please enter a valid URL.")}],tooltip:t("API endpoint URL (example: https://example.com/wp-json/licensor/)."),help:l?"":void 0,children:e.jsx(H,{disabled:l})})}),e.jsx(r,{span:24,children:e.jsx(h.Item,{label:t("API Key"),name:"el_api_key",rules:[{required:!0,message:t("%s is required.",t("API key")),whitespace:!0}],help:l?"":void 0,tooltip:t("Value containing any asterisk (*) will not be updated."),children:e.jsx(H,{disabled:l})})}),e.jsx(r,{span:24,children:e.jsx(h.Item,{label:t("Form Options"),name:"el_form_opts",htmlFor:null,children:e.jsx(j.Group,{disabled:l,children:e.jsxs(g,{children:[e.jsx(r,{span:24,children:e.jsx(j,{value:"is_required",style:{lineHeight:"32px"},children:t("License Required")})}),e.jsx(r,{span:24,children:e.jsx(j,{value:"support_expiry",style:{lineHeight:"32px"},children:t("Check Support Expiry")})})]})})})}),e.jsx(r,{span:24,children:e.jsx(h.Item,{label:t("Display Options"),name:"el_display_opts",htmlFor:null,children:e.jsx(j.Group,{disabled:l,children:e.jsxs(g,{children:[e.jsx(r,{span:24,children:e.jsx(j,{value:"show_in_tckt_form",style:{lineHeight:"32px"},children:t("Show in Ticket Form")})}),e.jsx(r,{span:24,children:e.jsx(j,{value:"show_in_reg_form",style:{lineHeight:"32px"},children:t("Show in Registration Form")})})]})})})}),e.jsx(ee,{style:{margin:"0 0 24px 0"}}),e.jsx(r,{span:24,children:e.jsxs(u,{align:"center",style:{marginBottom:"24px"},children:[e.jsx(h.Item,{name:"is_cache_req",valuePropName:"checked",style:{marginBottom:0},children:e.jsx(G,{size:"small",disabled:l})}),e.jsxs(P,{onClick:()=>{l||(d.setFieldValue("is_cache_req",!(a!=null&&a.is_cache_req)),b(null,d.getFieldsValue()))},style:{cursor:l?"not-allowed":"pointer"},disabled:l,children:[e.jsx("span",{style:{marginRight:"4px"},children:t("Enable cache response.")}),e.jsx(C,{title:t("If you enable this, license code checking request will be cache for 5 minutes."),children:e.jsx(q,{style:{color:"rgba(0, 0, 0, 0.45)"}})})]})]})}),e.jsx(r,{span:24,children:e.jsxs(u,{children:[e.jsx(F,{type:"primary",htmlType:"submit",loading:!1,disabled:B,children:t("Save Changes")}),e.jsx(F,{htmlType:"button",onClick:Q,disabled:B,children:t("Discard")})]})})]})})}const{Title:ie}=O;function ce(){return e.jsx(g,{justify:"space-around",children:e.jsxs(r,{span:24,style:{maxWidth:"960px"},children:[e.jsxs(g,{gutter:16,justify:"space-between",align:"middle",style:{paddingBottom:"8px",marginBottom:"8px"},children:[e.jsx(r,{style:{paddingBottom:"8px"},children:e.jsx(ie,{level:5,style:{fontSize:"18px",margin:0},children:t("%s Integration",t("Elite Licenser"))})}),e.jsx(r,{style:{paddingBottom:"8px"},children:e.jsxs(u,{children:[e.jsx(C,{title:e.jsxs(u,{align:"center",children:[e.jsx(q,{}),e.jsx("span",{children:t("Learn more")})]}),children:e.jsx(F,{icon:e.jsx(q,{}),href:"https://supportgenix.com/integrations/elite-licenser/",target:"_blank"})}),e.jsx(C,{title:e.jsxs(u,{align:"center",children:[e.jsx(M,{}),e.jsx("span",{children:t("Documentation")})]}),children:e.jsx(F,{icon:e.jsx(M,{}),href:"https://supportgenix.com/doc/elite-licenser-integration/",target:"_blank"})})]})})]}),e.jsx(g,{children:e.jsx(r,{span:24,children:e.jsx(se,{size:"small",styles:{header:{background:"#fafafa"},body:{padding:"20px 24px 24px 24px"}},children:e.jsx(te,{})})})})]})})}export{ce as default};
