import{j as e,t as n,ao as he,f as Qe,_ as j,u as _e,ap as we,s as Se,b as Ce,c as $n,C as He,x as it,M as be,l as cn,d as yi,r as wi,v as Si,w as Ci,y as ki,z as vi,A as Ti,B as Ei}from"../main.aHgQEcd5.1748844857753.js";import{r as a,k as fs,u as Ct,R as Le,c as Ot}from"./vendor.Cii7CkpR.1748844857753.js";import{k as Re,b as G,C as _,F as oe,u as O,aB as qs,aC as Hs,aD as Ys,T as ae,d as te,E as ms,s as Y,aE as js,Q as kt,B as $,X as yt,i as qe,n as ge,Y as vt,D as Je,p as Di,a as Me,j as N,A as Ye,o as de,aj as Us,m as Ii,aF as Fi,aG as Gs,at as dn,ao as un,aa as ls,$ as as,y as lt,f as Wn,w as Ae,q as qn,v as _t,x as vs,ak as Ie,al as Fe,S as ct,aH as hn,L as bs,M as gn,af as Ai,ac as Ri,ae as Bi,a0 as cs,K as ds,aI as pn,W as Hn,Z as Yn,aJ as zi,au as xn,aK as Li}from"./antd.v1CHGtH-.1748844857753.js";import"./toast.D8JcjdRp.1748844857753.js";import{S as at}from"./ScreenGuard.CO_wY78U.1748844857753.js";import{u as Un}from"./useGetFromParams.BFDdrSZN.1748844857753.js";import{A as De}from"./Actionconfirm.BT5ZL47Y.1748844857753.js";import{t as wt}from"./editor-value.B-WWB6lV.1748844857753.js";import{M as nt,R as Mi,c as Oi}from"./index.CDg17qwk.1748844857753.js";import{u as Ks,a as Xs}from"./useSetToStorage.BQgVaF7I.1748844857753.js";import{t as jt,a as bt}from"./time-format.CWvin_m1.1748844857753.js";const{Title:Ni,Paragraph:fn,Text:pt}=ae;function Pi({reactionsData:t}){const s=(t==null?void 0:t.current)||{},i=(t==null?void 0:t.previous)||{},l=(s==null?void 0:s.total)||0,c=(s==null?void 0:s.positive)||0,r=(s==null?void 0:s.negative)||0,f=(s==null?void 0:s.neutral)||0,x=(s==null?void 0:s.score)||0,g=(i==null?void 0:i.score)||0;let y=x-g,m=x>=g,A=0;return y&&(y=Math.abs(y),A=g?y/g*100:x?100:0,A=A.toFixed(1),A=Math.abs(A)),e.jsx(Re,{size:"small",style:{margin:"32px 0 0 0"},children:e.jsx(G,{children:e.jsxs(_,{span:24,children:[e.jsx(fn,{style:{fontWeight:600,color:"rgba(0, 0, 0, 0.45)",margin:"0 0 16px 0"},children:n("Satisfaction Rate")}),e.jsxs(oe,{align:"flex-end",gap:"8px",wrap:!0,children:[e.jsx(Ni,{level:2,style:{fontSize:"28px",margin:0},children:l?`${x}%`:e.jsx("span",{children:"—"})}),l?e.jsx(O,{size:4,style:{paddingBottom:"3px"},children:m?e.jsxs(e.Fragment,{children:[e.jsx(qs,{style:{fontSize:"13px",color:"#52c41a"}}),e.jsx(pt,{style:{fontSize:"13px",fontWeight:500,color:"#52c41a"},children:`${A}%`})]}):e.jsxs(e.Fragment,{children:[e.jsx(Hs,{style:{fontSize:"13px",color:"#ff4d4f"}}),e.jsx(pt,{style:{fontSize:"13px",fontWeight:500,color:"#ff4d4f"},children:`${A}%`})]})}):null]}),e.jsx(fn,{style:{fontSize:"13px",fontWeight:500,color:"rgba(0, 0, 0, 0.45)",margin:"8px 0 4px 0"},children:n("Based on %d reactions",l)}),e.jsx(Ys,{percent:x,strokeColor:"#52c41a",size:{height:4},showInfo:!1}),e.jsxs(G,{gutter:16,justify:"space-between",children:[e.jsx(_,{flex:"none",children:e.jsxs(O,{size:2,direction:"vertical",style:{width:"100%",textAlign:"center",margin:"12px 0 0 0"},children:[e.jsx(pt,{style:{fontSize:"16px",fontWeight:500},children:c}),e.jsx(pt,{style:{fontSize:"13px",fontWeight:500,color:"rgba(0, 0, 0, 0.45)"},children:n("Positive")})]})}),e.jsx(_,{flex:"none",children:e.jsxs(O,{size:2,direction:"vertical",style:{width:"100%",textAlign:"center",margin:"12px 0 0 0"},children:[e.jsx(pt,{style:{fontSize:"16px",fontWeight:500},children:r}),e.jsx(pt,{style:{fontSize:"13px",fontWeight:500,color:"rgba(0, 0, 0, 0.45)"},children:n("Negative")})]})}),e.jsx(_,{flex:"none",children:e.jsxs(O,{size:2,direction:"vertical",style:{width:"100%",textAlign:"center",margin:"12px 0 0 0"},children:[e.jsx(pt,{style:{fontSize:"16px",fontWeight:500},children:f}),e.jsx(pt,{style:{fontSize:"13px",fontWeight:500,color:"rgba(0, 0, 0, 0.45)"},children:n("Neutral")})]})})]})]})})})}const{Title:$i,Paragraph:mn,Text:xt}=ae;function Wi({searchesData:t}){const s=(t==null?void 0:t.current)||{},i=(t==null?void 0:t.previous)||{},l=(s==null?void 0:s.total)||0,c=(s==null?void 0:s.with_result)||0,r=(s==null?void 0:s.no_result)||0,f=(s==null?void 0:s.score)||0,x=(i==null?void 0:i.score)||0;let g=f-x,y=f>=x,m=0;return g&&(g=Math.abs(g),m=x?g/x*100:f?100:0,m=m.toFixed(1),m=Math.abs(m)),e.jsx(Re,{size:"small",style:{margin:"32px 0 0 0"},children:e.jsx(G,{children:e.jsxs(_,{span:24,children:[e.jsx(te,{title:n("Search performance are filtered by the selected date range, but not by category, tag, or author."),children:e.jsxs(O,{size:4,style:{margin:"0 0 16px 0"},children:[e.jsx(mn,{style:{fontWeight:600,color:"rgba(0, 0, 0, 0.45)",margin:0},children:n("Search Performance")}),e.jsx(ms,{style:{color:"rgba(0, 0, 0, 0.45)"}})]})}),e.jsxs(oe,{align:"flex-end",gap:"8px",wrap:!0,children:[e.jsx($i,{level:2,style:{fontSize:"28px",margin:0},children:l?`${f}%`:e.jsx("span",{children:"—"})}),l?e.jsx(O,{size:4,style:{paddingBottom:"3px"},children:y?e.jsxs(e.Fragment,{children:[e.jsx(qs,{style:{fontSize:"13px",color:"#52c41a"}}),e.jsx(xt,{style:{fontSize:"13px",fontWeight:500,color:"#52c41a"},children:`${m}%`})]}):e.jsxs(e.Fragment,{children:[e.jsx(Hs,{style:{fontSize:"13px",color:"#ff4d4f"}}),e.jsx(xt,{style:{fontSize:"13px",fontWeight:500,color:"#ff4d4f"},children:`${m}%`})]})}):null]}),e.jsx(mn,{style:{fontSize:"13px",fontWeight:500,color:"rgba(0, 0, 0, 0.45)",margin:"8px 0 4px 0"},children:n("Search success rate")}),e.jsx(Ys,{percent:f,strokeColor:"#722ed1",size:{height:4},showInfo:!1}),e.jsxs(G,{gutter:16,justify:"space-between",children:[e.jsx(_,{flex:"none",children:e.jsxs(O,{size:2,direction:"vertical",style:{width:"100%",textAlign:"center",margin:"12px 0 0 0"},children:[e.jsx(xt,{style:{fontSize:"16px",fontWeight:500},children:l}),e.jsx(xt,{style:{fontSize:"13px",fontWeight:500,color:"rgba(0, 0, 0, 0.45)"},children:n("Searches")})]})}),e.jsx(_,{flex:"none",children:e.jsxs(O,{size:2,direction:"vertical",style:{width:"100%",textAlign:"center",margin:"12px 0 0 0"},children:[e.jsx(xt,{style:{fontSize:"16px",fontWeight:500},children:c}),e.jsx(xt,{style:{fontSize:"13px",fontWeight:500,color:"rgba(0, 0, 0, 0.45)"},children:n("With Results")})]})}),e.jsx(_,{flex:"none",children:e.jsxs(O,{size:2,direction:"vertical",style:{width:"100%",textAlign:"center",margin:"12px 0 0 0"},children:[e.jsx(xt,{style:{fontSize:"16px",fontWeight:500},children:r}),e.jsx(xt,{style:{fontSize:"13px",fontWeight:500,color:"rgba(0, 0, 0, 0.45)"},children:n("No Results")})]})})]})]})})})}const{Title:qi,Paragraph:jn,Text:ft}=ae;function Hi({viewsData:t}){const s=(t==null?void 0:t.current)||{},i=(t==null?void 0:t.previous)||{},l=(s==null?void 0:s.total)||0,c=(s==null?void 0:s.unique)||0,r=(s==null?void 0:s.returning)||0,f=(i==null?void 0:i.total)||0,x=f+l>0?l/(f+l)*100:0;let g=l-f,y=l>=f,m=0;return g&&(g=Math.abs(g),m=f?g/f*100:l?100:0,m=m.toFixed(1),m=Math.abs(m)),e.jsx(Re,{size:"small",style:{margin:"32px 0 0 0"},children:e.jsx(G,{children:e.jsxs(_,{span:24,children:[e.jsx(jn,{style:{fontWeight:600,color:"rgba(0, 0, 0, 0.45)",margin:"0 0 16px 0"},children:n("Total Views")}),e.jsxs(oe,{align:"flex-end",gap:"8px",wrap:!0,children:[e.jsx(qi,{level:2,style:{fontSize:"28px",margin:0},children:l}),e.jsx(O,{size:4,style:{paddingBottom:"3px"},children:y?e.jsxs(e.Fragment,{children:[e.jsx(qs,{style:{fontSize:"13px",color:"#52c41a"}}),e.jsx(ft,{style:{fontSize:"13px",fontWeight:500,color:"#52c41a"},children:`${m}%`})]}):e.jsxs(e.Fragment,{children:[e.jsx(Hs,{style:{fontSize:"13px",color:"#ff4d4f"}}),e.jsx(ft,{style:{fontSize:"13px",fontWeight:500,color:"#ff4d4f"},children:`${m}%`})]})})]}),e.jsx(jn,{style:{fontSize:"13px",fontWeight:500,color:"rgba(0, 0, 0, 0.45)",margin:"8px 0 4px 0"},children:n("vs previous period")}),e.jsx(Ys,{percent:x,strokeColor:"#1677ff",size:{height:4},showInfo:!1}),e.jsxs(G,{gutter:16,justify:"space-between",children:[e.jsx(_,{flex:"none",children:e.jsxs(O,{size:2,direction:"vertical",style:{width:"100%",textAlign:"center",margin:"12px 0 0 0"},children:[e.jsx(ft,{style:{fontSize:"16px",fontWeight:500},children:c}),e.jsx(ft,{style:{fontSize:"13px",fontWeight:500,color:"rgba(0, 0, 0, 0.45)"},children:n("Unique")})]})}),e.jsx(_,{flex:"none",children:e.jsxs(O,{size:2,direction:"vertical",style:{width:"100%",textAlign:"center",margin:"12px 0 0 0"},children:[e.jsx(ft,{style:{fontSize:"16px",fontWeight:500},children:r}),e.jsx(ft,{style:{fontSize:"13px",fontWeight:500,color:"rgba(0, 0, 0, 0.45)"},children:n("Returning")})]})}),e.jsx(_,{flex:"none",children:e.jsxs(O,{size:2,direction:"vertical",style:{width:"100%",textAlign:"center",margin:"12px 0 0 0"},children:[e.jsx(ft,{style:{fontSize:"16px",fontWeight:500},children:f}),e.jsx(ft,{style:{fontSize:"13px",fontWeight:500,color:"rgba(0, 0, 0, 0.45)"},children:n("Previous")})]})})]})]})})})}function Yi({category:t,tag:s,author:i,dateRange:l}){const[c,r]=a.useState(null),f=(c==null?void 0:c.views)||null,x=(c==null?void 0:c.reactions)||null,g=(c==null?void 0:c.searches)||null,y=he({action:"knowledge_base_statistics_overview_data",category:t,tag:s,author:i,dateRange:`${(l==null?void 0:l.start)||""}-to-${(l==null?void 0:l.end)||""}`});return a.useEffect(()=>{var v,R;const{data:m,isFetching:A,isError:E,error:D}=y;!A&&E&&Y.error((R=(v=D==null?void 0:D.data)==null?void 0:v.errors)==null?void 0:R.message),!A&&!E&&m&&r(m==null?void 0:m.data)},[y]),e.jsxs(G,{gutter:32,wrap:!0,children:[e.jsx(_,{span:24,md:12,xl:8,children:e.jsx(Hi,{viewsData:f})}),e.jsx(_,{span:24,md:12,xl:8,children:e.jsx(Pi,{reactionsData:x})}),e.jsx(_,{span:24,md:12,xl:8,children:e.jsx(Wi,{searchesData:g})})]})}const{Text:Ge}=ae;function Ui({category:t,tag:s,author:i,dateRange:l}){const c=Qe(),[r,f]=a.useState(0),[x,g]=a.useState(5),[y,m]=a.useState(1),[A,E]=a.useState([]),D=he({action:"knowledge_base_analytics_top_docs_data",category:t,tag:s,author:i,dateRange:`${(l==null?void 0:l.start)||""}-to-${(l==null?void 0:l.end)||""}`,limit:x,page:y}),v=k=>{m(k)},R=(k,S)=>{g(S)},p=()=>{D.refetch()};a.useEffect(()=>{if(r){const k=j.ceil(r/x);y>k&&v(k)}},[r,x]),a.useEffect(()=>{var w,d,h,b;const{data:k,isFetching:S,isError:u,error:o}=D;!S&&u&&Y.error((d=(w=o==null?void 0:o.data)==null?void 0:w.errors)==null?void 0:d.message),!S&&!u&&k&&(E((h=k==null?void 0:k.data)==null?void 0:h.result),f((b=k==null?void 0:k.data)==null?void 0:b.total))},[D]);const F=[{title:e.jsx(Ge,{style:{fontWeight:500,color:"rgba(0, 0, 0, 0.45)"},children:n("Title")}),dataIndex:"post_title",render:(k,S)=>{const u=S==null?void 0:S.categories,o=u==null?void 0:u.length,w=j.toInteger(S==null?void 0:S.analytics_positive)||0,d=j.toInteger(S==null?void 0:S.analytics_negative)||0,h=j.toInteger(S==null?void 0:S.analytics_neutral)||0,b=w+d+h,T=j.toInteger(S==null?void 0:S.analytics_score)||0;return e.jsxs(O,{direction:"vertical",children:[e.jsx("a",{target:"_blank",href:(S==null?void 0:S.permalink)||"#",children:e.jsx(Ge,{style:{fontWeight:500},children:k})}),c.xs||c.sm||c.md||c.lg?e.jsxs(e.Fragment,{children:[o?e.jsxs(oe,{gap:"0 8px",wrap:!0,children:[e.jsx(Ge,{children:n("Categories:")}),e.jsx(oe,{gap:"4px 0",wrap:!0,children:u==null?void 0:u.map((M,C)=>{const P=(M==null?void 0:M.term_id)||0;return e.jsxs(a.Fragment,{children:[e.jsx("span",{children:M==null?void 0:M.name}),C<o-1&&", "]},P)})})]}):null,c.xs||c.sm||c.md?e.jsxs(e.Fragment,{children:[e.jsxs(oe,{gap:"0 8px",wrap:!0,children:[e.jsx(Ge,{children:n("Reactions:")}),e.jsx(te,{title:e.jsxs(O,{direction:"vertical",size:0,children:[e.jsx("span",{children:n("Positive: %d",w)}),e.jsx("span",{children:n("Negative: %d",d)}),e.jsx("span",{children:n("Neutral: %d",h)})]}),children:b})]}),e.jsxs(oe,{gap:"0 8px",wrap:!0,children:[e.jsx(Ge,{children:n("Score:")}),e.jsx(Ge,{children:`${T}%`})]})]}):null]}):null]})}},{title:e.jsx(Ge,{style:{fontWeight:500,color:"rgba(0, 0, 0, 0.45)"},children:n("Categories")}),dataIndex:"categories",render:k=>{const S=k==null?void 0:k.length;return S?k==null?void 0:k.map((u,o)=>{const w=(u==null?void 0:u.term_id)||0;return e.jsxs(a.Fragment,{children:[e.jsx("span",{children:u==null?void 0:u.name}),o<S-1&&", "]},w)}):null},responsive:["xl"]},{title:e.jsx(Ge,{style:{fontWeight:500,color:"rgba(0, 0, 0, 0.45)"},children:n("Views")}),render:k=>j.toInteger(k==null?void 0:k.analytics_views)||0},{title:e.jsx(Ge,{style:{fontWeight:500,color:"rgba(0, 0, 0, 0.45)"},children:n("Reactions")}),render:k=>{const S=j.toInteger(k==null?void 0:k.analytics_positive)||0,u=j.toInteger(k==null?void 0:k.analytics_negative)||0,o=j.toInteger(k==null?void 0:k.analytics_neutral)||0,w=S+u+o;return e.jsx(te,{title:e.jsxs(O,{direction:"vertical",size:0,children:[e.jsx("span",{children:n("Positive: %d",S)}),e.jsx("span",{children:n("Negative: %d",u)}),e.jsx("span",{children:n("Neutral: %d",o)})]}),children:w})},responsive:["lg"]},{title:e.jsx(Ge,{style:{fontWeight:500,color:"rgba(0, 0, 0, 0.45)"},children:n("Score")}),render:k=>`${j.toInteger(k==null?void 0:k.analytics_score)||0}%`,responsive:["lg"]}],z=()=>{const k=r?(y-1)*x+1:0,S=j.min([k+x-1,r]),u=n("Showing %1$d - %2$d of %3$d",k,S,r);return e.jsx(Ge,{style:{color:"rgba(0, 0, 0, 0.45)"},children:u})};return e.jsx(js,{items:[{key:"1",label:e.jsx(Ge,{style:{fontWeight:600},children:n("Top Performing Docs")}),children:e.jsx(kt,{size:"middle",columns:F,dataSource:A,footer:z,bordered:!0,loading:D==null?void 0:D.isFetching,pagination:{total:r,pageSize:x,current:y,onChange:v,onShowSizeChange:R,showSizeChanger:r>5,style:{marginBottom:"12px"}},className:"sg-docs-data-table"}),extra:e.jsx($,{size:"small",color:"primary",variant:"outlined",icon:e.jsx(yt,{}),onClick:k=>{k.stopPropagation(),p()}})}],defaultActiveKey:"1",style:{borderColor:"#f0f0f0",margin:"32px 0 0 0"},styles:{body:{padding:"0 4px"}},className:"sg-docs-card-collapse"})}const{Text:$t}=ae,Gi=[{title:e.jsx($t,{style:{fontWeight:500,color:"rgba(0, 0, 0, 0.45)"},children:n("Keyword")}),dataIndex:"keyword",render:t=>e.jsx($t,{style:{fontWeight:500},children:t})},{title:e.jsx($t,{style:{fontWeight:500,color:"rgba(0, 0, 0, 0.45)"},children:n("Count")}),dataIndex:"count",render:t=>t||0}];function Ki({dateRange:t}){const[s,i]=a.useState(0),[l,c]=a.useState(5),[r,f]=a.useState(1),[x,g]=a.useState([]),y=he({action:"knowledge_base_searches_top_keywords_data",dateRange:`${(t==null?void 0:t.start)||""}-to-${(t==null?void 0:t.end)||""}`,limit:l,page:r}),m=v=>{f(v)},A=(v,R)=>{c(R)},E=()=>{y.refetch()};a.useEffect(()=>{if(s){const v=j.ceil(s/l);r>v&&m(v)}},[s,l]),a.useEffect(()=>{var z,k,S,u;const{data:v,isFetching:R,isError:p,error:F}=y;!R&&p&&Y.error((k=(z=F==null?void 0:F.data)==null?void 0:z.errors)==null?void 0:k.message),!R&&!p&&v&&(g((S=v==null?void 0:v.data)==null?void 0:S.result),i((u=v==null?void 0:v.data)==null?void 0:u.total))},[y]);const D=()=>{const v=s?(r-1)*l+1:0,R=j.min([v+l-1,s]),p=n("Showing %1$d - %2$d of %3$d",v,R,s);return e.jsx($t,{style:{color:"rgba(0, 0, 0, 0.45)"},children:p})};return e.jsx(js,{items:[{key:"1",label:e.jsx(te,{title:n("Top search queries are filtered by the selected date range, but not by category, tag, or author."),children:e.jsxs(O,{size:4,children:[e.jsx($t,{style:{fontWeight:600},children:n("Top Search Queries")}),e.jsx(ms,{style:{color:"rgba(0, 0, 0, 0.45)"}})]})}),children:e.jsx(kt,{size:"middle",columns:Gi,dataSource:x,footer:D,bordered:!0,loading:y==null?void 0:y.isFetching,pagination:{total:s,pageSize:l,current:r,onChange:m,onShowSizeChange:A,showSizeChanger:s>5,style:{marginBottom:"12px"}},className:"sg-docs-data-table"}),extra:e.jsx($,{size:"small",color:"primary",variant:"outlined",icon:e.jsx(yt,{}),onClick:v=>{v.stopPropagation(),E()}})}],defaultActiveKey:"1",style:{borderColor:"#f0f0f0",margin:"32px 0 0 0"},styles:{body:{padding:"0 4px"}},className:"sg-docs-card-collapse"})}const{Text:Wt}=ae,Xi=[{title:e.jsx(Wt,{style:{fontWeight:500,color:"rgba(0, 0, 0, 0.45)"},children:n("Keyword")}),dataIndex:"keyword",render:t=>e.jsx(Wt,{style:{fontWeight:500},children:t})},{title:e.jsx(Wt,{style:{fontWeight:500,color:"rgba(0, 0, 0, 0.45)"},children:n("Count")}),dataIndex:"count",render:t=>t||0}];function Ji({dateRange:t}){const[s,i]=a.useState(0),[l,c]=a.useState(5),[r,f]=a.useState(1),[x,g]=a.useState([]),y=he({action:"knowledge_base_searches_no_result_keywords_data",dateRange:`${(t==null?void 0:t.start)||""}-to-${(t==null?void 0:t.end)||""}`,limit:l,page:r}),m=v=>{f(v)},A=(v,R)=>{c(R)},E=()=>{y.refetch()};a.useEffect(()=>{if(s){const v=j.ceil(s/l);r>v&&m(v)}},[s,l]),a.useEffect(()=>{var z,k,S,u;const{data:v,isFetching:R,isError:p,error:F}=y;!R&&p&&Y.error((k=(z=F==null?void 0:F.data)==null?void 0:z.errors)==null?void 0:k.message),!R&&!p&&v&&(g((S=v==null?void 0:v.data)==null?void 0:S.result),i((u=v==null?void 0:v.data)==null?void 0:u.total))},[y]);const D=()=>{const v=s?(r-1)*l+1:0,R=j.min([v+l-1,s]),p=n("Showing %1$d - %2$d of %3$d",v,R,s);return e.jsx(Wt,{style:{color:"rgba(0, 0, 0, 0.45)"},children:p})};return e.jsx(js,{items:[{key:"1",label:e.jsx(te,{title:n("No result search queries are filtered by the selected date range, but not by category, tag, or author."),children:e.jsxs(O,{size:4,children:[e.jsx(Wt,{style:{fontWeight:600},children:n("No Result Search Queries")}),e.jsx(ms,{style:{color:"rgba(0, 0, 0, 0.45)"}})]})}),children:e.jsx(kt,{size:"middle",columns:Xi,dataSource:x,footer:D,bordered:!0,loading:y==null?void 0:y.isFetching,pagination:{total:s,pageSize:l,current:r,onChange:m,onShowSizeChange:A,showSizeChanger:s>5,style:{marginBottom:"12px"}},className:"sg-docs-data-table"}),extra:e.jsx($,{size:"small",color:"primary",variant:"outlined",icon:e.jsx(yt,{}),onClick:v=>{v.stopPropagation(),E()}})}],defaultActiveKey:"1",style:{borderColor:"#f0f0f0",margin:"32px 0 0 0"},styles:{body:{padding:"0 4px"}},className:"sg-docs-card-collapse"})}const{Text:Qi}=ae,{RangePicker:Zi}=Di,qt="YYYY-MM-DD",Nt=qe().subtract(1,"month").add(1,"day").format(qt),Pt=qe().format(qt),Vi=[{value:"0",label:n("All Agents")}],er=[{value:"0",label:n("All Categories")}],tr=[{value:"0",label:n("All Tags")}],Ts=(t,s="")=>(t=j.cloneDeep(t),t=j.filter(t,({value:i})=>i!=="0"),s&&t.unshift({value:"",label:s}),t),sr=t=>{const s=j.trim(j.toString(t==null?void 0:t.get("category")))||"";return s?j.split(s,","):[]},nr=t=>{const s=j.trim(j.toString(t==null?void 0:t.get("tag")))||"";return s?j.split(s,","):[]},ir=t=>{const s=j.trim(j.toString(t==null?void 0:t.get("author")))||"";return s?j.split(s,","):[]},rr=t=>{const s=j.trim(j.toString(t==null?void 0:t.get("date-range")))||"",i=s?j.split(s,"-to-"):[],l=(i==null?void 0:i.length)||0,c=1<l&&(i==null?void 0:i[0])||Nt,r=1<l&&(i==null?void 0:i[1])||Pt;return{start:c,end:r}},Es=(t,s,i,l,c)=>e.jsx(G,{children:e.jsx(_,{span:24,style:{padding:"4px 0"},children:e.jsxs(G,{gutter:8,wrap:!1,children:[e.jsx(_,{flex:"none",children:e.jsx(Qi,{children:1<((t==null?void 0:t.length)||0)?l:c})}),e.jsx(_,{flex:"auto",children:e.jsx(oe,{gap:"4px 8px",wrap:!0,children:t==null?void 0:t.map(r=>{var f;return e.jsx(Me,{closeIcon:!0,onClose:()=>{i(j.without(t,r))},style:{margin:0},children:((f=s==null?void 0:s.find(x=>x.value===r))==null?void 0:f.label)||r},r)})})})]})})});function or(){const[t,s]=fs(),[i,l]=a.useState(sr(t)),[c,r]=a.useState(nr(t)),[f,x]=a.useState(ir(t)),[g,y]=a.useState(rr(t)),[m,A]=a.useState(Vi),[E,D]=a.useState(er),[v,R]=a.useState(tr),p=he({action:"knowledge_base_author_data_for_select",select_all:!0}),F=he({action:"knowledge_base_category_data_for_select",select_all:!0}),z=he({action:"knowledge_base_tag_data_for_select",select_all:!0}),k=d=>{l(d)},S=d=>{r(d)},u=d=>{x(d)},o=()=>{l([]),r([]),x([]),y({start:Nt,end:Pt})},w=()=>{};return a.useEffect(()=>{var M,C,P,q;const{data:d,isFetching:h,isError:b,error:T}=p;!h&&b&&Y.error((C=(M=T==null?void 0:T.data)==null?void 0:M.errors)==null?void 0:C.message),!h&&!b&&d&&d!=null&&d.status&&(P=d==null?void 0:d.data)!=null&&P.result&&A((q=d==null?void 0:d.data)==null?void 0:q.result)},[p]),a.useEffect(()=>{var M,C,P,q;const{data:d,isFetching:h,isError:b,error:T}=F;if(!h&&b&&Y.error((C=(M=T==null?void 0:T.data)==null?void 0:M.errors)==null?void 0:C.message),!h&&!b&&d&&d!=null&&d.status&&(P=d==null?void 0:d.data)!=null&&P.result){const B=((q=d==null?void 0:d.data)==null?void 0:q.result)||[];D([...B,{value:"999999",label:n("Uncategorized")}])}},[F]),a.useEffect(()=>{var M,C,P,q;const{data:d,isFetching:h,isError:b,error:T}=z;!h&&b&&Y.error((C=(M=T==null?void 0:T.data)==null?void 0:M.errors)==null?void 0:C.message),!h&&!b&&d&&d!=null&&d.status&&(P=d==null?void 0:d.data)!=null&&P.result&&R((q=d==null?void 0:d.data)==null?void 0:q.result)},[z]),a.useEffect(()=>{if(j.isEmpty(i)?t.delete("category"):t.set("category",j.join(i,",")),j.isEmpty(c)?t.delete("tag"):t.set("tag",j.join(c,",")),j.isEmpty(f)?t.delete("author"):t.set("author",j.join(f,",")),Nt!==(g==null?void 0:g.start)||Pt!==(g==null?void 0:g.end)){const d=(g==null?void 0:g.start)||"",h=(g==null?void 0:g.end)||"";d&&h?t.set("date-range",`${d}-to-${h}`):t.delete("date-range")}else t.delete("date-range");s(t)},[i,c,f,g,t,s]),e.jsx(e.Fragment,{children:e.jsx(G,{justify:"space-around",children:e.jsxs(_,{span:24,style:{maxWidth:"1160px"},children:[e.jsx(G,{children:e.jsx(_,{span:24,children:e.jsxs(Re,{size:"small",styles:{body:{background:"#fafafa",padding:"8px 12px"}},children:[e.jsxs(G,{gutter:8,align:"middle",children:[e.jsx(_,{style:{paddingTop:"4px",paddingBottom:"4px"},children:e.jsx(ge,{allowClear:!0,mode:"multiple",showSearch:!1,value:i,defaultValue:[],onChange:k,options:Ts(E),maxTagCount:0,placeholder:n("All Categories"),maxTagPlaceholder:d=>{const h=(d==null?void 0:d.length)||0;return 1<h?n("%d Categories",h||0):n("%d Category",h||0)},style:{width:"auto",minWidth:"150px"},className:"sg-multiple-select"})}),e.jsx(_,{style:{paddingTop:"4px",paddingBottom:"4px"},children:e.jsx(ge,{allowClear:!0,mode:"multiple",showSearch:!1,value:c,defaultValue:[],onChange:S,options:Ts(v),maxTagCount:0,placeholder:n("All Tags"),maxTagPlaceholder:d=>{const h=(d==null?void 0:d.length)||0;return 1<h?n("%d Tags",h||0):n("%d Tag",h||0)},style:{width:"auto",minWidth:"130px"},className:"sg-multiple-select"})}),e.jsx(_,{style:{paddingTop:"4px",paddingBottom:"4px"},children:e.jsx(ge,{allowClear:!0,mode:"multiple",showSearch:!1,value:f,defaultValue:[],onChange:u,options:Ts(m),maxTagCount:0,placeholder:n("All Authors"),maxTagPlaceholder:d=>{const h=(d==null?void 0:d.length)||0;return 1<h?n("%d Authors",h||0):n("%d Author",h||0)},style:{width:"auto",minWidth:"140px"},className:"sg-multiple-select"})}),e.jsx(at,{showOn:["xs","sm","md","lg"],children:e.jsx(_,{span:24})}),e.jsx(at,{showOn:["xl","xxl"],children:e.jsx(_,{flex:"auto"})}),e.jsx(_,{style:{paddingTop:"4px",paddingBottom:"4px"},children:e.jsx(Zi,{value:[qe(g==null?void 0:g.start),qe(g==null?void 0:g.end)],defaultValue:[qe(Nt),qe(Pt)],format:qt,presets:[{label:n("Last 30 Days"),value:[qe().add(-29,"d"),qe()]},{label:n("Last 14 Days"),value:[qe().add(-13,"d"),qe()]},{label:n("Last 7 Days"),value:[qe().add(-6,"d"),qe()]}],disabledDate:d=>d&&d>qe().endOf("day"),onChange:d=>{var T,M;const h=((T=d==null?void 0:d[0])==null?void 0:T.format(qt))||"",b=((M=d==null?void 0:d[1])==null?void 0:M.format(qt))||"";y(!h||!b?{start:Nt,end:Pt}:{start:h,end:b})}})}),e.jsx(at,{showOn:["xs","sm"],children:e.jsx(_,{span:24})}),e.jsx(_,{style:{paddingTop:"4px",paddingBottom:"4px"},children:e.jsx(te,{title:n("Clear filters"),children:e.jsx($,{icon:e.jsx(vt,{}),onClick:o})})}),e.jsx(_,{style:{paddingTop:"4px",paddingBottom:"4px"},children:e.jsx(te,{title:n("Reload"),children:e.jsx($,{icon:e.jsx(yt,{}),onClick:w})})})]}),!j.isEmpty(i)||!j.isEmpty(c)||!j.isEmpty(f)?e.jsxs(e.Fragment,{children:[e.jsx(Je,{style:{margin:"8px 0"}}),e.jsxs(oe,{gap:"0 16px",wrap:!0,children:[j.isEmpty(i)?null:Es(i,E,k,n("Categories:"),n("Category:")),j.isEmpty(c)?null:Es(c,v,S,n("Tags:"),n("Tag:")),j.isEmpty(f)?null:Es(f,m,u,n("Authors:"),n("Author:"))]})]}):null]})})}),e.jsxs(G,{gutter:32,wrap:!0,children:[e.jsxs(_,{span:24,children:[e.jsx(Yi,{category:i,tag:c,author:f,dateRange:g}),e.jsx(Ui,{category:i,tag:c,author:f,dateRange:g})]}),e.jsx(_,{span:24,xl:12,children:e.jsx(Ki,{dateRange:g})}),e.jsx(_,{span:24,xl:12,children:e.jsx(Ji,{dateRange:g})})]})]})})})}const{Text:lr}=ae,{TextArea:ar}=de;function cr({data:t,isEdit:s,onCloseModal:i,categorySelectList:l}){const c=["color"],r=t?{...t,parent:j.toInteger(t==null?void 0:t.parent)?j.toString(t.parent):""}:{parent:""},f=_e(),[x]=N.useForm(),[g,y]=a.useState(""),[m,A]=a.useState((r==null?void 0:r.icon_image)||""),[E,D]=we(),v=l==null?void 0:l.find(({value:p})=>j.toInteger(p)===(r==null?void 0:r.term_id)),R=p=>{var w,d,h,b,T;p=j.mapValues(p,function(M,C){return j.includes(c,C)&&(typeof M=="object"&&(M=M.toHexString()),M=j.toLower(M)),M});const F=((w=p==null?void 0:p.name)==null?void 0:w.trim())||"",z=((d=p==null?void 0:p.slug)==null?void 0:d.trim())||"",k=((h=p==null?void 0:p.parent)==null?void 0:h.trim())||"0",S=((b=p==null?void 0:p.description)==null?void 0:b.trim())||"",u=((T=p==null?void 0:p.color)==null?void 0:T.trim())||"",o=(m==null?void 0:m.trim())||"";E({params:{action:s?"knowledge_base_category_edit":"knowledge_base_category_add",id:r==null?void 0:r.term_id},data:{title:F,slug:z,parent:k,description:S,color:u,icon_image:o}})};return a.useEffect(()=>{var S,u,o,w;const{data:p,isLoading:F,isError:z,error:k}=D;f(F?Se():Ce()),!F&&z&&((u=(S=k==null?void 0:k.data)==null?void 0:S.errors)!=null&&u.message)&&Y.error((w=(o=k==null?void 0:k.data)==null?void 0:o.errors)==null?void 0:w.message),!F&&!z&&p&&(p!=null&&p.msg&&(p!=null&&p.status?(y(""),Y.success(p==null?void 0:p.msg)):(y(p==null?void 0:p.msg),$n())),p!=null&&p.status&&i())},[D,i,f]),e.jsx(N,{form:x,name:"createDocsCategory",layout:"vertical",onFinish:R,initialValues:r,autoComplete:"off",children:e.jsxs(G,{gutter:16,children:[g?e.jsx(_,{span:24,children:e.jsx(Ye,{message:g,type:"error",showIcon:!0,closable:!0,afterClose:()=>y(""),style:{marginBottom:"24px"}})}):null,e.jsx(_,{span:24,children:e.jsx(N.Item,{label:n("Title"),name:"name",rules:[{required:!0,message:n("%s is required.",n("Title")),whitespace:!0}],children:e.jsx(de,{})})}),e.jsx(_,{span:24,children:e.jsx(N.Item,{label:n("Slug"),name:"slug",rules:[{required:!1,whitespace:!0}],children:e.jsx(de,{})})}),e.jsx(_,{span:24,children:e.jsx(N.Item,{label:n("Parent Category"),name:"parent",children:e.jsx(ge,{options:l==null?void 0:l.filter(({value:p})=>(v==null?void 0:v.value)!==p&&!j.includes(v==null?void 0:v.child,j.toInteger(p)))})})}),e.jsx(_,{span:24,children:e.jsx(N.Item,{label:n("Description"),name:"description",rules:[{required:!1,whitespace:!0}],children:e.jsx(ar,{rows:4})})}),e.jsx(_,{span:24,children:e.jsxs(O,{direction:"vertical",style:{width:"100%",marginBottom:"24px"},children:[e.jsx(lr,{children:n("Color")}),e.jsxs(oe,{align:"center",gap:"4px 8px",wrap:!0,children:[e.jsx(N.Item,{name:"color",htmlFor:null,style:{marginBottom:0},children:e.jsx(Us,{showText:!0,disabledAlpha:!0})}),e.jsx(te,{title:n("Reset"),children:e.jsx($,{icon:e.jsx(vt,{}),onClick:()=>{x.setFieldValue("color","")}})})]})]})}),null,e.jsx(_,{span:24,style:{textAlign:"right"},children:e.jsxs(O,{children:[e.jsx($,{htmlType:"button",onClick:i,children:n("Cancel")}),e.jsx($,{type:"primary",htmlType:"submit",loading:D==null?void 0:D.isLoading,children:s?n("Update"):n("Create")})]})})]})})}const{Text:Ds}=ae;function dr({data:t,total:s,limit:i,page:l,onPageChange:c,onSizeChange:r,rowSelection:f,bulkAction:x,setBulkAction:g,bulkActionIds:y,onEditClick:m,isLoading:A,resetBulkAction:E,sortOrder:D,handleSort:v}){const R=Qe(),p=_e(),[F,z]=we(),k=(b,T)=>{F({params:{action:"knowledge_base_category_order_change",id:b,typ:T}})},S=b=>{F({params:{action:"knowledge_base_category_delete_item",id:b}})},u=()=>{let b="";x==="remove"&&(b="knowledge_base_category_delete_items"),b&&F({params:{action:b,ids:y}})},o=(b,T,M,{action:C})=>{C==="sort"&&v(M)},w=b=>D===`${b}-asc`?"ascend":D===`${b}-desc`?"descend":null,d=[{title:n("ID"),dataIndex:"term_id",width:70,sorter:!0,sortDirections:["ascend","descend","ascend"],sortOrder:w("term_id")},{title:n("Icon"),dataIndex:"icon_image",width:40,render:b=>e.jsx(Ii,{shape:"square",size:24,src:b||"",icon:e.jsx(Fi,{})}),responsive:[]},{title:n("Title"),dataIndex:"name",sorter:!0,sortDirections:["ascend","descend","ascend"],sortOrder:w("name"),render:(b,T)=>e.jsxs(O,{direction:"vertical",children:[T!=null&&T.color?e.jsx(Gs,{color:T==null?void 0:T.color,text:b}):e.jsx(Ds,{children:b}),R.xs||R.sm||R.md||R.lg?e.jsxs(e.Fragment,{children:[e.jsxs(oe,{gap:"0 8px",wrap:!0,children:[e.jsx(Ds,{children:n("Parent:")}),T!=null&&T.parent_category_name?e.jsx(Me,{bordered:!1,children:T==null?void 0:T.parent_category_name}):e.jsx("span",{children:"—"})]}),e.jsxs(oe,{gap:"0 8px",wrap:!0,children:[e.jsx(Ds,{children:n("Count:")}),e.jsx(Me,{children:T==null?void 0:T.count})]}),e.jsxs(O,{size:4,children:[e.jsx(De,{action:"orderup",onConfirm:()=>k(T==null?void 0:T.term_id,"u"),children:e.jsx(te,{title:n("Order Up"),children:e.jsx($,{icon:e.jsx(dn,{}),size:"small"})})}),e.jsx(Me,{style:{lineHeight:"22px",margin:0},children:(T==null?void 0:T.fld_order)||0}),e.jsx(De,{action:"orderdown",onConfirm:()=>k(T==null?void 0:T.term_id,"d"),children:e.jsx(te,{title:n("Order Down"),children:e.jsx($,{icon:e.jsx(un,{}),size:"small"})})})]}),R.xs?e.jsxs(O,{children:[e.jsx($,{type:"primary",icon:e.jsx(ls,{}),size:"small",ghost:!0,onClick:()=>m(T)}),e.jsx(De,{action:"remove",onConfirm:()=>S(T==null?void 0:T.term_id),children:e.jsx($,{type:"primary",icon:e.jsx(as,{}),size:"small",danger:!0,ghost:!0})})]}):null]}):null]})},{title:n("Parent"),dataIndex:"parent_category_name",render:b=>b?e.jsx(Me,{bordered:!1,children:b}):e.jsx("span",{children:"—"}),responsive:["xl"]},{title:n("Count"),dataIndex:"count",render:b=>e.jsx(Me,{children:b}),responsive:["xl"]},{title:n("Order"),dataIndex:"fld_order",width:100,render:(b,T)=>e.jsxs(O,{size:4,children:[e.jsx(De,{action:"orderup",onConfirm:()=>k(T==null?void 0:T.term_id,"u"),children:e.jsx(te,{title:n("Order Up"),children:e.jsx($,{icon:e.jsx(dn,{}),size:"small"})})}),e.jsx(Me,{style:{lineHeight:"22px",margin:0},children:b||0}),e.jsx(De,{action:"orderdown",onConfirm:()=>k(T==null?void 0:T.term_id,"d"),children:e.jsx(te,{title:n("Order Down"),children:e.jsx($,{icon:e.jsx(un,{}),size:"small"})})})]}),sorter:!0,sortDirections:["ascend","descend","ascend"],sortOrder:w("fld_order"),responsive:["xl"]},{title:n("Action"),width:100,align:"right",render:b=>e.jsxs(O,{children:[e.jsx($,{type:"primary",icon:e.jsx(ls,{}),size:"small",ghost:!0,onClick:()=>m(b)}),e.jsx(De,{action:"remove",onConfirm:()=>S(b==null?void 0:b.term_id),children:e.jsx($,{type:"primary",icon:e.jsx(as,{}),size:"small",danger:!0,ghost:!0})})]}),responsive:["sm"]}],h=()=>{const b=s?(l-1)*i+1:0,T=j.min([b+i-1,s]),M=n("Showing %1$d - %2$d of %3$d",b,T,s);return e.jsxs(G,{gutter:16,align:"middle",justify:"space-between",children:[e.jsx(_,{style:{marginTop:"4px",marginBottom:"4px"},children:e.jsxs(G,{align:"middle",gutter:8,children:[e.jsx(_,{children:e.jsx(ge,{value:x,style:{width:140},onChange:C=>g(C),options:[{value:"",label:n("Bulk Actions")},{value:"remove",label:n("Delete")}],disabled:!(y!=null&&y.length)})}),e.jsx(_,{children:e.jsx(De,{action:x,onConfirm:()=>u(),children:e.jsx($,{type:"primary",disabled:!x,children:n("Apply")})})})]})}),e.jsx(_,{style:{marginTop:"4px",marginBottom:"4px"},children:M})]})};return a.useEffect(()=>{var P,q,B,W;const{data:b,isLoading:T,isError:M,error:C}=z;p(T?Se():Ce()),!T&&M&&((q=(P=C==null?void 0:C.data)==null?void 0:P.errors)!=null&&q.message)&&Y.error((W=(B=C==null?void 0:C.data)==null?void 0:B.errors)==null?void 0:W.message),!T&&!M&&b&&(b!=null&&b.msg&&(b!=null&&b.status?Y.success(b==null?void 0:b.msg):Y.error(b==null?void 0:b.msg)),b!=null&&b.status&&E())},[z,E,p]),e.jsx(kt,{rowKey:b=>b==null?void 0:b.term_id,rowSelection:f,columns:d,dataSource:t,footer:h,loading:A,onChange:o,pagination:{total:s,pageSize:i,current:l,onChange:c,onShowSizeChange:r,showSizeChanger:s>10,style:{marginBottom:0}}})}const{Title:ur}=ae;function hr(){const t=Qe(),s=Ct(),i=_e(),l=Un(),[c,r]=fs(),[f,x]=a.useState(l("limit",20)),[g,y]=a.useState((c==null?void 0:c.get("page"))||1),[m,A]=a.useState((c==null?void 0:c.get("sort"))||""),[E,D]=a.useState(""),[v,R]=a.useState([]),[p,F]=a.useState(!1),[z,k]=a.useState(null),[S,u]=a.useState(!1),[o,w]=a.useState(0),[d,h]=a.useState([]),[b,T]=a.useState([]),[M,C]=we(),P=he({action:"knowledge_base_category_data",limit:f,page:g,sort:m||"fld_order-asc"}),q=he({action:"knowledge_base_category_data_for_select",select:!0}),B=a.useCallback(()=>{D(""),R([])},[]),W=U=>{U===1?c.delete("page"):c.set("page",U),y(U),r(c),B()},K=(U,Q)=>{Q===20?c.delete("limit"):c.set("limit",Q),x(Q),r(c),B()},X={selectedRowKeys:v,onChange:U=>{U!=null&&U.length||B(),R(U)}},Z=U=>{k(U),u(!0),F(!0)},V=a.useCallback(()=>{F(!1),k(null),u(!1)},[]),ee=()=>{M({params:{action:"knowledge_base_category_reset_order"}})},se=()=>{P.refetch(),B()},ue=U=>{const{field:Q,order:ne}=U||{};let I=Q;ne==="ascend"?I+="-asc":I+="-desc",A(I),y(1),c.delete("page"),c.set("sort",I),r(c),B()};return a.useEffect(()=>{var J,H,ie,re;const{data:U,isFetching:Q,isError:ne,error:I}=P;!Q&&ne&&Y.error((H=(J=I==null?void 0:I.data)==null?void 0:J.errors)==null?void 0:H.message),!Q&&!ne&&U&&(h((ie=U==null?void 0:U.data)==null?void 0:ie.result),w(((re=U==null?void 0:U.data)==null?void 0:re.total)||0))},[P]),a.useEffect(()=>{var J,H,ie,re;const{data:U,isFetching:Q,isError:ne,error:I}=q;!Q&&ne&&Y.error((H=(J=I==null?void 0:I.data)==null?void 0:J.errors)==null?void 0:H.message),!Q&&!ne&&U&&U!=null&&U.status&&(ie=U==null?void 0:U.data)!=null&&ie.result&&T((re=U==null?void 0:U.data)==null?void 0:re.result)},[q]),a.useEffect(()=>{var J,H,ie,re;const{data:U,isLoading:Q,isError:ne,error:I}=C;i(Q?Se():Ce()),!Q&&ne&&((H=(J=I==null?void 0:I.data)==null?void 0:J.errors)!=null&&H.message)&&Y.error((re=(ie=I==null?void 0:I.data)==null?void 0:ie.errors)==null?void 0:re.message),!Q&&!ne&&U&&(U!=null&&U.msg&&(U!=null&&U.status?Y.success(U==null?void 0:U.msg):Y.error(U==null?void 0:U.msg)),U!=null&&U.status&&B())},[C,B,i]),a.useEffect(()=>{const{search:U}=s,Q=new URLSearchParams(U);Q.has("limit")||x(20),Q.has("page")||y(1),Q.has("sort")||A("")},[s]),e.jsxs(e.Fragment,{children:[e.jsxs(G,{gutter:16,justify:"space-between",align:"middle",style:{paddingBottom:"8px",marginBottom:"16px"},children:[e.jsx(_,{style:{paddingBottom:"8px"},children:e.jsx(ur,{level:5,style:{fontSize:"18px",margin:0},children:n("Categories")})}),e.jsx(_,{style:{paddingBottom:"8px"},children:e.jsxs(O,{children:[e.jsx(De,{action:"orderreset",onConfirm:()=>ee(),children:e.jsx(te,{title:n("Reset Order"),children:e.jsx($,{icon:e.jsx(vt,{})})})}),e.jsx($,{type:"primary",icon:e.jsx(yt,{}),onClick:se,ghost:!0}),t!=null&&t.lg||t!=null&&t.xl||t!=null&&t.xxl?e.jsx($,{type:"primary",icon:e.jsx(lt,{}),onClick:()=>{F(!0)},children:n("Add New")}):e.jsx($,{type:"primary",icon:e.jsx(lt,{}),onClick:()=>{F(!0)}})]})})]}),e.jsx(dr,{data:d,total:o,limit:f,page:g,onPageChange:W,onSizeChange:K,rowSelection:X,bulkAction:E,setBulkAction:D,bulkActionIds:v,onEditClick:Z,isLoading:P==null?void 0:P.isFetching,resetBulkAction:B,sortOrder:m,handleSort:ue}),e.jsx(Wn,{title:S?n("Edit %s",n("Category")):n("Add New %s",n("Category")),centered:!0,open:p,onCancel:V,onClose:V,footer:null,width:800,style:{maxWidth:"calc(100vw - 32px)",marginTop:"40px",marginBottom:"40px"},destroyOnClose:!0,children:e.jsx(cr,{isOpen:p,onCloseModal:V,data:z,isEdit:S,categorySelectList:b})})]})}const{Text:gr}=ae;function pr({setIsLoading:t}){const s=["chatbot_openai_api_key","chatbot_claude_api_key"],i={chatbot_status:!1,chatbot_ai_tool:"openai",chatbot_openai_api_key:"",chatbot_openai_max_tokens:"",chatbot_claude_api_key:"",chatbot_claude_max_tokens:"",chatbot_display_opts:["whole_site","ticket_page"]},l=_e(),[c]=N.useForm(),[r,f]=a.useState(null),[x,g]=a.useState(null),[y,m]=a.useState(!0),[A,E]=a.useState(!0),[D,v]=a.useState(""),[R,p]=we(),F=he({action:"knowledge_base_chatbot_data"}),z=(u,o)=>{o=j.mapValues(o,function(d){return j.isString(d)?j.trim(d):d});for(const d of s){const h=u==null?void 0:u[d];h&&j.includes(h,"*")&&(o[d]=r[d])}g(o||{}),m(!(o!=null&&o.chatbot_status)||!1);const w=j.pick(r,j.keys(o));j.isEqual(w,o)?E(!0):r!=null&&r.chatbot_status||o!=null&&o.chatbot_status?E(!1):E(!0)},k=async u=>{var C,P,q;const o=u!=null&&u.chatbot_status?"A":"I",w=((C=u==null?void 0:u.chatbot_ai_tool)==null?void 0:C.trim())||"",d=((P=u==null?void 0:u.chatbot_openai_api_key)==null?void 0:P.trim())||"",h=j.toInteger((u==null?void 0:u.chatbot_openai_max_tokens)||0)||0,b=((q=u==null?void 0:u.chatbot_claude_api_key)==null?void 0:q.trim())||"",T=j.toInteger((u==null?void 0:u.chatbot_claude_max_tokens)||0)||0,M=(u==null?void 0:u.chatbot_display_opts)||[];R({params:{action:"knowledge_base_chatbot"},data:{chatbot_status:o,chatbot_ai_tool:w,chatbot_openai_api_key:d,chatbot_openai_max_tokens:h,chatbot_claude_api_key:b,chatbot_claude_max_tokens:T,chatbot_display_opts:M}})},S=()=>{c.setFieldsValue(r||{}),z(null,r)};return a.useEffect(()=>{c.setFieldsValue(r||{}),g(r||{}),m(!(r!=null&&r.chatbot_status)||!1),E(!0)},[r,c]),a.useEffect(()=>{var h,b;const{data:u,isFetching:o,isError:w,error:d}=F;t(o),!o&&w&&Y.error((b=(h=d==null?void 0:d.data)==null?void 0:h.errors)==null?void 0:b.message),!o&&!w&&u&&f((u==null?void 0:u.data)||{})},[F,t]),a.useEffect(()=>{var h,b,T,M;const{data:u,isLoading:o,isError:w,error:d}=p;l(o?Se():Ce()),!o&&w&&((b=(h=d==null?void 0:d.data)==null?void 0:h.errors)!=null&&b.message)&&Y.error((M=(T=d==null?void 0:d.data)==null?void 0:T.errors)==null?void 0:M.message),!o&&!w&&u&&u!=null&&u.msg&&(u!=null&&u.status?(v(""),Y.success(u==null?void 0:u.msg)):(v(u==null?void 0:u.msg),He()))},[p,l]),e.jsx(N,{form:c,name:"saveChatbot",layout:"vertical",autoComplete:"off",onFinish:k,onValuesChange:z,initialValues:i,children:e.jsxs(G,{children:[D?e.jsx(_,{span:24,children:e.jsx(Ye,{message:D,type:"error",showIcon:!0,closable:!0,afterClose:()=>v(""),style:{marginBottom:"24px"}})}):null,e.jsx(_,{span:24,children:e.jsxs(O,{align:"center",style:{marginBottom:"24px"},children:[e.jsx(N.Item,{name:"chatbot_status",valuePropName:"checked",style:{marginBottom:0},children:e.jsx(Ae,{})}),e.jsx(gr,{onClick:()=>{c.setFieldValue("chatbot_status",!(x!=null&&x.chatbot_status)),z(null,c.getFieldsValue())},style:{cursor:"pointer"},children:x!=null&&x.chatbot_status?n("Click to disable."):n("Click to enable and setup.")})]})}),e.jsx(_,{span:24,children:e.jsx(N.Item,{label:n("AI Tool"),name:"chatbot_ai_tool",rules:[{required:!0,message:n("%s is required.",n("AI tool")),whitespace:!0}],help:y?"":void 0,children:e.jsx(qn.Group,{options:[{label:"OpenAI",value:"openai"},{label:"Claude",value:"claude"}],disabled:y})})}),(x==null?void 0:x.chatbot_ai_tool)==="openai"?e.jsxs(e.Fragment,{children:[e.jsx(_,{span:24,children:e.jsx(N.Item,{label:n("OpenAI API Key"),name:"chatbot_openai_api_key",rules:[{required:!0,message:n("%s is required.",n("OpenAI API key")),whitespace:!0}],help:y?"":void 0,tooltip:n("Value containing any asterisk (*) will not be updated."),children:e.jsx(de,{disabled:y})})}),e.jsx(_,{span:24,children:e.jsx(N.Item,{label:n("OpenAI Max Tokens"),name:"chatbot_openai_max_tokens",rules:[{required:!0,message:n("%s is required.",n("OpenAI max token"))}],help:y?"":void 0,children:e.jsx(_t,{disabled:y,style:{width:"100%"}})})})]}):e.jsxs(e.Fragment,{children:[e.jsx(_,{span:24,children:e.jsx(N.Item,{label:n("Claude API Key"),name:"chatbot_claude_api_key",rules:[{required:!0,message:n("%s is required.",n("Claude API key")),whitespace:!0}],help:y?"":void 0,tooltip:n("Value containing any asterisk (*) will not be updated."),children:e.jsx(de,{disabled:y})})}),e.jsx(_,{span:24,children:e.jsx(N.Item,{label:n("Claude Max Tokens"),name:"chatbot_claude_max_tokens",rules:[{required:!0,message:n("%s is required.",n("Claude max token"))}],help:y?"":void 0,children:e.jsx(_t,{disabled:y,style:{width:"100%"}})})})]}),e.jsx(_,{span:24,children:e.jsx(N.Item,{label:n("Display Options"),name:"chatbot_display_opts",htmlFor:null,children:e.jsx(vs.Group,{disabled:y,children:e.jsxs(G,{children:[e.jsx(_,{span:24,children:e.jsx(vs,{value:"whole_site",style:{lineHeight:"32px"},children:n("Show in Whole Site")})}),e.jsx(_,{span:24,children:e.jsx(vs,{value:"ticket_page",style:{lineHeight:"32px"},children:n("Show in Ticket Page")})})]})})})}),e.jsx(_,{span:24,children:e.jsxs(O,{children:[e.jsx($,{type:"primary",htmlType:"submit",loading:!1,disabled:A,children:n("Save Changes")}),e.jsx($,{htmlType:"button",onClick:S,disabled:A,children:n("Discard")})]})})]})})}const{Text:xr}=ae;function fr({setIsLoading:t}){const s=["chatbot_primary_color"],i=[],l=[],c={chatbot_primary_color:"#7229dd"},r=_e(),[f]=N.useForm(),[x,g]=a.useState(null),[y,m]=a.useState(!0),[A,E]=a.useState(!0),[D,v]=a.useState(""),[R,p]=we(),F=he({action:"knowledge_base_chatbot_data_style"}),z=(u,o)=>{o=j.mapValues(o,function(d,h){return j.includes(s,h)&&(typeof d=="object"&&(d=d.toHexString()),d=j.toLower(d)),j.isString(d)?j.trim(d):d});for(const d of i){const h=u==null?void 0:u[d];h&&j.includes(h,"*")&&(o[d]=x[d])}for(const d of l)(u==null?void 0:u[d])&&(o[d]=wt((u==null?void 0:u[d])||""));m(!1);const w=j.pick(x,j.keys(o));j.isEqual(w,o)?E(!0):E(!1)},k=async u=>{var w;u=j.mapValues(u,function(d,h){return j.includes(s,h)&&(typeof d=="object"&&(d=d.toHexString()),d=j.toLower(d)),d});const o=((w=u==null?void 0:u.chatbot_primary_color)==null?void 0:w.trim())||"";R({params:{action:"knowledge_base_chatbot_style"},data:{chatbot_primary_color:o}})},S=()=>{f.setFieldsValue(x||{}),z(null,x)};return a.useEffect(()=>{f.setFieldsValue(x||{}),m(!1),E(!0)},[x,f]),a.useEffect(()=>{var h,b;const{data:u,isFetching:o,isError:w,error:d}=F;t(o),!o&&w&&Y.error((b=(h=d==null?void 0:d.data)==null?void 0:h.errors)==null?void 0:b.message),!o&&!w&&u&&g((u==null?void 0:u.data)||{})},[F,t]),a.useEffect(()=>{var h,b,T,M;const{data:u,isLoading:o,isError:w,error:d}=p;r(o?Se():Ce()),!o&&w&&((b=(h=d==null?void 0:d.data)==null?void 0:h.errors)!=null&&b.message)&&Y.error((M=(T=d==null?void 0:d.data)==null?void 0:T.errors)==null?void 0:M.message),!o&&!w&&u&&u!=null&&u.msg&&(u!=null&&u.status?(v(""),Y.success(u==null?void 0:u.msg)):(v(u==null?void 0:u.msg),He()))},[p,r]),e.jsx(N,{form:f,name:"saveChatbotStyle",layout:"vertical",autoComplete:"off",onFinish:k,onValuesChange:z,initialValues:c,children:e.jsxs(G,{children:[D?e.jsx(_,{span:24,children:e.jsx(Ye,{message:D,type:"error",showIcon:!0,closable:!0,afterClose:()=>v(""),style:{marginBottom:"24px"}})}):null,e.jsx(_,{span:24,children:e.jsxs(O,{direction:"vertical",style:{width:"100%",marginBottom:"24px"},children:[e.jsx(xr,{children:n("Primary Color")}),e.jsxs(oe,{align:"center",gap:"4px 8px",wrap:!0,children:[e.jsx(N.Item,{name:"chatbot_primary_color",htmlFor:null,help:y?"":void 0,style:{marginBottom:0},children:e.jsx(Us,{showText:!0,disabledAlpha:!0})}),e.jsx(te,{title:n("Reset"),children:e.jsx($,{icon:e.jsx(vt,{}),onClick:()=>{f.setFieldValue("chatbot_primary_color","#7229dd"),z({chatbot_primary_color:"#7229dd"},f.getFieldsValue())}})})]})]})}),e.jsx(_,{span:24,children:e.jsxs(O,{children:[e.jsx($,{type:"primary",htmlType:"submit",loading:!1,disabled:A,children:n("Save Changes")}),e.jsx($,{htmlType:"button",onClick:S,disabled:A,children:n("Discard")})]})})]})})}function mr({setIsLoading:t}){const s=[],i=[],l={chatbot_text_title:n("Knowledge Base Assistant"),chatbot_text_welcome_message:n("Hello! How can I help you today?"),chatbot_text_feedback_message:n("Was this answer helpful?"),chatbot_text_helpful_response_message:n("Thank you for your feedback."),chatbot_text_not_helpful_response_message:n("Thank you for your feedback!"),chatbot_text_related_docs_title:n("Related documents:"),chatbot_text_create_ticket_link_text:n("Create a ticket"),chatbot_text_input_placeholder:n("Ask a question..."),chatbot_text_nothing_found_message:n("Nothing matched your query!"),chatbot_text_error_message:n("Sorry, I encountered an error!")},c=_e(),[r]=N.useForm(),[f,x]=a.useState(null),[g,y]=a.useState(!0),[m,A]=a.useState(!0),[E,D]=a.useState(""),[v,R]=we(),p=he({action:"knowledge_base_chatbot_data_text"}),F=(S,u)=>{u=j.mapValues(u,function(w){return j.isString(w)?j.trim(w):w});for(const w of s){const d=S==null?void 0:S[w];d&&j.includes(d,"*")&&(u[w]=f[w])}for(const w of i)(S==null?void 0:S[w])&&(u[w]=wt((S==null?void 0:S[w])||""));y(!1);const o=j.pick(f,j.keys(u));j.isEqual(o,u)?A(!0):A(!1)},z=async S=>{var q,B,W,K,X,Z,V,ee,se,ue;const u=((q=S==null?void 0:S.chatbot_text_title)==null?void 0:q.trim())||"",o=((B=S==null?void 0:S.chatbot_text_welcome_message)==null?void 0:B.trim())||"",w=((W=S==null?void 0:S.chatbot_text_feedback_message)==null?void 0:W.trim())||"",d=((K=S==null?void 0:S.chatbot_text_helpful_response_message)==null?void 0:K.trim())||"",h=((X=S==null?void 0:S.chatbot_text_not_helpful_response_message)==null?void 0:X.trim())||"",b=((Z=S==null?void 0:S.chatbot_text_related_docs_title)==null?void 0:Z.trim())||"",T=((V=S==null?void 0:S.chatbot_text_create_ticket_link_text)==null?void 0:V.trim())||"",M=((ee=S==null?void 0:S.chatbot_text_input_placeholder)==null?void 0:ee.trim())||"",C=((se=S==null?void 0:S.chatbot_text_nothing_found_message)==null?void 0:se.trim())||"",P=((ue=S==null?void 0:S.chatbot_text_error_message)==null?void 0:ue.trim())||"";v({params:{action:"knowledge_base_chatbot_text"},data:{chatbot_text_title:u,chatbot_text_welcome_message:o,chatbot_text_feedback_message:w,chatbot_text_helpful_response_message:d,chatbot_text_not_helpful_response_message:h,chatbot_text_related_docs_title:b,chatbot_text_create_ticket_link_text:T,chatbot_text_input_placeholder:M,chatbot_text_nothing_found_message:C,chatbot_text_error_message:P}})},k=()=>{r.setFieldsValue(f||{}),F(null,f)};return a.useEffect(()=>{r.setFieldsValue(f||{}),y(!1),A(!0)},[f,r]),a.useEffect(()=>{var d,h;const{data:S,isFetching:u,isError:o,error:w}=p;t(u),!u&&o&&Y.error((h=(d=w==null?void 0:w.data)==null?void 0:d.errors)==null?void 0:h.message),!u&&!o&&S&&x((S==null?void 0:S.data)||{})},[p,t]),a.useEffect(()=>{var d,h,b,T;const{data:S,isLoading:u,isError:o,error:w}=R;c(u?Se():Ce()),!u&&o&&((h=(d=w==null?void 0:w.data)==null?void 0:d.errors)!=null&&h.message)&&Y.error((T=(b=w==null?void 0:w.data)==null?void 0:b.errors)==null?void 0:T.message),!u&&!o&&S&&S!=null&&S.msg&&(S!=null&&S.status?(D(""),Y.success(S==null?void 0:S.msg)):(D(S==null?void 0:S.msg),He()))},[R,c]),e.jsx(N,{form:r,name:"saveChatbotText",layout:"vertical",autoComplete:"off",onFinish:z,onValuesChange:F,initialValues:l,children:e.jsxs(G,{children:[E?e.jsx(_,{span:24,children:e.jsx(Ye,{message:E,type:"error",showIcon:!0,closable:!0,afterClose:()=>D(""),style:{marginBottom:"24px"}})}):null,e.jsx(_,{span:24,children:e.jsx(N.Item,{label:e.jsx(nt,{text:n("Chatbot Title")}),name:"chatbot_text_title",rules:[{required:!0,message:n("%s is required.",n("Chatbot title")),whitespace:!0}],help:g?"":void 0,children:e.jsx(de,{placeholder:n("Knowledge Base Assistant"),disabled:g})})}),e.jsx(_,{span:24,children:e.jsx(N.Item,{label:e.jsx(nt,{text:n("Welcome Message")}),name:"chatbot_text_welcome_message",rules:[{required:!0,message:n("%s is required.",n("Welcome message")),whitespace:!0}],help:g?"":void 0,children:e.jsx(de,{placeholder:n("Hello! How can I help you today?"),disabled:g})})}),e.jsx(_,{span:24,children:e.jsx(N.Item,{label:e.jsx(nt,{text:n("Feedback Message")}),name:"chatbot_text_feedback_message",rules:[{required:!0,message:n("%s is required.",n("Feedback message")),whitespace:!0}],help:g?"":void 0,children:e.jsx(de,{placeholder:n("Was this answer helpful?"),disabled:g})})}),e.jsx(_,{span:24,children:e.jsx(N.Item,{label:e.jsx(nt,{text:n("Helpful Response Message")}),name:"chatbot_text_helpful_response_message",rules:[{required:!0,message:n("%s is required.",n("Helpful response message")),whitespace:!0}],help:g?"":void 0,children:e.jsx(de,{placeholder:n("Thank you for your feedback."),disabled:g})})}),e.jsx(_,{span:24,children:e.jsx(N.Item,{label:e.jsx(nt,{text:n("Not Helpful Response Message")}),name:"chatbot_text_not_helpful_response_message",rules:[{required:!0,message:n("%s is required.",n("Not helpful response message")),whitespace:!0}],help:g?"":void 0,children:e.jsx(de,{placeholder:n("Thank you for your feedback!"),disabled:g})})}),e.jsx(_,{span:24,children:e.jsx(N.Item,{label:e.jsx(nt,{text:n("Related Docs Title")}),name:"chatbot_text_related_docs_title",rules:[{required:!0,message:n("%s is required.",n("Related docs title")),whitespace:!0}],help:g?"":void 0,children:e.jsx(de,{placeholder:n("Related documents:"),disabled:g})})}),e.jsx(_,{span:24,children:e.jsx(N.Item,{label:e.jsx(nt,{text:n("Create Ticket Link Text")}),name:"chatbot_text_create_ticket_link_text",rules:[{required:!0,message:n("%s is required.",n("Create ticket link text")),whitespace:!0}],help:g?"":void 0,children:e.jsx(de,{placeholder:n("Create a ticket"),disabled:g})})}),e.jsx(_,{span:24,children:e.jsx(N.Item,{label:e.jsx(nt,{text:n("Input Placeholder")}),name:"chatbot_text_input_placeholder",rules:[{required:!0,message:n("%s is required.",n("Input placeholder")),whitespace:!0}],help:g?"":void 0,children:e.jsx(de,{placeholder:n("Ask a question..."),disabled:g})})}),e.jsx(_,{span:24,children:e.jsx(N.Item,{label:e.jsx(nt,{text:n("Nothing Found Message")}),name:"chatbot_text_nothing_found_message",rules:[{required:!0,message:n("%s is required.",n("Nothing found message")),whitespace:!0}],help:g?"":void 0,children:e.jsx(de,{placeholder:n("Nothing matched your query!"),disabled:g})})}),e.jsx(_,{span:24,children:e.jsx(N.Item,{label:e.jsx(nt,{text:n("Error Message")}),name:"chatbot_text_error_message",rules:[{required:!0,message:n("%s is required.",n("Error message")),whitespace:!0}],help:g?"":void 0,children:e.jsx(de,{placeholder:n("Sorry, I encountered an error!"),disabled:g})})}),e.jsx(_,{span:24,children:e.jsxs(O,{children:[e.jsx($,{type:"primary",htmlType:"submit",loading:!1,disabled:m,children:n("Save Changes")}),e.jsx($,{htmlType:"button",onClick:k,disabled:m,children:n("Discard")})]})})]})})}const{Title:jr}=ae;function br(){var F;const t=Qe(),s=Ct(),[i,l]=a.useState(!0),[c,r]=a.useState(!0),[f,x]=a.useState(!0),[g,y]=a.useState(!0),[m,A]=a.useState(""),E=(F=it(s,"docs/config/ai-chatbot",["main"]))==null?void 0:F[0];function D(){const z=m||E||"",k={main:e.jsx(pr,{setIsLoading:r}),text:e.jsx(mr,{setIsLoading:x}),style:e.jsx(fr,{setIsLoading:y})};return e.jsx(e.Fragment,{children:Object.entries(k).map(([S,u])=>e.jsx("div",{className:S===z?"":"sg-hidden",children:u},S))})}a.useEffect(()=>{!c&&!f&&!g&&l(!1)},[c,f,g]),a.useEffect(()=>{var z;A((z=it(s,"docs/config/ai-chatbot",["main"]))==null?void 0:z[0])},[s]);const v=[{key:"main",label:e.jsx(be,{to:"/docs/config/ai-chatbot",pro:!0,badge:!0,style:{color:"inherit"},children:n("Main")})},{key:"text",label:e.jsx(be,{to:"/docs/config/ai-chatbot/text",pro:!0,badge:!0,style:{color:"inherit"},children:n("Text")})},{key:"style",label:e.jsx(be,{to:"/docs/config/ai-chatbot/style",pro:!0,badge:!0,style:{color:"inherit"},children:n("Style")})}],R=()=>{const z=m||E||"";return z==="text"?n("Text"):z==="style"?n("Style"):n("Main")},p=t.lg||t.xl||t.xxl?{tabList:v,activeTabKey:m,defaultActiveKey:E,tabProps:{size:"middle"}}:{title:R()};return e.jsx(G,{justify:"space-around",children:e.jsxs(_,{span:24,style:{maxWidth:"960px"},children:[e.jsxs(G,{gutter:16,justify:"space-between",align:"middle",style:{paddingBottom:"8px",marginBottom:"8px"},children:[e.jsx(_,{style:{paddingBottom:"8px"},children:e.jsx(jr,{level:5,style:{fontSize:"18px",margin:0},children:n("AI Chatbot")})}),e.jsx(_,{style:{paddingBottom:"8px"},children:e.jsxs(O,{children:[e.jsx(te,{title:e.jsxs(O,{align:"center",children:[e.jsx(Ie,{}),e.jsx("span",{children:n("Learn more")})]}),children:e.jsx($,{icon:e.jsx(Ie,{}),href:"https://supportgenix.com",target:"_blank"})}),e.jsx(te,{title:e.jsxs(O,{align:"center",children:[e.jsx(Fe,{}),e.jsx("span",{children:n("Documentation")})]}),children:e.jsx($,{icon:e.jsx(Fe,{}),href:"https://supportgenix.com/docs/",target:"_blank"})})]})})]}),e.jsx(G,{children:e.jsx(_,{span:24,children:e.jsx(Re,{size:"small",...p,styles:{header:{background:"#fafafa",fontWeight:500},body:{padding:"20px 24px 24px 24px"}},children:e.jsx(ct,{spinning:i,style:{maxHeight:"unset"},children:D()})})})})]})})}function _r({setIsLoading:t}){const s=[],i=[],l={archive_docs_layout:"masonry",archive_number_of_columns:3,archive_docs_per_page:10,archive_docs_orderby:"default",archive_docs_order:"DESC"},c=_e(),[r]=N.useForm(),[f,x]=a.useState(null),[g,y]=a.useState(null),[m,A]=a.useState(!0),[E,D]=a.useState(!0),[v,R]=a.useState(""),[p,F]=we(),z=he({action:"knowledge_base_config_design_archive_data"}),k=(o,w)=>{w=j.mapValues(w,function(h){return j.isString(h)?j.trim(h):h});for(const h of s){const b=o==null?void 0:o[h];b&&j.includes(b,"*")&&(w[h]=f[h])}for(const h of i)(o==null?void 0:o[h])&&(w[h]=wt((o==null?void 0:o[h])||""));y(w||{}),A(!1);const d=j.pick(f,j.keys(w));j.isEqual(d,w)?D(!0):D(!1)},S=async o=>{var M,C,P;const w=((M=o==null?void 0:o.archive_docs_layout)==null?void 0:M.trim())||"masonry",d=j.toInteger((o==null?void 0:o.archive_number_of_columns)||0)||0,h=j.toInteger((o==null?void 0:o.archive_docs_per_page)||0)||0,b=((C=o==null?void 0:o.archive_docs_orderby)==null?void 0:C.trim())||"",T=((P=o==null?void 0:o.archive_docs_order)==null?void 0:P.trim())||"";p({params:{action:"knowledge_base_config_design_archive"},data:{archive_docs_layout:w,archive_number_of_columns:d,archive_docs_per_page:h,archive_docs_orderby:b,archive_docs_order:T}})},u=()=>{r.setFieldsValue(f||{}),k(null,f)};return a.useEffect(()=>{r.setFieldsValue(f||{}),y(f||{}),A(!1),D(!0)},[f,r]),a.useEffect(()=>{var b,T;const{data:o,isFetching:w,isError:d,error:h}=z;t(w),!w&&d&&Y.error((T=(b=h==null?void 0:h.data)==null?void 0:b.errors)==null?void 0:T.message),!w&&!d&&o&&x((o==null?void 0:o.data)||{})},[z,t]),a.useEffect(()=>{var b,T,M,C;const{data:o,isLoading:w,isError:d,error:h}=F;c(w?Se():Ce()),!w&&d&&((T=(b=h==null?void 0:h.data)==null?void 0:b.errors)!=null&&T.message)&&Y.error((C=(M=h==null?void 0:h.data)==null?void 0:M.errors)==null?void 0:C.message),!w&&!d&&o&&o!=null&&o.msg&&(o!=null&&o.status?(R(""),Y.success(o==null?void 0:o.msg)):(R(o==null?void 0:o.msg),He()))},[F,c]),e.jsx(N,{form:r,name:"saveDesignArchive",layout:"vertical",autoComplete:"off",onFinish:S,onValuesChange:k,initialValues:l,children:e.jsxs(G,{children:[v?e.jsx(_,{span:24,children:e.jsx(Ye,{message:v,type:"error",showIcon:!0,closable:!0,afterClose:()=>R(""),style:{marginBottom:"24px"}})}):null,e.jsx(_,{span:24,children:e.jsx(N.Item,{label:n("Docs layout"),name:"archive_docs_layout",htmlFor:null,children:e.jsx(qn.Group,{options:[{value:"masonry",label:n("Masonry")},{value:"grid",label:n("Grid")},{value:"list",label:n("List")}],disabled:m})})}),j.includes(["masonry","grid"],g==null?void 0:g.archive_docs_layout)?e.jsx(_,{span:24,children:e.jsx(N.Item,{label:n("Number of Columns"),name:"archive_number_of_columns",tooltip:n("Enter a value between 2 and 4. Default is 3."),children:e.jsx(_t,{min:2,max:4,style:{width:"100%"},disabled:m})})}):null,e.jsx(_,{span:24,children:e.jsx(N.Item,{label:n("Docs per page"),name:"archive_docs_per_page",children:e.jsx(_t,{min:1,max:20,style:{width:"100%"},disabled:m})})}),e.jsx(_,{span:24,children:e.jsx(N.Item,{label:n("Docs orderby"),name:"archive_docs_orderby",children:e.jsx(ge,{options:[{value:"default",label:n("Default")},{value:"ID",label:n("ID")},{value:"author",label:n("Author")},{value:"title",label:n("Title")},{value:"name",label:n("Slug")},{value:"date",label:n("Created date")},{value:"modified",label:n("Modified date")},{value:"parent",label:n("Parent")},{value:"rand",label:n("Random")},{value:"comment_count",label:n("Comment count")},{value:"none",label:n("None")}],style:{width:"100%"}})})}),j.includes(["default","rand","none"],g==null?void 0:g.archive_docs_orderby)?null:e.jsx(_,{span:24,children:e.jsx(N.Item,{label:n("Docs order"),name:"archive_docs_order",children:e.jsx(ge,{options:[{value:"ASC",label:n("Ascending")},{value:"DESC",label:n("descending")}],style:{width:"100%"}})})}),e.jsx(_,{span:24,children:e.jsxs(O,{children:[e.jsx($,{type:"primary",htmlType:"submit",loading:!1,disabled:E,children:n("Save Changes")}),e.jsx($,{htmlType:"button",onClick:u,disabled:E,children:n("Discard")})]})})]})})}const{Title:yr}=ae;function wr(){const[t,s]=a.useState(!1);return e.jsx(G,{justify:"space-around",children:e.jsxs(_,{span:24,style:{maxWidth:"960px"},children:[e.jsxs(G,{gutter:16,justify:"space-between",align:"middle",style:{paddingBottom:"8px",marginBottom:"8px"},children:[e.jsx(_,{style:{paddingBottom:"8px"},children:e.jsx(yr,{level:5,style:{fontSize:"18px",margin:0},children:n("Archive")})}),e.jsx(_,{style:{paddingBottom:"8px"},children:e.jsxs(O,{children:[e.jsx(te,{title:e.jsxs(O,{align:"center",children:[e.jsx(Ie,{}),e.jsx("span",{children:n("Learn more")})]}),children:e.jsx($,{icon:e.jsx(Ie,{}),href:"https://supportgenix.com",target:"_blank"})}),e.jsx(te,{title:e.jsxs(O,{align:"center",children:[e.jsx(Fe,{}),e.jsx("span",{children:n("Documentation")})]}),children:e.jsx($,{icon:e.jsx(Fe,{}),href:"https://supportgenix.com/docs/",target:"_blank"})})]})})]}),e.jsx(G,{children:e.jsx(_,{span:24,children:e.jsx(Re,{size:"small",styles:{header:{background:"#fafafa",fontWeight:500},body:{padding:"20px 24px 24px 24px"}},children:e.jsx(ct,{spinning:t,style:{maxHeight:"unset"},children:e.jsx(_r,{setIsLoading:s})})})})})]})})}const{Text:Is}=ae;function Sr({setIsLoading:t}){const s=[],i=[],l={base_type:"archive",term_layout:"masonry",term_number_of_columns:3,term_orderby:"default",term_order:"DESC",term_number_of_docs:5,term_docs_orderby:"default",term_docs_order:"DESC",term_title_link:!0,term_docs_count:!0,term_docs_count_text:n("Docs"),term_docs_count_text_singular:n("Doc"),term_view_all_docs_btn:!0,term_view_all_docs_btn_text:n("View All"),header_title:"",header_subtitle:""},c=_e(),[r]=N.useForm(),[f,x]=a.useState(null),[g,y]=a.useState(null),[m,A]=a.useState(!0),[E,D]=a.useState(!0),[v,R]=a.useState(""),[p,F]=we(),z=he({action:"knowledge_base_config_design_base_data"}),k=(o,w)=>{w=f?{...f,...w}:w,w=j.mapValues(w,function(h){return j.isString(h)?j.trim(h):h});for(const h of s){const b=o==null?void 0:o[h];b&&j.includes(b,"*")&&(w[h]=f[h])}for(const h of i)(o==null?void 0:o[h])&&(w[h]=wt((o==null?void 0:o[h])||""));y(w||{}),A(!1);const d=j.pick(f,j.keys(w));j.isEqual(d,w)?D(!0):D(!1)},S=async o=>{var se,ue,U,Q,ne,I,J,H,ie,re,pe;o=f?{...f,...o}:o;const w=((se=o==null?void 0:o.base_type)==null?void 0:se.trim())||"archive",d=((ue=o==null?void 0:o.term_layout)==null?void 0:ue.trim())||"masonry",h=j.toInteger((o==null?void 0:o.term_number_of_columns)||0)||0,b=((U=o==null?void 0:o.term_orderby)==null?void 0:U.trim())||"",T=((Q=o==null?void 0:o.term_order)==null?void 0:Q.trim())||"",M=j.toInteger((o==null?void 0:o.term_number_of_docs)||0)||0,C=((ne=o==null?void 0:o.term_docs_orderby)==null?void 0:ne.trim())||"",P=((I=o==null?void 0:o.term_docs_order)==null?void 0:I.trim())||"",q=o!=null&&o.term_title_link?"Y":"N",B=o!=null&&o.term_docs_count?"Y":"N",W=((J=o==null?void 0:o.term_docs_count_text)==null?void 0:J.trim())||"",K=((H=o==null?void 0:o.term_docs_count_text_singular)==null?void 0:H.trim())||"",X=o!=null&&o.term_view_all_docs_btn?"Y":"N",Z=((ie=o==null?void 0:o.term_view_all_docs_btn_text)==null?void 0:ie.trim())||"",V=((re=o==null?void 0:o.header_title)==null?void 0:re.trim())||"",ee=((pe=o==null?void 0:o.header_subtitle)==null?void 0:pe.trim())||"";p({params:{action:"knowledge_base_config_design_base"},data:{base_type:w,term_layout:d,term_number_of_columns:h,term_orderby:b,term_order:T,term_number_of_docs:M,term_docs_orderby:C,term_docs_order:P,term_title_link:q,term_docs_count:B,term_docs_count_text:W,term_docs_count_text_singular:K,term_view_all_docs_btn:X,term_view_all_docs_btn_text:Z,header_title:V,header_subtitle:ee}})},u=()=>{r.setFieldsValue(f||{}),k(null,f)};return a.useEffect(()=>{r.setFieldsValue(f||{}),y(f||{}),A(!1),D(!0)},[f,r]),a.useEffect(()=>{var b,T;const{data:o,isFetching:w,isError:d,error:h}=z;t(w),!w&&d&&Y.error((T=(b=h==null?void 0:h.data)==null?void 0:b.errors)==null?void 0:T.message),!w&&!d&&o&&x((o==null?void 0:o.data)||{})},[z,t]),a.useEffect(()=>{var b,T,M,C;const{data:o,isLoading:w,isError:d,error:h}=F;c(w?Se():Ce()),!w&&d&&((T=(b=h==null?void 0:h.data)==null?void 0:b.errors)!=null&&T.message)&&Y.error((C=(M=h==null?void 0:h.data)==null?void 0:M.errors)==null?void 0:C.message),!w&&!d&&o&&o!=null&&o.msg&&(o!=null&&o.status?(R(""),Y.success(o==null?void 0:o.msg)):(R(o==null?void 0:o.msg),He()))},[F,c]),e.jsx(N,{form:r,name:"saveDesignBase",layout:"vertical",autoComplete:"off",onFinish:S,onValuesChange:k,initialValues:l,children:e.jsxs(G,{children:[v?e.jsx(_,{span:24,children:e.jsx(Ye,{message:v,type:"error",showIcon:!0,closable:!0,afterClose:()=>R(""),style:{marginBottom:"24px"}})}):null,e.jsx(_,{span:24,children:e.jsx(N.Item,{label:n("Base type"),name:"base_type",htmlFor:null,children:e.jsx(hn.Group,{options:[{value:"archive",label:n("Archive")},{value:"category",label:n("Category")}],disabled:m})})}),(g==null?void 0:g.base_type)==="category"?e.jsxs(e.Fragment,{children:[e.jsx(_,{span:24,children:e.jsx(N.Item,{label:n("Category layout"),name:"term_layout",htmlFor:null,children:e.jsx(hn.Group,{options:[{value:"masonry",label:n("Masonry")},{value:"grid",label:n("Grid")},{value:"list",label:n("List")}],disabled:m})})}),e.jsx(_,{span:24,children:e.jsx(Je,{style:{margin:"0 0 24px 0"}})}),j.includes(["masonry","grid"],g==null?void 0:g.term_layout)?e.jsx(_,{span:24,children:e.jsx(N.Item,{label:n("Number of Columns"),name:"term_number_of_columns",tooltip:n("Enter a value between 2 and 4. Default is 3."),children:e.jsx(_t,{min:2,max:4,style:{width:"100%"},disabled:m})})}):null,e.jsx(_,{span:24,children:e.jsx(N.Item,{label:n("Category orderby"),name:"term_orderby",children:e.jsx(ge,{options:[{value:"default",label:n("%s (recommanded)",n("Default"))},{value:"term_id",label:n("ID")},{value:"name",label:n("Title")},{value:"slug",label:n("Slug")},{value:"term_group",label:n("Term group")},{value:"parent",label:n("Parent")},{value:"count",label:n("Count")},{value:"none",label:n("None")}],style:{width:"100%"}})})}),j.includes(["default","none"],g==null?void 0:g.term_orderby)?null:e.jsx(_,{span:24,children:e.jsx(N.Item,{label:n("Category order"),name:"term_order",children:e.jsx(ge,{options:[{value:"ASC",label:n("Ascending")},{value:"DESC",label:n("descending")}],style:{width:"100%"}})})}),e.jsx(_,{span:24,children:e.jsx(Je,{style:{margin:"0 0 24px 0"}})}),e.jsx(_,{span:24,children:e.jsx(N.Item,{label:n("Number of Maxium Docs"),name:"term_number_of_docs",tooltip:n("Enter a value between 1 and 20. Default is 5."),children:e.jsx(_t,{min:1,max:20,style:{width:"100%"},disabled:m})})}),e.jsx(_,{span:24,children:e.jsx(N.Item,{label:n("Docs orderby"),name:"term_docs_orderby",children:e.jsx(ge,{options:[{value:"default",label:n("%s (recommanded)",n("Default"))},{value:"ID",label:n("ID")},{value:"author",label:n("Author")},{value:"title",label:n("Title")},{value:"name",label:n("Slug")},{value:"date",label:n("Created date")},{value:"modified",label:n("Modified date")},{value:"parent",label:n("Parent")},{value:"rand",label:n("Random")},{value:"comment_count",label:n("Comment count")},{value:"none",label:n("None")}],style:{width:"100%"}})})}),j.includes(["default","rand","none"],g==null?void 0:g.term_docs_orderby)?null:e.jsx(_,{span:24,children:e.jsx(N.Item,{label:n("Docs order"),name:"term_docs_order",children:e.jsx(ge,{options:[{value:"ASC",label:n("Ascending")},{value:"DESC",label:n("descending")}],style:{width:"100%"}})})}),e.jsx(_,{span:24,children:e.jsx(Je,{style:{margin:"0 0 24px 0"}})}),e.jsx(_,{span:24,children:e.jsxs(O,{align:"center",style:{marginBottom:"24px"},children:[e.jsx(N.Item,{name:"term_title_link",valuePropName:"checked",style:{marginBottom:0},children:e.jsx(Ae,{size:"small",disabled:m})}),e.jsx(Is,{onClick:()=>{m||(r.setFieldValue("term_title_link",!(g!=null&&g.term_title_link)),k(null,r.getFieldsValue()))},style:{cursor:m?"not-allowed":"pointer"},disabled:m,children:n("Category title link.")})]})}),e.jsx(_,{span:24,children:e.jsx(Je,{style:{margin:"0 0 24px 0"}})}),e.jsx(_,{span:24,children:e.jsxs(O,{align:"center",style:{marginBottom:"24px"},children:[e.jsx(N.Item,{name:"term_docs_count",valuePropName:"checked",style:{marginBottom:0},children:e.jsx(Ae,{size:"small",disabled:m})}),e.jsx(Is,{onClick:()=>{m||(r.setFieldValue("term_docs_count",!(g!=null&&g.term_docs_count)),k(null,r.getFieldsValue()))},style:{cursor:m?"not-allowed":"pointer"},disabled:m,children:n("Show docs count.")})]})}),g!=null&&g.term_docs_count?e.jsxs(e.Fragment,{children:[e.jsx(_,{span:24,children:e.jsx(N.Item,{label:n("Docs count text"),name:"term_docs_count_text",rules:[{whitespace:!0}],help:m?"":void 0,children:e.jsx(de,{disabled:m})})}),e.jsx(_,{span:24,children:e.jsx(N.Item,{label:n("Docs count singular"),name:"term_docs_count_text_singular",rules:[{whitespace:!0}],help:m?"":void 0,children:e.jsx(de,{disabled:m})})})]}):null,e.jsx(_,{span:24,children:e.jsx(Je,{style:{margin:"0 0 24px 0"}})}),e.jsx(_,{span:24,children:e.jsxs(O,{align:"center",style:{marginBottom:"24px"},children:[e.jsx(N.Item,{name:"term_view_all_docs_btn",valuePropName:"checked",style:{marginBottom:0},children:e.jsx(Ae,{size:"small",disabled:m})}),e.jsx(Is,{onClick:()=>{m||(r.setFieldValue("term_view_all_docs_btn",!(g!=null&&g.term_view_all_docs_btn)),k(null,r.getFieldsValue()))},style:{cursor:m?"not-allowed":"pointer"},disabled:m,children:n("View all docs button.")})]})}),g!=null&&g.term_view_all_docs_btn?e.jsx(_,{span:24,children:e.jsx(N.Item,{label:n("View all docs button text"),name:"term_view_all_docs_btn_text",rules:[{whitespace:!0}],help:m?"":void 0,children:e.jsx(de,{disabled:m})})}):null]}):null,e.jsx(_,{span:24,children:e.jsx(Je,{style:{margin:"0 0 24px 0"}})}),e.jsx(_,{span:24,children:e.jsx(N.Item,{label:n("Header Title"),name:"header_title",rules:[{required:!1,whitespace:!0}],children:e.jsx(de,{})})}),e.jsx(_,{span:24,children:e.jsx(N.Item,{label:n("Header Subtitle"),name:"header_subtitle",rules:[{required:!1,whitespace:!0}],children:e.jsx(de,{})})}),e.jsx(_,{span:24,children:e.jsxs(O,{children:[e.jsx($,{type:"primary",htmlType:"submit",loading:!1,disabled:E,children:n("Save Changes")}),e.jsx($,{htmlType:"button",onClick:u,disabled:E,children:n("Discard")})]})})]})})}const{Title:Cr}=ae;function kr(){const[t,s]=a.useState(!1);return e.jsx(G,{justify:"space-around",children:e.jsxs(_,{span:24,style:{maxWidth:"960px"},children:[e.jsxs(G,{gutter:16,justify:"space-between",align:"middle",style:{paddingBottom:"8px",marginBottom:"8px"},children:[e.jsx(_,{style:{paddingBottom:"8px"},children:e.jsx(Cr,{level:5,style:{fontSize:"18px",margin:0},children:n("Base")})}),e.jsx(_,{style:{paddingBottom:"8px"},children:e.jsxs(O,{children:[e.jsx(te,{title:e.jsxs(O,{align:"center",children:[e.jsx(Ie,{}),e.jsx("span",{children:n("Learn more")})]}),children:e.jsx($,{icon:e.jsx(Ie,{}),href:"https://supportgenix.com",target:"_blank"})}),e.jsx(te,{title:e.jsxs(O,{align:"center",children:[e.jsx(Fe,{}),e.jsx("span",{children:n("Documentation")})]}),children:e.jsx($,{icon:e.jsx(Fe,{}),href:"https://supportgenix.com/docs/",target:"_blank"})})]})})]}),e.jsx(G,{children:e.jsx(_,{span:24,children:e.jsx(Re,{size:"small",styles:{header:{background:"#fafafa",fontWeight:500},body:{padding:"20px 24px 24px 24px"}},children:e.jsx(ct,{spinning:t,style:{maxHeight:"unset"},children:e.jsx(Sr,{setIsLoading:s})})})})})]})})}const{Text:St}=ae;function vr({setIsLoading:t}){const s=[],i=[],l={single_doc_breadcrumb:!0,single_doc_title:!0,single_doc_tags:!0,single_doc_thumbnail:!0,single_doc_reaction:!0,single_doc_modified_date:!0,single_doc_comment:!0},c=_e(),[r]=N.useForm(),[f,x]=a.useState(null),[g,y]=a.useState(null),[m,A]=a.useState(!0),[E,D]=a.useState(!0),[v,R]=a.useState(""),[p,F]=we(),z=he({action:"knowledge_base_config_design_single_data"}),k=(o,w)=>{w=j.mapValues(w,function(h){return j.isString(h)?j.trim(h):h});for(const h of s){const b=o==null?void 0:o[h];b&&j.includes(b,"*")&&(w[h]=f[h])}for(const h of i)(o==null?void 0:o[h])&&(w[h]=wt((o==null?void 0:o[h])||""));y(w||{}),A(!1);const d=j.pick(f,j.keys(w));j.isEqual(d,w)?D(!0):D(!1)},S=async o=>{const w=o!=null&&o.single_doc_breadcrumb?"Y":"N",d=o!=null&&o.single_doc_title?"Y":"N",h=o!=null&&o.single_doc_tags?"Y":"N",b=o!=null&&o.single_doc_thumbnail?"Y":"N",T=o!=null&&o.single_doc_reaction?"Y":"N",M=o!=null&&o.single_doc_modified_date?"Y":"N",C=o!=null&&o.single_doc_comment?"Y":"N";p({params:{action:"knowledge_base_config_design_single"},data:{single_doc_breadcrumb:w,single_doc_title:d,single_doc_tags:h,single_doc_thumbnail:b,single_doc_reaction:T,single_doc_modified_date:M,single_doc_comment:C}})},u=()=>{r.setFieldsValue(f||{}),k(null,f)};return a.useEffect(()=>{r.setFieldsValue(f||{}),y(f||{}),A(!1),D(!0)},[f,r]),a.useEffect(()=>{var b,T;const{data:o,isFetching:w,isError:d,error:h}=z;t(w),!w&&d&&Y.error((T=(b=h==null?void 0:h.data)==null?void 0:b.errors)==null?void 0:T.message),!w&&!d&&o&&x((o==null?void 0:o.data)||{})},[z,t]),a.useEffect(()=>{var b,T,M,C;const{data:o,isLoading:w,isError:d,error:h}=F;c(w?Se():Ce()),!w&&d&&((T=(b=h==null?void 0:h.data)==null?void 0:b.errors)!=null&&T.message)&&Y.error((C=(M=h==null?void 0:h.data)==null?void 0:M.errors)==null?void 0:C.message),!w&&!d&&o&&o!=null&&o.msg&&(o!=null&&o.status?(R(""),Y.success(o==null?void 0:o.msg)):(R(o==null?void 0:o.msg),He()))},[F,c]),e.jsx(N,{form:r,name:"saveDesignSingle",layout:"vertical",autoComplete:"off",onFinish:S,onValuesChange:k,initialValues:l,children:e.jsxs(G,{children:[v?e.jsx(_,{span:24,children:e.jsx(Ye,{message:v,type:"error",showIcon:!0,closable:!0,afterClose:()=>R(""),style:{marginBottom:"24px"}})}):null,e.jsx(_,{span:24,children:e.jsxs(O,{align:"center",style:{marginBottom:"24px"},children:[e.jsx(N.Item,{name:"single_doc_breadcrumb",valuePropName:"checked",style:{marginBottom:0},children:e.jsx(Ae,{size:"small",disabled:m})}),e.jsx(St,{onClick:()=>{m||(r.setFieldValue("single_doc_breadcrumb",!(g!=null&&g.single_doc_breadcrumb)),k(null,r.getFieldsValue()))},style:{cursor:m?"not-allowed":"pointer"},disabled:m,children:n("Breadcrumb.")})]})}),e.jsx(_,{span:24,children:e.jsxs(O,{align:"center",style:{marginBottom:"24px"},children:[e.jsx(N.Item,{name:"single_doc_title",valuePropName:"checked",style:{marginBottom:0},children:e.jsx(Ae,{size:"small",disabled:m})}),e.jsx(St,{onClick:()=>{m||(r.setFieldValue("single_doc_title",!(g!=null&&g.single_doc_title)),k(null,r.getFieldsValue()))},style:{cursor:m?"not-allowed":"pointer"},disabled:m,children:n("Doc title.")})]})}),e.jsx(_,{span:24,children:e.jsxs(O,{align:"center",style:{marginBottom:"24px"},children:[e.jsx(N.Item,{name:"single_doc_tags",valuePropName:"checked",style:{marginBottom:0},children:e.jsx(Ae,{size:"small",disabled:m})}),e.jsx(St,{onClick:()=>{m||(r.setFieldValue("single_doc_tags",!(g!=null&&g.single_doc_tags)),k(null,r.getFieldsValue()))},style:{cursor:m?"not-allowed":"pointer"},disabled:m,children:n("Tags.")})]})}),e.jsx(_,{span:24,children:e.jsxs(O,{align:"center",style:{marginBottom:"24px"},children:[e.jsx(N.Item,{name:"single_doc_thumbnail",valuePropName:"checked",style:{marginBottom:0},children:e.jsx(Ae,{size:"small",disabled:m})}),e.jsx(St,{onClick:()=>{m||(r.setFieldValue("single_doc_thumbnail",!(g!=null&&g.single_doc_thumbnail)),k(null,r.getFieldsValue()))},style:{cursor:m?"not-allowed":"pointer"},disabled:m,children:n("Thumbnail.")})]})}),e.jsx(_,{span:24,children:e.jsxs(O,{align:"center",style:{marginBottom:"24px"},children:[e.jsx(N.Item,{name:"single_doc_reaction",valuePropName:"checked",style:{marginBottom:0},children:e.jsx(Ae,{size:"small",disabled:m})}),e.jsx(St,{onClick:()=>{m||(r.setFieldValue("single_doc_reaction",!(g!=null&&g.single_doc_reaction)),k(null,r.getFieldsValue()))},style:{cursor:m?"not-allowed":"pointer"},disabled:m,children:n("Reaction.")})]})}),e.jsx(_,{span:24,children:e.jsxs(O,{align:"center",style:{marginBottom:"24px"},children:[e.jsx(N.Item,{name:"single_doc_modified_date",valuePropName:"checked",style:{marginBottom:0},children:e.jsx(Ae,{size:"small",disabled:m})}),e.jsx(St,{onClick:()=>{m||(r.setFieldValue("single_doc_modified_date",!(g!=null&&g.single_doc_modified_date)),k(null,r.getFieldsValue()))},style:{cursor:m?"not-allowed":"pointer"},disabled:m,children:n("Modified date.")})]})}),e.jsx(_,{span:24,children:e.jsxs(O,{align:"center",style:{marginBottom:"24px"},children:[e.jsx(N.Item,{name:"single_doc_comment",valuePropName:"checked",style:{marginBottom:0},children:e.jsx(Ae,{size:"small",disabled:m})}),e.jsx(St,{onClick:()=>{m||(r.setFieldValue("single_doc_comment",!(g!=null&&g.single_doc_comment)),k(null,r.getFieldsValue()))},style:{cursor:m?"not-allowed":"pointer"},disabled:m,children:n("Comment.")})]})}),e.jsx(_,{span:24,children:e.jsxs(O,{children:[e.jsx($,{type:"primary",htmlType:"submit",loading:!1,disabled:E,children:n("Save Changes")}),e.jsx($,{htmlType:"button",onClick:u,disabled:E,children:n("Discard")})]})})]})})}const{Title:Tr}=ae;function Er(){const[t,s]=a.useState(!1);return e.jsx(G,{justify:"space-around",children:e.jsxs(_,{span:24,style:{maxWidth:"960px"},children:[e.jsxs(G,{gutter:16,justify:"space-between",align:"middle",style:{paddingBottom:"8px",marginBottom:"8px"},children:[e.jsx(_,{style:{paddingBottom:"8px"},children:e.jsx(Tr,{level:5,style:{fontSize:"18px",margin:0},children:n("Single")})}),e.jsx(_,{style:{paddingBottom:"8px"},children:e.jsxs(O,{children:[e.jsx(te,{title:e.jsxs(O,{align:"center",children:[e.jsx(Ie,{}),e.jsx("span",{children:n("Learn more")})]}),children:e.jsx($,{icon:e.jsx(Ie,{}),href:"https://supportgenix.com",target:"_blank"})}),e.jsx(te,{title:e.jsxs(O,{align:"center",children:[e.jsx(Fe,{}),e.jsx("span",{children:n("Documentation")})]}),children:e.jsx($,{icon:e.jsx(Fe,{}),href:"https://supportgenix.com/docs/",target:"_blank"})})]})})]}),e.jsx(G,{children:e.jsx(_,{span:24,children:e.jsx(Re,{size:"small",styles:{header:{background:"#fafafa",fontWeight:500},body:{padding:"20px 24px 24px 24px"}},children:e.jsx(ct,{spinning:t,style:{maxHeight:"unset"},children:e.jsx(vr,{setIsLoading:s})})})})})]})})}function Dr({setIsLoading:t}){const s=[],i=[],l=[],c={},r=_e(),[f]=N.useForm(),[x,g]=a.useState(null),[y,m]=a.useState(!0),[A,E]=a.useState(!0),[D,v]=a.useState(""),[R,p]=we(),F=he({action:"knowledge_base_config_design_style_data"}),z=(u,o)=>{o=j.mapValues(o,function(d,h){return j.includes(s,h)&&(typeof d=="object"&&(d=d.toHexString()),d=j.toLower(d)),j.isString(d)?j.trim(d):d});for(const d of i){const h=u==null?void 0:u[d];h&&j.includes(h,"*")&&(o[d]=x[d])}for(const d of l)(u==null?void 0:u[d])&&(o[d]=wt((u==null?void 0:u[d])||""));m(!1);const w=j.pick(x,j.keys(o));j.isEqual(w,o)?E(!0):E(!1)},k=async u=>{var w;u=j.mapValues(u,function(d,h){return j.includes(s,h)&&(typeof d=="object"&&(d=d.toHexString()),d=j.toLower(d)),d});const o=((w=u==null?void 0:u.style_custom_css)==null?void 0:w.trim())||"";R({params:{action:"knowledge_base_config_design_style"},data:{style_custom_css:o}})},S=()=>{f.setFieldsValue(x||{}),z(null,x)};return a.useEffect(()=>{f.setFieldsValue(x||{}),m(!1),E(!0)},[x,f]),a.useEffect(()=>{var h,b;const{data:u,isFetching:o,isError:w,error:d}=F;t(o),!o&&w&&Y.error((b=(h=d==null?void 0:d.data)==null?void 0:h.errors)==null?void 0:b.message),!o&&!w&&u&&g((u==null?void 0:u.data)||{})},[F,t]),a.useEffect(()=>{var h,b,T,M;const{data:u,isLoading:o,isError:w,error:d}=p;r(o?Se():Ce()),!o&&w&&((b=(h=d==null?void 0:d.data)==null?void 0:h.errors)!=null&&b.message)&&Y.error((M=(T=d==null?void 0:d.data)==null?void 0:T.errors)==null?void 0:M.message),!o&&!w&&u&&u!=null&&u.msg&&(u!=null&&u.status?(v(""),Y.success(u==null?void 0:u.msg)):(v(u==null?void 0:u.msg),He()))},[p,r]),e.jsx(N,{form:f,name:"saveDesignStyle",layout:"vertical",autoComplete:"off",onFinish:k,onValuesChange:z,initialValues:c,children:e.jsxs(G,{children:[D?e.jsx(_,{span:24,children:e.jsx(Ye,{message:D,type:"error",showIcon:!0,closable:!0,afterClose:()=>v(""),style:{marginBottom:"24px"}})}):null,e.jsx(_,{span:24,children:e.jsx(N.Item,{label:n("Custom CSS"),name:"style_custom_css",htmlFor:null,help:y?"":void 0,children:e.jsx(Mi,{height:"200px",extensions:[Oi()]})})}),e.jsx(_,{span:24,children:e.jsxs(O,{children:[e.jsx($,{type:"primary",htmlType:"submit",loading:!1,disabled:A,children:n("Save Changes")}),e.jsx($,{htmlType:"button",onClick:S,disabled:A,children:n("Discard")})]})})]})})}const{Title:Ir}=ae;function Fr(){const[t,s]=a.useState(!1);return e.jsx(G,{justify:"space-around",children:e.jsxs(_,{span:24,style:{maxWidth:"960px"},children:[e.jsxs(G,{gutter:16,justify:"space-between",align:"middle",style:{paddingBottom:"8px",marginBottom:"8px"},children:[e.jsx(_,{style:{paddingBottom:"8px"},children:e.jsx(Ir,{level:5,style:{fontSize:"18px",margin:0},children:n("Style")})}),e.jsx(_,{style:{paddingBottom:"8px"},children:e.jsxs(O,{children:[e.jsx(te,{title:e.jsxs(O,{align:"center",children:[e.jsx(Ie,{}),e.jsx("span",{children:n("Learn more")})]}),children:e.jsx($,{icon:e.jsx(Ie,{}),href:"https://supportgenix.com",target:"_blank"})}),e.jsx(te,{title:e.jsxs(O,{align:"center",children:[e.jsx(Fe,{}),e.jsx("span",{children:n("Documentation")})]}),children:e.jsx($,{icon:e.jsx(Fe,{}),href:"https://supportgenix.com/docs/",target:"_blank"})})]})})]}),e.jsx(G,{children:e.jsx(_,{span:24,children:e.jsx(Re,{size:"small",styles:{header:{background:"#fafafa",fontWeight:500},body:{padding:"20px 24px 24px 24px"}},children:e.jsx(ct,{spinning:t,style:{maxHeight:"unset"},children:e.jsx(Dr,{setIsLoading:s})})})})})]})})}function Ar(){const t=Ct(),[s,i]=a.useState([]),l=it(t,"docs/config/design",["base"]),c=()=>{const r=s||l||[];if(r!=null&&r.includes("base"))return e.jsx(kr,{});if(r!=null&&r.includes("archive"))return e.jsx(wr,{});if(r!=null&&r.includes("single"))return e.jsx(Er,{});if(r!=null&&r.includes("style"))return e.jsx(Fr,{})};return a.useEffect(()=>{i(it(t,"docs/config/design",["base"]))},[t]),c()}const{Text:es}=ae;var Mn;const Rr=((Mn=window==null?void 0:window.support_genix_config)==null?void 0:Mn.home_url)||"/";function Br({setIsLoading:t}){const s=[],i=[],l={docs_archive:!1,docs_base_slug:"sgkb-docs",docs_single_slug:"sgkb-docs",category_base:"sgkb-docs-category",tag_base:"sgkb-docs-tag"},c=_e(),[r]=N.useForm(),[f,x]=a.useState(null),[g,y]=a.useState(null),[m,A]=a.useState(!0),[E,D]=a.useState(!0),[v,R]=a.useState(""),[p,F]=we(),z=he({action:"knowledge_base_config_data"}),k=(d,h)=>{h=j.mapValues(h,function(T){return j.isString(T)?j.trim(T):T});for(const T of s){const M=d==null?void 0:d[T];M&&j.includes(M,"*")&&(h[T]=f[T])}for(const T of i)(d==null?void 0:d[T])&&(h[T]=wt((d==null?void 0:d[T])||""));y(h||{}),A(!1);const b=j.pick(f,j.keys(h));j.isEqual(b,h)?D(!0):D(!1)},S=async d=>{var P,q,B,W;const h=d!=null&&d.docs_archive?"Y":"N",b=((P=d==null?void 0:d.docs_base_slug)==null?void 0:P.trim())||"",T=((q=d==null?void 0:d.docs_single_slug)==null?void 0:q.trim())||"",M=((B=d==null?void 0:d.category_base)==null?void 0:B.trim())||"",C=((W=d==null?void 0:d.tag_base)==null?void 0:W.trim())||"";p({params:{action:"knowledge_base_config"},data:{docs_archive:h,docs_base_slug:b,docs_single_slug:T,category_base:M,tag_base:C}})},u=()=>{r.setFieldsValue(f||{}),k(null,f)},o=d=>{let h=((g==null?void 0:g.docs_single_slug)||"").trim();const b=`/${d}/`;h.includes(d)?h=h.replace(d,"/"):h=h+b,h=h.replace(/\/+/g,"/").trim(),h==="/"&&(h=""),r.setFieldValue("docs_single_slug",h),k({docs_single_slug:h},r.getFieldsValue())},w=d=>{let h=j.trim((g==null?void 0:g.docs_single_slug)||"");return j.includes(h,d)?"#d9d9d9":"transparent"};return a.useEffect(()=>{r.setFieldsValue(f||{}),y(f||{}),A(!1),D(!0)},[f,r]),a.useEffect(()=>{var M,C;const{data:d,isFetching:h,isError:b,error:T}=z;t(h),!h&&b&&Y.error((C=(M=T==null?void 0:T.data)==null?void 0:M.errors)==null?void 0:C.message),!h&&!b&&d&&x((d==null?void 0:d.data)||{})},[z,t]),a.useEffect(()=>{var M,C,P,q;const{data:d,isLoading:h,isError:b,error:T}=F;c(h?Se():Ce()),!h&&b&&((C=(M=T==null?void 0:T.data)==null?void 0:M.errors)!=null&&C.message)&&Y.error((q=(P=T==null?void 0:T.data)==null?void 0:P.errors)==null?void 0:q.message),!h&&!b&&d&&d!=null&&d.msg&&(d!=null&&d.status?(R(""),Y.success(d==null?void 0:d.msg)):(R(d==null?void 0:d.msg),He()))},[F,c]),e.jsx(N,{form:r,name:"saveDocsGeneral",layout:"vertical",autoComplete:"off",onFinish:S,onValuesChange:k,initialValues:l,children:e.jsxs(G,{children:[v?e.jsx(_,{span:24,children:e.jsx(Ye,{message:v,type:"error",showIcon:!0,closable:!0,afterClose:()=>R(""),style:{marginBottom:"24px"}})}):null,e.jsx(_,{span:24,children:e.jsxs(O,{align:"center",style:{marginBottom:"24px"},children:[e.jsx(N.Item,{name:"docs_archive",valuePropName:"checked",style:{marginBottom:0},children:e.jsx(Ae,{size:"small",disabled:m})}),e.jsx(es,{onClick:()=>{m||(r.setFieldValue("docs_archive",!(g!=null&&g.docs_archive)),k(null,r.getFieldsValue()))},style:{cursor:m?"not-allowed":"pointer"},disabled:m,children:n("Enable Docs Archive.")})]})}),e.jsx(_,{span:24,children:e.jsxs(O,{direction:"vertical",style:{width:"100%",marginBottom:"24px"},children:[e.jsx(N.Item,{label:n("Docs Archive Slug"),name:"docs_base_slug",rules:[{required:!1,whitespace:!0}],style:{marginBottom:0},children:e.jsx(de,{disabled:!(g!=null&&g.docs_archive)})}),f!=null&&f.docs_archive&&(f!=null&&f.docs_base_slug)?e.jsxs(oe,{align:"center",gap:"4px 8px",wrap:!0,children:[e.jsx(es,{style:{color:"rgba(0, 0, 0, 0.45)"},children:n("Visit:")}),e.jsx("a",{target:"_blank",href:`${j.trimEnd(Rr,"/")}/${j.trimEnd(f==null?void 0:f.docs_base_slug,"/")}/`,children:e.jsx(es,{style:{color:"rgba(0, 0, 0, 0.45)",textDecoration:"underline"},children:n("Docs Archive")})})]}):null]})}),e.jsx(_,{span:24,children:e.jsxs(O,{direction:"vertical",style:{width:"100%",marginBottom:"24px"},children:[e.jsx(N.Item,{label:n("Docs Single Slug"),name:"docs_single_slug",rules:[{required:!1,whitespace:!0}],style:{marginBottom:0},children:e.jsx(de,{})}),e.jsxs(oe,{align:"center",gap:"4px 8px",wrap:!0,children:[e.jsx(es,{style:{color:"rgba(0, 0, 0, 0.45)"},children:n("Available tags:")}),e.jsx(Me,{onClick:()=>o("%category%"),style:{background:w("%category%"),cursor:"pointer",margin:0},children:"%category%"}),e.jsx(Me,{onClick:()=>o("%author%"),style:{background:w("%author%"),cursor:"pointer",margin:0},children:"%author%"})]})]})}),e.jsx(_,{span:24,children:e.jsx(N.Item,{label:n("Category Base"),name:"category_base",rules:[{required:!1,whitespace:!0}],children:e.jsx(de,{})})}),e.jsx(_,{span:24,children:e.jsx(N.Item,{label:n("Tag Base"),name:"tag_base",rules:[{required:!1,whitespace:!0}],children:e.jsx(de,{})})}),e.jsx(_,{span:24,children:e.jsxs(O,{children:[e.jsx($,{type:"primary",htmlType:"submit",loading:!1,disabled:E,children:n("Save Changes")}),e.jsx($,{htmlType:"button",onClick:u,disabled:E,children:n("Discard")})]})})]})})}const{Title:zr}=ae;function Lr(){const[t,s]=a.useState(!1);return e.jsx(G,{justify:"space-around",children:e.jsxs(_,{span:24,style:{maxWidth:"960px"},children:[e.jsxs(G,{gutter:16,justify:"space-between",align:"middle",style:{paddingBottom:"8px",marginBottom:"8px"},children:[e.jsx(_,{style:{paddingBottom:"8px"},children:e.jsx(zr,{level:5,style:{fontSize:"18px",margin:0},children:n("General")})}),e.jsx(_,{style:{paddingBottom:"8px"},children:e.jsxs(O,{children:[e.jsx(te,{title:e.jsxs(O,{align:"center",children:[e.jsx(Ie,{}),e.jsx("span",{children:n("Learn more")})]}),children:e.jsx($,{icon:e.jsx(Ie,{}),href:"https://supportgenix.com",target:"_blank"})}),e.jsx(te,{title:e.jsxs(O,{align:"center",children:[e.jsx(Fe,{}),e.jsx("span",{children:n("Documentation")})]}),children:e.jsx($,{icon:e.jsx(Fe,{}),href:"https://supportgenix.com/docs/",target:"_blank"})})]})})]}),e.jsx(G,{children:e.jsx(_,{span:24,children:e.jsx(Re,{size:"small",styles:{header:{background:"#fafafa",fontWeight:500},body:{padding:"20px 24px 24px 24px"}},children:e.jsx(ct,{spinning:t,style:{maxHeight:"unset"},children:e.jsx(Br,{setIsLoading:s})})})})})]})})}function Mr({setIsLoading:t}){const s=[],i=[],l={write_docs_roles_arr:["administrator"],access_analytics_roles_arr:["administrator"],access_config_roles_arr:["administrator"],track_analytics_for:"everyone",track_analytics_roles_arr:["0"]},c=_e(),[r]=N.useForm(),[f,x]=a.useState(null),[g,y]=a.useState(null),[m,A]=a.useState(!0),[E,D]=a.useState(!0),[v,R]=a.useState(""),[p,F]=a.useState([]),[z,k]=a.useState([]),[S,u]=a.useState(!0),[o,w]=a.useState(!0),[d,h]=we(),b=he({action:"knowledge_base_config_permissions_data"}),T=cn({action:"knowledge_base_edit_posts_role_for_select"}),M=cn({action:"knowledge_base_role_for_select",select_all:!0}),C=(B,W)=>{var X;W=j.mapValues(W,function(Z){return j.isString(Z)?j.trim(Z):Z});for(const Z of s){const V=B==null?void 0:B[Z];V&&j.includes(V,"*")&&(W[Z]=f[Z])}for(const Z of i)(B==null?void 0:B[Z])&&(W[Z]=wt((B==null?void 0:B[Z])||""));j.has(B,"write_docs_roles_arr")&&(j.includes(B==null?void 0:B.write_docs_roles_arr,"administrator")||(r.setFieldValue("write_docs_roles_arr",["administrator",...B.write_docs_roles_arr]),W.write_docs_roles_arr=r.getFieldValue("write_docs_roles_arr"))),j.has(B,"access_analytics_roles_arr")&&(j.includes(B==null?void 0:B.access_analytics_roles_arr,"administrator")||(r.setFieldValue("access_analytics_roles_arr",["administrator",...B.access_analytics_roles_arr]),W.access_analytics_roles_arr=r.getFieldValue("access_analytics_roles_arr"))),j.has(B,"access_config_roles_arr")&&(j.includes(B==null?void 0:B.access_config_roles_arr,"administrator")||(r.setFieldValue("access_config_roles_arr",["administrator",...B.access_config_roles_arr]),W.access_config_roles_arr=r.getFieldValue("access_config_roles_arr"))),j.has(B,"track_analytics_roles_arr")&&((X=B==null?void 0:B.track_analytics_roles_arr)!=null&&X.length||(r.setFieldValue("track_analytics_roles_arr",["0"]),W.track_analytics_roles_arr=r.getFieldValue("track_analytics_roles_arr"))),y(W||{}),A(!1);const K=j.pick(f,j.keys(W));j.isEqual(K,W)?D(!0):D(!1)},P=async B=>{var ee;const W=(B==null?void 0:B.write_docs_roles_arr)||["administrator"],K=(B==null?void 0:B.access_analytics_roles_arr)||["administrator"],X=(B==null?void 0:B.access_config_roles_arr)||["administrator"],Z=((ee=B==null?void 0:B.track_analytics_for)==null?void 0:ee.trim())||"",V=(B==null?void 0:B.track_analytics_roles_arr)||["0"];d({params:{action:"knowledge_base_config_permissions"},data:{write_docs_roles_arr:W,access_analytics_roles_arr:K,access_config_roles_arr:X,track_analytics_for:Z,track_analytics_roles_arr:V}})},q=()=>{r.setFieldsValue(f||{}),C(null,f)};return a.useEffect(()=>{r.setFieldsValue(f||{}),y(f||{}),A(!1),D(!0)},[f,r]),a.useEffect(()=>{var Z,V,ee,se,ue,U;const{data:B,isFetching:W,isError:K,error:X}=b;if(t(W),!W&&K&&Y.error((V=(Z=X==null?void 0:X.data)==null?void 0:Z.errors)==null?void 0:V.message),!W&&!K&&B){const Q=j.clone((B==null?void 0:B.data)||{});Q.write_docs_roles_arr=((ee=Q==null?void 0:Q.write_docs_roles)==null?void 0:ee.split(","))||["administrator"],Q.access_analytics_roles_arr=((se=Q==null?void 0:Q.access_analytics_roles)==null?void 0:se.split(","))||["administrator"],Q.access_config_roles_arr=((ue=Q==null?void 0:Q.access_config_roles)==null?void 0:ue.split(","))||["administrator"],Q.track_analytics_roles_arr=((U=Q==null?void 0:Q.track_analytics_roles)==null?void 0:U.split(","))||["0"],x(Q||{})}},[b,t]),a.useEffect(()=>{var Z,V,ee,se;const{data:B,isFetching:W,isError:K,error:X}=T;u(W),!W&&K&&Y.error((V=(Z=X==null?void 0:X.data)==null?void 0:Z.errors)==null?void 0:V.message),!W&&!K&&B&&B!=null&&B.status&&(ee=B==null?void 0:B.data)!=null&&ee.result&&F((se=B==null?void 0:B.data)==null?void 0:se.result)},[T]),a.useEffect(()=>{var Z,V,ee,se;const{data:B,isFetching:W,isError:K,error:X}=M;w(W),!W&&K&&Y.error((V=(Z=X==null?void 0:X.data)==null?void 0:Z.errors)==null?void 0:V.message),!W&&!K&&B&&B!=null&&B.status&&(ee=B==null?void 0:B.data)!=null&&ee.result&&k((se=B==null?void 0:B.data)==null?void 0:se.result)},[M]),a.useEffect(()=>{var Z,V,ee,se;const{data:B,isLoading:W,isError:K,error:X}=h;c(W?Se():Ce()),!W&&K&&((V=(Z=X==null?void 0:X.data)==null?void 0:Z.errors)!=null&&V.message)&&Y.error((se=(ee=X==null?void 0:X.data)==null?void 0:ee.errors)==null?void 0:se.message),!W&&!K&&B&&B!=null&&B.msg&&(B!=null&&B.status?(R(""),Y.success(B==null?void 0:B.msg)):(R(B==null?void 0:B.msg),He()))},[h,c]),a.useEffect(()=>{!S&&!o&&t(!1)},[S,o,t]),e.jsx(N,{form:r,name:"saveDocsPermissions",layout:"vertical",autoComplete:"off",onFinish:P,onValuesChange:C,initialValues:l,children:e.jsxs(G,{children:[v?e.jsx(_,{span:24,children:e.jsx(Ye,{message:v,type:"error",showIcon:!0,closable:!0,afterClose:()=>R(""),style:{marginBottom:"24px"}})}):null,e.jsx(_,{span:24,children:e.jsx(N.Item,{label:n("Can Write Docs"),name:"write_docs_roles_arr",rules:[{required:!0,message:n("%s is required.",n("Can write docs"))}],children:e.jsx(ge,{allowClear:!0,mode:"multiple",options:p,disabled:m})})}),e.jsx(_,{span:24,children:e.jsx(N.Item,{label:n("Can Access Analytics"),name:"access_analytics_roles_arr",rules:[{required:!0,message:n("%s is required.",n("Can access analytics"))}],children:e.jsx(ge,{allowClear:!0,mode:"multiple",options:p,disabled:m})})}),e.jsx(_,{span:24,children:e.jsx(N.Item,{label:n("Can Access Configuration"),name:"access_config_roles_arr",rules:[{required:!0,message:n("%s is required.",n("Can access configuration"))}],children:e.jsx(ge,{allowClear:!0,mode:"multiple",options:p,disabled:m})})}),e.jsx(Je,{style:{margin:"0 0 24px 0"}}),e.jsx(_,{span:24,children:e.jsx(N.Item,{label:n("Track Analytics For"),name:"track_analytics_for",rules:[{required:!0,message:n("%s is required.",n("Track analytics for"))}],children:e.jsx(ge,{options:[{value:"everyone",label:n("Everyone")},{value:"guest",label:n("Guest users only")},{value:"logged_in",label:n("Logged-in users only")}],disabled:m})})}),(g==null?void 0:g.track_analytics_for)!=="guest"?e.jsx(_,{span:24,children:e.jsx(N.Item,{label:n("Track Analytics For Roles"),name:"track_analytics_roles_arr",rules:[{required:!0,message:n("%s is required.",n("Track analytics for roles"))}],children:e.jsx(ge,{allowClear:!0,mode:"multiple",options:z,onSelect:B=>{const W=r.getFieldValue("track_analytics_roles_arr"),K=B==="0"?["0"]:W==null?void 0:W.filter(X=>X!=="0");r.setFieldValue("track_analytics_roles_arr",K),C({track_analytics_roles_arr:K},r.getFieldsValue())},disabled:m})})}):null,e.jsx(_,{span:24,children:e.jsxs(O,{children:[e.jsx($,{type:"primary",htmlType:"submit",loading:!1,disabled:E,children:n("Save Changes")}),e.jsx($,{htmlType:"button",onClick:q,disabled:E,children:n("Discard")})]})})]})})}const{Title:Or}=ae;function Nr(){const[t,s]=a.useState(!1);return e.jsx(G,{justify:"space-around",children:e.jsxs(_,{span:24,style:{maxWidth:"960px"},children:[e.jsxs(G,{gutter:16,justify:"space-between",align:"middle",style:{paddingBottom:"8px",marginBottom:"8px"},children:[e.jsx(_,{style:{paddingBottom:"8px"},children:e.jsx(Or,{level:5,style:{fontSize:"18px",margin:0},children:n("Permissions")})}),e.jsx(_,{style:{paddingBottom:"8px"},children:e.jsxs(O,{children:[e.jsx(te,{title:e.jsxs(O,{align:"center",children:[e.jsx(Ie,{}),e.jsx("span",{children:n("Learn more")})]}),children:e.jsx($,{icon:e.jsx(Ie,{}),href:"https://supportgenix.com",target:"_blank"})}),e.jsx(te,{title:e.jsxs(O,{align:"center",children:[e.jsx(Fe,{}),e.jsx("span",{children:n("Documentation")})]}),children:e.jsx($,{icon:e.jsx(Fe,{}),href:"https://supportgenix.com/docs/",target:"_blank"})})]})})]}),e.jsx(G,{children:e.jsx(_,{span:24,children:e.jsx(Re,{size:"small",styles:{header:{background:"#fafafa",fontWeight:500},body:{padding:"20px 24px 24px 24px"}},children:e.jsx(ct,{spinning:t,style:{maxHeight:"unset"},children:e.jsx(Mr,{setIsLoading:s})})})})})]})})}const{Text:Pr}=ae,{TextArea:$r}=de;function Wr({data:t,isEdit:s,onCloseModal:i}){const l=["color"],c=t?{...t}:{},r=_e(),[f]=N.useForm(),[x,g]=a.useState(""),[y,m]=we(),A=E=>{var F,z,k,S;E=j.mapValues(E,function(u,o){return j.includes(l,o)&&(typeof u=="object"&&(u=u.toHexString()),u=j.toLower(u)),u});const D=((F=E==null?void 0:E.name)==null?void 0:F.trim())||"",v=((z=E==null?void 0:E.slug)==null?void 0:z.trim())||"",R=((k=E==null?void 0:E.description)==null?void 0:k.trim())||"",p=((S=E==null?void 0:E.color)==null?void 0:S.trim())||"";y({params:{action:s?"knowledge_base_tag_edit":"knowledge_base_tag_add",id:c==null?void 0:c.term_id},data:{title:D,slug:v,description:R,color:p}})};return a.useEffect(()=>{var p,F,z,k;const{data:E,isLoading:D,isError:v,error:R}=m;r(D?Se():Ce()),!D&&v&&((F=(p=R==null?void 0:R.data)==null?void 0:p.errors)!=null&&F.message)&&Y.error((k=(z=R==null?void 0:R.data)==null?void 0:z.errors)==null?void 0:k.message),!D&&!v&&E&&(E!=null&&E.msg&&(E!=null&&E.status?(g(""),Y.success(E==null?void 0:E.msg)):(g(E==null?void 0:E.msg),$n())),E!=null&&E.status&&i())},[m,i,r]),e.jsx(N,{form:f,name:"createDocsTag",layout:"vertical",onFinish:A,initialValues:c,autoComplete:"off",children:e.jsxs(G,{gutter:16,children:[x?e.jsx(_,{span:24,children:e.jsx(Ye,{message:x,type:"error",showIcon:!0,closable:!0,afterClose:()=>g(""),style:{marginBottom:"24px"}})}):null,e.jsx(_,{span:24,children:e.jsx(N.Item,{label:n("Title"),name:"name",rules:[{required:!0,message:n("%s is required.",n("Title")),whitespace:!0}],children:e.jsx(de,{})})}),e.jsx(_,{span:24,children:e.jsx(N.Item,{label:n("Slug"),name:"slug",rules:[{required:!1,whitespace:!0}],children:e.jsx(de,{})})}),e.jsx(_,{span:24,children:e.jsx(N.Item,{label:n("Description"),name:"description",rules:[{required:!1,whitespace:!0}],children:e.jsx($r,{rows:4})})}),e.jsx(_,{span:24,children:e.jsxs(O,{direction:"vertical",style:{width:"100%",marginBottom:"24px"},children:[e.jsx(Pr,{children:n("Color")}),e.jsxs(oe,{align:"center",gap:"4px 8px",wrap:!0,children:[e.jsx(N.Item,{name:"color",htmlFor:null,style:{marginBottom:0},children:e.jsx(Us,{showText:!0,disabledAlpha:!0})}),e.jsx(te,{title:n("Reset"),children:e.jsx($,{icon:e.jsx(vt,{}),onClick:()=>{f.setFieldValue("color","")}})})]})]})}),e.jsx(_,{span:24,style:{textAlign:"right"},children:e.jsxs(O,{children:[e.jsx($,{htmlType:"button",onClick:i,children:n("Cancel")}),e.jsx($,{type:"primary",htmlType:"submit",loading:m==null?void 0:m.isLoading,children:s?n("Update"):n("Create")})]})})]})})}const{Text:bn}=ae;function qr({data:t,total:s,limit:i,page:l,onPageChange:c,onSizeChange:r,rowSelection:f,bulkAction:x,setBulkAction:g,bulkActionIds:y,onEditClick:m,isLoading:A,resetBulkAction:E,sortOrder:D,handleSort:v}){const R=Qe(),p=_e(),[F,z]=we(),k=h=>{F({params:{action:"knowledge_base_tag_delete_item",id:h}})},S=()=>{let h="";x==="remove"&&(h="knowledge_base_tag_delete_items"),h&&F({params:{action:h,ids:y}})},u=(h,b,T,{action:M})=>{M==="sort"&&v(T)},o=h=>D===`${h}-asc`?"ascend":D===`${h}-desc`?"descend":null,w=[{title:n("ID"),dataIndex:"term_id",width:70,sorter:!0,sortDirections:["ascend","descend","ascend"],sortOrder:o("term_id")},{title:n("Title"),dataIndex:"name",sorter:!0,sortDirections:["ascend","descend","ascend"],sortOrder:o("name"),render:(h,b)=>e.jsxs(O,{direction:"vertical",children:[b!=null&&b.color?e.jsx(Gs,{color:b==null?void 0:b.color,text:h}):e.jsx(bn,{children:h}),R.xs||R.sm||R.md||R.lg?e.jsxs(e.Fragment,{children:[e.jsxs(oe,{gap:"0 8px",wrap:!0,children:[e.jsx(bn,{children:n("Count:")}),e.jsx(Me,{children:b==null?void 0:b.count})]}),R.xs?e.jsxs(O,{children:[e.jsx($,{type:"primary",icon:e.jsx(ls,{}),size:"small",ghost:!0,onClick:()=>m(b)}),e.jsx(De,{action:"remove",onConfirm:()=>k(b==null?void 0:b.term_id),children:e.jsx($,{type:"primary",icon:e.jsx(as,{}),size:"small",danger:!0,ghost:!0})})]}):null]}):null]})},{title:n("Count"),dataIndex:"count",render:h=>e.jsx(Me,{children:h}),responsive:["xl"]},{title:n("Action"),width:100,align:"right",render:h=>e.jsxs(O,{children:[e.jsx($,{type:"primary",icon:e.jsx(ls,{}),size:"small",ghost:!0,onClick:()=>m(h)}),e.jsx(De,{action:"remove",onConfirm:()=>k(h==null?void 0:h.term_id),children:e.jsx($,{type:"primary",icon:e.jsx(as,{}),size:"small",danger:!0,ghost:!0})})]}),responsive:["sm"]}],d=()=>{const h=s?(l-1)*i+1:0,b=j.min([h+i-1,s]),T=n("Showing %1$d - %2$d of %3$d",h,b,s);return e.jsxs(G,{gutter:16,align:"middle",justify:"space-between",children:[e.jsx(_,{style:{marginTop:"4px",marginBottom:"4px"},children:e.jsxs(G,{align:"middle",gutter:8,children:[e.jsx(_,{children:e.jsx(ge,{value:x,style:{width:140},onChange:M=>g(M),options:[{value:"",label:n("Bulk Actions")},{value:"remove",label:n("Delete")}],disabled:!(y!=null&&y.length)})}),e.jsx(_,{children:e.jsx(De,{action:x,onConfirm:()=>S(),children:e.jsx($,{type:"primary",disabled:!x,children:n("Apply")})})})]})}),e.jsx(_,{style:{marginTop:"4px",marginBottom:"4px"},children:T})]})};return a.useEffect(()=>{var C,P,q,B;const{data:h,isLoading:b,isError:T,error:M}=z;p(b?Se():Ce()),!b&&T&&((P=(C=M==null?void 0:M.data)==null?void 0:C.errors)!=null&&P.message)&&Y.error((B=(q=M==null?void 0:M.data)==null?void 0:q.errors)==null?void 0:B.message),!b&&!T&&h&&(h!=null&&h.msg&&(h!=null&&h.status?Y.success(h==null?void 0:h.msg):Y.error(h==null?void 0:h.msg)),h!=null&&h.status&&E())},[z,E,p]),e.jsx(kt,{rowKey:h=>h==null?void 0:h.term_id,rowSelection:f,columns:w,dataSource:t,footer:d,loading:A,onChange:u,pagination:{total:s,pageSize:i,current:l,onChange:c,onShowSizeChange:r,showSizeChanger:s>10,style:{marginBottom:0}}})}const{Title:Hr}=ae;function Yr(){const t=Qe(),s=Ct(),i=Un(),[l,c]=fs(),[r,f]=a.useState(i("limit",20)),[x,g]=a.useState((l==null?void 0:l.get("page"))||1),[y,m]=a.useState((l==null?void 0:l.get("sort"))||""),[A,E]=a.useState(""),[D,v]=a.useState([]),[R,p]=a.useState(!1),[F,z]=a.useState(null),[k,S]=a.useState(!1),[u,o]=a.useState(0),[w,d]=a.useState([]),h=he({action:"knowledge_base_tag_data",limit:r,page:x,sort:y||"id-asc"}),b=a.useCallback(()=>{E(""),v([])},[]),T=K=>{K===1?l.delete("page"):l.set("page",K),g(K),c(l),b()},M=(K,X)=>{X===20?l.delete("limit"):l.set("limit",X),f(X),c(l),b()},C={selectedRowKeys:D,onChange:K=>{K!=null&&K.length||b(),v(K)}},P=K=>{z(K),S(!0),p(!0)},q=a.useCallback(()=>{p(!1),z(null),S(!1)},[]),B=()=>{h.refetch(),b()},W=K=>{const{field:X,order:Z}=K||{};let V=X;Z==="ascend"?V+="-asc":V+="-desc",m(V),g(1),l.delete("page"),l.set("sort",V),c(l),b()};return a.useEffect(()=>{var ee,se,ue,U;const{data:K,isFetching:X,isError:Z,error:V}=h;!X&&Z&&Y.error((se=(ee=V==null?void 0:V.data)==null?void 0:ee.errors)==null?void 0:se.message),!X&&!Z&&K&&(d((ue=K==null?void 0:K.data)==null?void 0:ue.result),o(((U=K==null?void 0:K.data)==null?void 0:U.total)||0))},[h]),a.useEffect(()=>{const{search:K}=s,X=new URLSearchParams(K);X.has("limit")||f(20),X.has("page")||g(1),X.has("sort")||m("")},[s]),e.jsxs(e.Fragment,{children:[e.jsxs(G,{gutter:16,justify:"space-between",align:"middle",style:{paddingBottom:"8px",marginBottom:"16px"},children:[e.jsx(_,{style:{paddingBottom:"8px"},children:e.jsx(Hr,{level:5,style:{fontSize:"18px",margin:0},children:n("Tags")})}),e.jsx(_,{style:{paddingBottom:"8px"},children:e.jsxs(O,{children:[e.jsx($,{type:"primary",icon:e.jsx(yt,{}),onClick:B,ghost:!0}),t!=null&&t.lg||t!=null&&t.xl||t!=null&&t.xxl?e.jsx($,{type:"primary",icon:e.jsx(lt,{}),onClick:()=>{p(!0)},children:n("Add New")}):e.jsx($,{type:"primary",icon:e.jsx(lt,{}),onClick:()=>{p(!0)}})]})})]}),e.jsx(qr,{data:w,total:u,limit:r,page:x,onPageChange:T,onSizeChange:M,rowSelection:C,bulkAction:A,setBulkAction:E,bulkActionIds:D,onEditClick:P,isLoading:h==null?void 0:h.isFetching,resetBulkAction:b,sortOrder:y,handleSort:W}),e.jsx(Wn,{title:k?n("Edit %s",n("Tag")):n("Add New %s",n("Tag")),centered:!0,open:R,onCancel:q,onClose:q,footer:null,width:800,style:{maxWidth:"calc(100vw - 32px)",marginTop:"40px",marginBottom:"40px"},destroyOnClose:!0,children:e.jsx(Wr,{isOpen:R,onCloseModal:q,data:F,isEdit:k})})]})}const{Text:Ur}=ae;function Gr({setIsLoading:t}){const s=["claude_api_key"],i={claude_status:!1,claude_api_key:"",claude_max_tokens:1500},l=_e(),[c]=N.useForm(),[r,f]=a.useState(null),[x,g]=a.useState(null),[y,m]=a.useState(!0),[A,E]=a.useState(!0),[D,v]=a.useState(""),[R,p]=we(),F=he({action:"knowledge_base_claude_data"}),z=(u,o)=>{o=j.mapValues(o,function(d){return j.isString(d)?j.trim(d):d});for(const d of s){const h=u==null?void 0:u[d];h&&j.includes(h,"*")&&(o[d]=r[d])}g(o||{}),m(!(o!=null&&o.claude_status)||!1);const w=j.pick(r,j.keys(o));j.isEqual(w,o)?E(!0):r!=null&&r.claude_status||o!=null&&o.claude_status?E(!1):E(!0)},k=async u=>{var h;const o=u!=null&&u.claude_status?"A":"I",w=((h=u==null?void 0:u.claude_api_key)==null?void 0:h.trim())||"",d=j.toInteger((u==null?void 0:u.claude_max_tokens)||0)||0;R({params:{action:"knowledge_base_claude"},data:{claude_status:o,claude_api_key:w,claude_max_tokens:d}})},S=()=>{c.setFieldsValue(r||{}),z(null,r)};return a.useEffect(()=>{c.setFieldsValue(r||{}),g(r||{}),m(!(r!=null&&r.claude_status)||!1),E(!0)},[r,c]),a.useEffect(()=>{var h,b;const{data:u,isFetching:o,isError:w,error:d}=F;t(o),!o&&w&&Y.error((b=(h=d==null?void 0:d.data)==null?void 0:h.errors)==null?void 0:b.message),!o&&!w&&u&&f((u==null?void 0:u.data)||{})},[F,t]),a.useEffect(()=>{var h,b,T,M;const{data:u,isLoading:o,isError:w,error:d}=p;l(o?Se():Ce()),!o&&w&&((b=(h=d==null?void 0:d.data)==null?void 0:h.errors)!=null&&b.message)&&Y.error((M=(T=d==null?void 0:d.data)==null?void 0:T.errors)==null?void 0:M.message),!o&&!w&&u&&u!=null&&u.msg&&(u!=null&&u.status?(v(""),Y.success(u==null?void 0:u.msg)):(v(u==null?void 0:u.msg),He()))},[p,l]),e.jsx(N,{form:c,name:"saveClaude",layout:"vertical",autoComplete:"off",onFinish:k,onValuesChange:z,initialValues:i,children:e.jsxs(G,{children:[D?e.jsx(_,{span:24,children:e.jsx(Ye,{message:D,type:"error",showIcon:!0,closable:!0,afterClose:()=>v(""),style:{marginBottom:"24px"}})}):null,e.jsx(_,{span:24,children:e.jsxs(O,{align:"center",style:{marginBottom:"24px"},children:[e.jsx(N.Item,{name:"claude_status",valuePropName:"checked",style:{marginBottom:0},children:e.jsx(Ae,{})}),e.jsx(Ur,{onClick:()=>{c.setFieldValue("claude_status",!(x!=null&&x.claude_status)),z(null,c.getFieldsValue())},style:{cursor:"pointer"},children:x!=null&&x.claude_status?n("Click to disable."):n("Click to enable and setup.")})]})}),e.jsx(_,{span:24,children:e.jsx(N.Item,{label:n("API Key"),name:"claude_api_key",rules:[{required:!0,message:n("%s is required.",n("API key")),whitespace:!0}],help:y?"":void 0,tooltip:n("Value containing any asterisk (*) will not be updated."),children:e.jsx(de,{disabled:y})})}),e.jsx(_,{span:24,children:e.jsx(N.Item,{label:n("Set Max Tokens"),name:"claude_max_tokens",rules:[{required:!0,message:n("%s is required.",n("Set max token"))}],help:y?"":void 0,children:e.jsx(_t,{disabled:y,style:{width:"100%"}})})}),e.jsx(_,{span:24,children:e.jsxs(O,{children:[e.jsx($,{type:"primary",htmlType:"submit",loading:!1,disabled:A,children:n("Save Changes")}),e.jsx($,{htmlType:"button",onClick:S,disabled:A,children:n("Discard")})]})})]})})}const{Text:Kr}=ae;function Xr({setIsLoading:t}){const s=["openai_api_key"],i={openai_status:!1,openai_api_key:"",openai_max_tokens:1500},l=_e(),[c]=N.useForm(),[r,f]=a.useState(null),[x,g]=a.useState(null),[y,m]=a.useState(!0),[A,E]=a.useState(!0),[D,v]=a.useState(""),[R,p]=we(),F=he({action:"knowledge_base_openai_data"}),z=(u,o)=>{o=j.mapValues(o,function(d){return j.isString(d)?j.trim(d):d});for(const d of s){const h=u==null?void 0:u[d];h&&j.includes(h,"*")&&(o[d]=r[d])}g(o||{}),m(!(o!=null&&o.openai_status)||!1);const w=j.pick(r,j.keys(o));j.isEqual(w,o)?E(!0):r!=null&&r.openai_status||o!=null&&o.openai_status?E(!1):E(!0)},k=async u=>{var h;const o=u!=null&&u.openai_status?"A":"I",w=((h=u==null?void 0:u.openai_api_key)==null?void 0:h.trim())||"",d=j.toInteger((u==null?void 0:u.openai_max_tokens)||0)||0;R({params:{action:"knowledge_base_openai"},data:{openai_status:o,openai_api_key:w,openai_max_tokens:d}})},S=()=>{c.setFieldsValue(r||{}),z(null,r)};return a.useEffect(()=>{c.setFieldsValue(r||{}),g(r||{}),m(!(r!=null&&r.openai_status)||!1),E(!0)},[r,c]),a.useEffect(()=>{var h,b;const{data:u,isFetching:o,isError:w,error:d}=F;t(o),!o&&w&&Y.error((b=(h=d==null?void 0:d.data)==null?void 0:h.errors)==null?void 0:b.message),!o&&!w&&u&&f((u==null?void 0:u.data)||{})},[F,t]),a.useEffect(()=>{var h,b,T,M;const{data:u,isLoading:o,isError:w,error:d}=p;l(o?Se():Ce()),!o&&w&&((b=(h=d==null?void 0:d.data)==null?void 0:h.errors)!=null&&b.message)&&Y.error((M=(T=d==null?void 0:d.data)==null?void 0:T.errors)==null?void 0:M.message),!o&&!w&&u&&u!=null&&u.msg&&(u!=null&&u.status?(v(""),Y.success(u==null?void 0:u.msg)):(v(u==null?void 0:u.msg),He()))},[p,l]),e.jsx(N,{form:c,name:"saveOpenAI",layout:"vertical",autoComplete:"off",onFinish:k,onValuesChange:z,initialValues:i,children:e.jsxs(G,{children:[D?e.jsx(_,{span:24,children:e.jsx(Ye,{message:D,type:"error",showIcon:!0,closable:!0,afterClose:()=>v(""),style:{marginBottom:"24px"}})}):null,e.jsx(_,{span:24,children:e.jsxs(O,{align:"center",style:{marginBottom:"24px"},children:[e.jsx(N.Item,{name:"openai_status",valuePropName:"checked",style:{marginBottom:0},children:e.jsx(Ae,{})}),e.jsx(Kr,{onClick:()=>{c.setFieldValue("openai_status",!(x!=null&&x.openai_status)),z(null,c.getFieldsValue())},style:{cursor:"pointer"},children:x!=null&&x.openai_status?n("Click to disable."):n("Click to enable and setup.")})]})}),e.jsx(_,{span:24,children:e.jsx(N.Item,{label:n("API Key"),name:"openai_api_key",rules:[{required:!0,message:n("%s is required.",n("API key")),whitespace:!0}],help:y?"":void 0,tooltip:n("Value containing any asterisk (*) will not be updated."),children:e.jsx(de,{disabled:y})})}),e.jsx(_,{span:24,children:e.jsx(N.Item,{label:n("Set Max Tokens"),name:"openai_max_tokens",rules:[{required:!0,message:n("%s is required.",n("Set max token"))}],help:y?"":void 0,children:e.jsx(_t,{disabled:y,style:{width:"100%"}})})}),e.jsx(_,{span:24,children:e.jsxs(O,{children:[e.jsx($,{type:"primary",htmlType:"submit",loading:!1,disabled:A,children:n("Save Changes")}),e.jsx($,{htmlType:"button",onClick:S,disabled:A,children:n("Discard")})]})})]})})}const{Title:Jr}=ae;function Qr(){var R;const t=Qe(),s=Ct(),[i,l]=a.useState(!0),[c,r]=a.useState(!0),[f,x]=a.useState(!0),[g,y]=a.useState(""),m=(R=it(s,"docs/config/write-with-ai",["main"]))==null?void 0:R[0];function A(){const p=g||m||"",F={main:e.jsx(Xr,{setIsLoading:r}),claude:e.jsx(Gr,{setIsLoading:x})};return e.jsx(e.Fragment,{children:Object.entries(F).map(([z,k])=>e.jsx("div",{className:z===p?"":"sg-hidden",children:k},z))})}a.useEffect(()=>{!c&&!f&&l(!1)},[c,f]),a.useEffect(()=>{var p;y((p=it(s,"docs/config/write-with-ai",["main"]))==null?void 0:p[0])},[s]);const E=[{key:"main",label:e.jsx(be,{to:"/docs/config/write-with-ai",pro:!0,badge:!0,style:{color:"inherit"},children:n("OpenAI")})},{key:"claude",label:e.jsx(be,{to:"/docs/config/write-with-ai/claude",pro:!0,badge:!0,style:{color:"inherit"},children:n("Claude")})}],D=()=>(g||m||"")==="claude"?n("Claude"):n("OpenAI"),v=t.lg||t.xl||t.xxl?{tabList:E,activeTabKey:g,defaultActiveKey:m,tabProps:{size:"middle"}}:{title:D()};return e.jsx(G,{justify:"space-around",children:e.jsxs(_,{span:24,style:{maxWidth:"960px"},children:[e.jsxs(G,{gutter:16,justify:"space-between",align:"middle",style:{paddingBottom:"8px",marginBottom:"8px"},children:[e.jsx(_,{style:{paddingBottom:"8px"},children:e.jsx(Jr,{level:5,style:{fontSize:"18px",margin:0},children:n("Write with AI")})}),e.jsx(_,{style:{paddingBottom:"8px"},children:e.jsxs(O,{children:[e.jsx(te,{title:e.jsxs(O,{align:"center",children:[e.jsx(Ie,{}),e.jsx("span",{children:n("Learn more")})]}),children:e.jsx($,{icon:e.jsx(Ie,{}),href:"https://supportgenix.com",target:"_blank"})}),e.jsx(te,{title:e.jsxs(O,{align:"center",children:[e.jsx(Fe,{}),e.jsx("span",{children:n("Documentation")})]}),children:e.jsx($,{icon:e.jsx(Fe,{}),href:"https://supportgenix.com/docs/",target:"_blank"})})]})})]}),e.jsx(G,{children:e.jsx(_,{span:24,children:e.jsx(Re,{size:"small",...v,styles:{header:{background:"#fafafa",fontWeight:500},body:{padding:"20px 24px 24px 24px"}},children:e.jsx(ct,{spinning:i,style:{maxHeight:"unset"},children:A()})})})})]})})}const{Sider:Zr,Content:Vr}=bs;var On;const _n=((On=window==null?void 0:window.support_genix_config)==null?void 0:On.lite)||!1;function eo(){const t=Ct(),s=_e(),[i,l]=a.useState([]),{hasPermission:c}=yi(),r=wi(Si),f=Ci(t,"docs/config",[]),x=it(t,"docs/config",["general"]),g=()=>i,y=()=>x,m=()=>{if(i!=null&&i.includes("write-with-ai")){if((i==null?void 0:i.length)===1)return["write-with-ai","write-with-ai-main"];if((i==null?void 0:i.length)===2&&(i!=null&&i.includes("claude")))return["write-with-ai","write-with-ai-claude"]}if(i!=null&&i.includes("ai-chatbot")){if((i==null?void 0:i.length)===1)return["ai-chatbot","ai-chatbot-main"];if((i==null?void 0:i.length)===2&&(i!=null&&i.includes("text")))return["ai-chatbot","ai-chatbot-text"];if((i==null?void 0:i.length)===2&&(i!=null&&i.includes("style")))return["ai-chatbot","ai-chatbot-style"]}return i},A=()=>{if(x!=null&&x.includes("write-with-ai")){if((x==null?void 0:x.length)===1)return["write-with-ai","write-with-ai-main"];if((x==null?void 0:x.length)===2&&(x!=null&&x.includes("claude")))return["write-with-ai","write-with-ai-claude"]}if(x!=null&&x.includes("ai-chatbot")){if((x==null?void 0:x.length)===1)return["ai-chatbot","ai-chatbot-main"];if((x==null?void 0:x.length)===2&&(x!=null&&x.includes("text")))return["ai-chatbot","ai-chatbot-text"];if((x==null?void 0:x.length)===2&&(x!=null&&x.includes("style")))return["ai-chatbot","ai-chatbot-style"]}return x},E=a.useCallback(()=>{s(ki())},[s]),D=()=>{const F=i||x||[];if(F!=null&&F.includes("general"))return e.jsx(Lr,{});if(F!=null&&F.includes("design"))return e.jsx(Ar,{});if(F!=null&&F.includes("permissions"))return e.jsx(Nr,{});if(F!=null&&F.includes("categories"))return e.jsx(hr,{});if(F!=null&&F.includes("tags"))return e.jsx(Yr,{});if(F!=null&&F.includes("write-with-ai"))return e.jsx(Qr,{});if(F!=null&&F.includes("ai-chatbot"))return e.jsx(br,{})};a.useEffect(()=>{l(it(t,"docs/config",["general"]))},[t]);const v=()=>_n?e.jsx(Me,{bordered:!1,color:"error",style:{margin:0},children:n("Pro")}):null,R=[{key:"general",label:e.jsx(be,{to:"/docs/config",pro:!0,children:n("General")}),text:n("General"),extra:v()},{key:"permissions",label:e.jsx(be,{to:"/docs/config/permissions",pro:!0,children:n("Permissions")}),text:n("Permissions"),extra:v()},{key:"categories",label:e.jsx(be,{to:"/docs/config/categories",pro:!0,children:n("Categories")}),text:n("Categories"),extra:v()},{key:"tags",label:e.jsx(be,{to:"/docs/config/tags",pro:!0,children:n("Tags")}),text:n("Tags"),extra:v()},{key:"design",label:n("Design Layout"),text:n("Design Layout"),children:[{key:"base",label:e.jsx(be,{to:"/docs/config/design/base",pro:!0,children:n("Base")}),text:n("Base"),extra:v()},{key:"archive",label:e.jsx(be,{to:"/docs/config/design/archive",pro:!0,children:n("Archive")}),text:n("Archive"),extra:v()},{key:"single",label:e.jsx(be,{to:"/docs/config/design/single",pro:!0,children:n("Single")}),text:n("Single"),extra:v()},{key:"style",label:e.jsx(be,{to:"/docs/config/design/style",pro:!0,children:n("Style")}),text:n("Style"),extra:v()}]},{key:"write-with-ai",label:e.jsx(be,{to:"/docs/config/write-with-ai",pro:!0,children:n("Write With AI")}),text:n("Write With AI"),extra:v()},{key:"ai-chatbot",label:e.jsx(be,{to:"/docs/config/ai-chatbot",pro:!0,children:n("AI Chatbot")}),text:n("AI Chatbot"),extra:v()}],p=R==null?void 0:R.map(F=>F.key==="write-with-ai"?{...F,label:F.text,children:[{key:"write-with-ai-main",label:e.jsx(be,{to:"/docs/config/write-with-ai",pro:!0,style:{color:"inherit"},children:n("OpenAI")}),text:n("OpenAI"),extra:v()},{key:"write-with-ai-claude",label:e.jsx(be,{to:"/docs/config/write-with-ai/claude",pro:!0,style:{color:"inherit"},children:n("Claude")}),text:n("Claude"),extra:v()}]}:F.key==="ai-chatbot"?{...F,label:F.text,children:[{key:"ai-chatbot-main",label:e.jsx(be,{to:"/docs/config/ai-chatbot",pro:!0,style:{color:"inherit"},children:n("Main")}),text:n("Main")},{key:"ai-chatbot-text",label:e.jsx(be,{to:"/docs/config/ai-chatbot/text",pro:!0,style:{color:"inherit"},children:n("Text")}),text:n("Text")},{key:"ai-chatbot-style",label:e.jsx(be,{to:"/docs/config/ai-chatbot/style",pro:!0,style:{color:"inherit"},children:n("Style")}),text:n("Style")}]}:F);return e.jsxs(e.Fragment,{children:[e.jsxs(bs,{style:{background:"transparent"},children:[c("all")?e.jsx(at,{showOn:["lg","xl","xxl"],children:e.jsx(Zr,{width:230,style:{background:"transparent"},children:e.jsx(gn,{mode:"inline",selectedKeys:g(),defaultOpenKeys:f,defaultSelectedKeys:y(),onSelect:()=>{He()},style:{height:"100%",padding:"0 8px 0 0"},items:R})})}):null,e.jsx(Vr,{style:{padding:"16px 8px 16px 16px"},children:D()})]}),c("all")?e.jsx(at,{showOn:["xs","sm","md"],children:e.jsx(Ai,{title:n("Configuration"),onClose:E,open:r,styles:{body:{padding:"16px"}},children:e.jsx(gn,{mode:"inline",selectedKeys:m(),defaultOpenKeys:f,defaultSelectedKeys:A(),onSelect:({keyPath:F})=>{var S;const k=["/docs/config",...j.reverse(F)].join("/")||"";_n&&((S=vi)!=null&&S.some(u=>Ti(u,k)))?s(Ei()):(E(),He())},style:{height:"100%",padding:"0",borderInlineEnd:"none"},items:p})})}):null]})}function to(){for(var t=arguments.length,s=new Array(t),i=0;i<t;i++)s[i]=arguments[i];return a.useMemo(()=>l=>{s.forEach(c=>c(l))},s)}const _s=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Ft(t){const s=Object.prototype.toString.call(t);return s==="[object Window]"||s==="[object global]"}function Js(t){return"nodeType"in t}function Oe(t){var s,i;return t?Ft(t)?t:Js(t)&&(s=(i=t.ownerDocument)==null?void 0:i.defaultView)!=null?s:window:window}function Qs(t){const{Document:s}=Oe(t);return t instanceof s}function Jt(t){return Ft(t)?!1:t instanceof Oe(t).HTMLElement}function Gn(t){return t instanceof Oe(t).SVGElement}function At(t){return t?Ft(t)?t.document:Js(t)?Qs(t)?t:Jt(t)||Gn(t)?t.ownerDocument:document:document:document}const rt=_s?a.useLayoutEffect:a.useEffect;function Zs(t){const s=a.useRef(t);return rt(()=>{s.current=t}),a.useCallback(function(){for(var i=arguments.length,l=new Array(i),c=0;c<i;c++)l[c]=arguments[c];return s.current==null?void 0:s.current(...l)},[])}function so(){const t=a.useRef(null),s=a.useCallback((l,c)=>{t.current=setInterval(l,c)},[]),i=a.useCallback(()=>{t.current!==null&&(clearInterval(t.current),t.current=null)},[]);return[s,i]}function Gt(t,s){s===void 0&&(s=[t]);const i=a.useRef(t);return rt(()=>{i.current!==t&&(i.current=t)},s),i}function Qt(t,s){const i=a.useRef();return a.useMemo(()=>{const l=t(i.current);return i.current=l,l},[...s])}function us(t){const s=Zs(t),i=a.useRef(null),l=a.useCallback(c=>{c!==i.current&&(s==null||s(c,i.current)),i.current=c},[]);return[i,l]}function Os(t){const s=a.useRef();return a.useEffect(()=>{s.current=t},[t]),s.current}let Fs={};function Zt(t,s){return a.useMemo(()=>{if(s)return s;const i=Fs[t]==null?0:Fs[t]+1;return Fs[t]=i,t+"-"+i},[t,s])}function Kn(t){return function(s){for(var i=arguments.length,l=new Array(i>1?i-1:0),c=1;c<i;c++)l[c-1]=arguments[c];return l.reduce((r,f)=>{const x=Object.entries(f);for(const[g,y]of x){const m=r[g];m!=null&&(r[g]=m+t*y)}return r},{...s})}}const It=Kn(1),hs=Kn(-1);function no(t){return"clientX"in t&&"clientY"in t}function Vs(t){if(!t)return!1;const{KeyboardEvent:s}=Oe(t.target);return s&&t instanceof s}function io(t){if(!t)return!1;const{TouchEvent:s}=Oe(t.target);return s&&t instanceof s}function Ns(t){if(io(t)){if(t.touches&&t.touches.length){const{clientX:s,clientY:i}=t.touches[0];return{x:s,y:i}}else if(t.changedTouches&&t.changedTouches.length){const{clientX:s,clientY:i}=t.changedTouches[0];return{x:s,y:i}}}return no(t)?{x:t.clientX,y:t.clientY}:null}const Kt=Object.freeze({Translate:{toString(t){if(!t)return;const{x:s,y:i}=t;return"translate3d("+(s?Math.round(s):0)+"px, "+(i?Math.round(i):0)+"px, 0)"}},Scale:{toString(t){if(!t)return;const{scaleX:s,scaleY:i}=t;return"scaleX("+s+") scaleY("+i+")"}},Transform:{toString(t){if(t)return[Kt.Translate.toString(t),Kt.Scale.toString(t)].join(" ")}},Transition:{toString(t){let{property:s,duration:i,easing:l}=t;return s+" "+i+"ms "+l}}}),yn="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function ro(t){return t.matches(yn)?t:t.querySelector(yn)}const oo={display:"none"};function lo(t){let{id:s,value:i}=t;return Le.createElement("div",{id:s,style:oo},i)}function ao(t){let{id:s,announcement:i,ariaLiveType:l="assertive"}=t;const c={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return Le.createElement("div",{id:s,style:c,role:"status","aria-live":l,"aria-atomic":!0},i)}function co(){const[t,s]=a.useState("");return{announce:a.useCallback(l=>{l!=null&&s(l)},[]),announcement:t}}const Xn=a.createContext(null);function uo(t){const s=a.useContext(Xn);a.useEffect(()=>{if(!s)throw new Error("useDndMonitor must be used within a children of <DndContext>");return s(t)},[t,s])}function ho(){const[t]=a.useState(()=>new Set),s=a.useCallback(l=>(t.add(l),()=>t.delete(l)),[t]);return[a.useCallback(l=>{let{type:c,event:r}=l;t.forEach(f=>{var x;return(x=f[c])==null?void 0:x.call(f,r)})},[t]),s]}const go={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},po={onDragStart(t){let{active:s}=t;return"Picked up draggable item "+s.id+"."},onDragOver(t){let{active:s,over:i}=t;return i?"Draggable item "+s.id+" was moved over droppable area "+i.id+".":"Draggable item "+s.id+" is no longer over a droppable area."},onDragEnd(t){let{active:s,over:i}=t;return i?"Draggable item "+s.id+" was dropped over droppable area "+i.id:"Draggable item "+s.id+" was dropped."},onDragCancel(t){let{active:s}=t;return"Dragging was cancelled. Draggable item "+s.id+" was dropped."}};function xo(t){let{announcements:s=po,container:i,hiddenTextDescribedById:l,screenReaderInstructions:c=go}=t;const{announce:r,announcement:f}=co(),x=Zt("DndLiveRegion"),[g,y]=a.useState(!1);if(a.useEffect(()=>{y(!0)},[]),uo(a.useMemo(()=>({onDragStart(A){let{active:E}=A;r(s.onDragStart({active:E}))},onDragMove(A){let{active:E,over:D}=A;s.onDragMove&&r(s.onDragMove({active:E,over:D}))},onDragOver(A){let{active:E,over:D}=A;r(s.onDragOver({active:E,over:D}))},onDragEnd(A){let{active:E,over:D}=A;r(s.onDragEnd({active:E,over:D}))},onDragCancel(A){let{active:E,over:D}=A;r(s.onDragCancel({active:E,over:D}))}}),[r,s])),!g)return null;const m=Le.createElement(Le.Fragment,null,Le.createElement(lo,{id:l,value:c.draggable}),Le.createElement(ao,{id:x,announcement:f}));return i?Ot.createPortal(m,i):m}var ye;(function(t){t.DragStart="dragStart",t.DragMove="dragMove",t.DragEnd="dragEnd",t.DragCancel="dragCancel",t.DragOver="dragOver",t.RegisterDroppable="registerDroppable",t.SetDroppableDisabled="setDroppableDisabled",t.UnregisterDroppable="unregisterDroppable"})(ye||(ye={}));function gs(){}const Ve=Object.freeze({x:0,y:0});function fo(t,s){let{data:{value:i}}=t,{data:{value:l}}=s;return l-i}function mo(t,s){if(!t||t.length===0)return null;const[i]=t;return i[s]}function jo(t,s){const i=Math.max(s.top,t.top),l=Math.max(s.left,t.left),c=Math.min(s.left+s.width,t.left+t.width),r=Math.min(s.top+s.height,t.top+t.height),f=c-l,x=r-i;if(l<c&&i<r){const g=s.width*s.height,y=t.width*t.height,m=f*x,A=m/(g+y-m);return Number(A.toFixed(4))}return 0}const bo=t=>{let{collisionRect:s,droppableRects:i,droppableContainers:l}=t;const c=[];for(const r of l){const{id:f}=r,x=i.get(f);if(x){const g=jo(x,s);g>0&&c.push({id:f,data:{droppableContainer:r,value:g}})}}return c.sort(fo)};function _o(t,s,i){return{...t,scaleX:s&&i?s.width/i.width:1,scaleY:s&&i?s.height/i.height:1}}function Jn(t,s){return t&&s?{x:t.left-s.left,y:t.top-s.top}:Ve}function yo(t){return function(i){for(var l=arguments.length,c=new Array(l>1?l-1:0),r=1;r<l;r++)c[r-1]=arguments[r];return c.reduce((f,x)=>({...f,top:f.top+t*x.y,bottom:f.bottom+t*x.y,left:f.left+t*x.x,right:f.right+t*x.x}),{...i})}}const wo=yo(1);function So(t){if(t.startsWith("matrix3d(")){const s=t.slice(9,-1).split(/, /);return{x:+s[12],y:+s[13],scaleX:+s[0],scaleY:+s[5]}}else if(t.startsWith("matrix(")){const s=t.slice(7,-1).split(/, /);return{x:+s[4],y:+s[5],scaleX:+s[0],scaleY:+s[3]}}return null}function Co(t,s,i){const l=So(s);if(!l)return t;const{scaleX:c,scaleY:r,x:f,y:x}=l,g=t.left-f-(1-c)*parseFloat(i),y=t.top-x-(1-r)*parseFloat(i.slice(i.indexOf(" ")+1)),m=c?t.width/c:t.width,A=r?t.height/r:t.height;return{width:m,height:A,top:y,right:g+m,bottom:y+A,left:g}}const ko={ignoreTransform:!1};function Rt(t,s){s===void 0&&(s=ko);let i=t.getBoundingClientRect();if(s.ignoreTransform){const{transform:y,transformOrigin:m}=Oe(t).getComputedStyle(t);y&&(i=Co(i,y,m))}const{top:l,left:c,width:r,height:f,bottom:x,right:g}=i;return{top:l,left:c,width:r,height:f,bottom:x,right:g}}function wn(t){return Rt(t,{ignoreTransform:!0})}function vo(t){const s=t.innerWidth,i=t.innerHeight;return{top:0,left:0,right:s,bottom:i,width:s,height:i}}function To(t,s){return s===void 0&&(s=Oe(t).getComputedStyle(t)),s.position==="fixed"}function Eo(t,s){s===void 0&&(s=Oe(t).getComputedStyle(t));const i=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(c=>{const r=s[c];return typeof r=="string"?i.test(r):!1})}function en(t,s){const i=[];function l(c){if(s!=null&&i.length>=s||!c)return i;if(Qs(c)&&c.scrollingElement!=null&&!i.includes(c.scrollingElement))return i.push(c.scrollingElement),i;if(!Jt(c)||Gn(c)||i.includes(c))return i;const r=Oe(t).getComputedStyle(c);return c!==t&&Eo(c,r)&&i.push(c),To(c,r)?i:l(c.parentNode)}return t?l(t):i}function Qn(t){const[s]=en(t,1);return s??null}function As(t){return!_s||!t?null:Ft(t)?t:Js(t)?Qs(t)||t===At(t).scrollingElement?window:Jt(t)?t:null:null}function Zn(t){return Ft(t)?t.scrollX:t.scrollLeft}function Vn(t){return Ft(t)?t.scrollY:t.scrollTop}function Ps(t){return{x:Zn(t),y:Vn(t)}}var ke;(function(t){t[t.Forward=1]="Forward",t[t.Backward=-1]="Backward"})(ke||(ke={}));function ei(t){return!_s||!t?!1:t===document.scrollingElement}function ti(t){const s={x:0,y:0},i=ei(t)?{height:window.innerHeight,width:window.innerWidth}:{height:t.clientHeight,width:t.clientWidth},l={x:t.scrollWidth-i.width,y:t.scrollHeight-i.height},c=t.scrollTop<=s.y,r=t.scrollLeft<=s.x,f=t.scrollTop>=l.y,x=t.scrollLeft>=l.x;return{isTop:c,isLeft:r,isBottom:f,isRight:x,maxScroll:l,minScroll:s}}const Do={x:.2,y:.2};function Io(t,s,i,l,c){let{top:r,left:f,right:x,bottom:g}=i;l===void 0&&(l=10),c===void 0&&(c=Do);const{isTop:y,isBottom:m,isLeft:A,isRight:E}=ti(t),D={x:0,y:0},v={x:0,y:0},R={height:s.height*c.y,width:s.width*c.x};return!y&&r<=s.top+R.height?(D.y=ke.Backward,v.y=l*Math.abs((s.top+R.height-r)/R.height)):!m&&g>=s.bottom-R.height&&(D.y=ke.Forward,v.y=l*Math.abs((s.bottom-R.height-g)/R.height)),!E&&x>=s.right-R.width?(D.x=ke.Forward,v.x=l*Math.abs((s.right-R.width-x)/R.width)):!A&&f<=s.left+R.width&&(D.x=ke.Backward,v.x=l*Math.abs((s.left+R.width-f)/R.width)),{direction:D,speed:v}}function Fo(t){if(t===document.scrollingElement){const{innerWidth:r,innerHeight:f}=window;return{top:0,left:0,right:r,bottom:f,width:r,height:f}}const{top:s,left:i,right:l,bottom:c}=t.getBoundingClientRect();return{top:s,left:i,right:l,bottom:c,width:t.clientWidth,height:t.clientHeight}}function si(t){return t.reduce((s,i)=>It(s,Ps(i)),Ve)}function Ao(t){return t.reduce((s,i)=>s+Zn(i),0)}function Ro(t){return t.reduce((s,i)=>s+Vn(i),0)}function Bo(t,s){if(s===void 0&&(s=Rt),!t)return;const{top:i,left:l,bottom:c,right:r}=s(t);Qn(t)&&(c<=0||r<=0||i>=window.innerHeight||l>=window.innerWidth)&&t.scrollIntoView({block:"center",inline:"center"})}const zo=[["x",["left","right"],Ao],["y",["top","bottom"],Ro]];class tn{constructor(s,i){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const l=en(i),c=si(l);this.rect={...s},this.width=s.width,this.height=s.height;for(const[r,f,x]of zo)for(const g of f)Object.defineProperty(this,g,{get:()=>{const y=x(l),m=c[r]-y;return this.rect[g]+m},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class Ht{constructor(s){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(i=>{var l;return(l=this.target)==null?void 0:l.removeEventListener(...i)})},this.target=s}add(s,i,l){var c;(c=this.target)==null||c.addEventListener(s,i,l),this.listeners.push([s,i,l])}}function Lo(t){const{EventTarget:s}=Oe(t);return t instanceof s?t:At(t)}function Rs(t,s){const i=Math.abs(t.x),l=Math.abs(t.y);return typeof s=="number"?Math.sqrt(i**2+l**2)>s:"x"in s&&"y"in s?i>s.x&&l>s.y:"x"in s?i>s.x:"y"in s?l>s.y:!1}var Xe;(function(t){t.Click="click",t.DragStart="dragstart",t.Keydown="keydown",t.ContextMenu="contextmenu",t.Resize="resize",t.SelectionChange="selectionchange",t.VisibilityChange="visibilitychange"})(Xe||(Xe={}));function Sn(t){t.preventDefault()}function Mo(t){t.stopPropagation()}var ce;(function(t){t.Space="Space",t.Down="ArrowDown",t.Right="ArrowRight",t.Left="ArrowLeft",t.Up="ArrowUp",t.Esc="Escape",t.Enter="Enter",t.Tab="Tab"})(ce||(ce={}));const ni={start:[ce.Space,ce.Enter],cancel:[ce.Esc],end:[ce.Space,ce.Enter,ce.Tab]},Oo=(t,s)=>{let{currentCoordinates:i}=s;switch(t.code){case ce.Right:return{...i,x:i.x+25};case ce.Left:return{...i,x:i.x-25};case ce.Down:return{...i,y:i.y+25};case ce.Up:return{...i,y:i.y-25}}};class ii{constructor(s){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=s;const{event:{target:i}}=s;this.props=s,this.listeners=new Ht(At(i)),this.windowListeners=new Ht(Oe(i)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(Xe.Resize,this.handleCancel),this.windowListeners.add(Xe.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(Xe.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:s,onStart:i}=this.props,l=s.node.current;l&&Bo(l),i(Ve)}handleKeyDown(s){if(Vs(s)){const{active:i,context:l,options:c}=this.props,{keyboardCodes:r=ni,coordinateGetter:f=Oo,scrollBehavior:x="smooth"}=c,{code:g}=s;if(r.end.includes(g)){this.handleEnd(s);return}if(r.cancel.includes(g)){this.handleCancel(s);return}const{collisionRect:y}=l.current,m=y?{x:y.left,y:y.top}:Ve;this.referenceCoordinates||(this.referenceCoordinates=m);const A=f(s,{active:i,context:l.current,currentCoordinates:m});if(A){const E=hs(A,m),D={x:0,y:0},{scrollableAncestors:v}=l.current;for(const R of v){const p=s.code,{isTop:F,isRight:z,isLeft:k,isBottom:S,maxScroll:u,minScroll:o}=ti(R),w=Fo(R),d={x:Math.min(p===ce.Right?w.right-w.width/2:w.right,Math.max(p===ce.Right?w.left:w.left+w.width/2,A.x)),y:Math.min(p===ce.Down?w.bottom-w.height/2:w.bottom,Math.max(p===ce.Down?w.top:w.top+w.height/2,A.y))},h=p===ce.Right&&!z||p===ce.Left&&!k,b=p===ce.Down&&!S||p===ce.Up&&!F;if(h&&d.x!==A.x){const T=R.scrollLeft+E.x,M=p===ce.Right&&T<=u.x||p===ce.Left&&T>=o.x;if(M&&!E.y){R.scrollTo({left:T,behavior:x});return}M?D.x=R.scrollLeft-T:D.x=p===ce.Right?R.scrollLeft-u.x:R.scrollLeft-o.x,D.x&&R.scrollBy({left:-D.x,behavior:x});break}else if(b&&d.y!==A.y){const T=R.scrollTop+E.y,M=p===ce.Down&&T<=u.y||p===ce.Up&&T>=o.y;if(M&&!E.x){R.scrollTo({top:T,behavior:x});return}M?D.y=R.scrollTop-T:D.y=p===ce.Down?R.scrollTop-u.y:R.scrollTop-o.y,D.y&&R.scrollBy({top:-D.y,behavior:x});break}}this.handleMove(s,It(hs(A,this.referenceCoordinates),D))}}}handleMove(s,i){const{onMove:l}=this.props;s.preventDefault(),l(i)}handleEnd(s){const{onEnd:i}=this.props;s.preventDefault(),this.detach(),i()}handleCancel(s){const{onCancel:i}=this.props;s.preventDefault(),this.detach(),i()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}ii.activators=[{eventName:"onKeyDown",handler:(t,s,i)=>{let{keyboardCodes:l=ni,onActivation:c}=s,{active:r}=i;const{code:f}=t.nativeEvent;if(l.start.includes(f)){const x=r.activatorNode.current;return x&&t.target!==x?!1:(t.preventDefault(),c==null||c({event:t.nativeEvent}),!0)}return!1}}];function Cn(t){return!!(t&&"distance"in t)}function kn(t){return!!(t&&"delay"in t)}class sn{constructor(s,i,l){var c;l===void 0&&(l=Lo(s.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=s,this.events=i;const{event:r}=s,{target:f}=r;this.props=s,this.events=i,this.document=At(f),this.documentListeners=new Ht(this.document),this.listeners=new Ht(l),this.windowListeners=new Ht(Oe(f)),this.initialCoordinates=(c=Ns(r))!=null?c:Ve,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:s,props:{options:{activationConstraint:i,bypassActivationConstraint:l}}}=this;if(this.listeners.add(s.move.name,this.handleMove,{passive:!1}),this.listeners.add(s.end.name,this.handleEnd),s.cancel&&this.listeners.add(s.cancel.name,this.handleCancel),this.windowListeners.add(Xe.Resize,this.handleCancel),this.windowListeners.add(Xe.DragStart,Sn),this.windowListeners.add(Xe.VisibilityChange,this.handleCancel),this.windowListeners.add(Xe.ContextMenu,Sn),this.documentListeners.add(Xe.Keydown,this.handleKeydown),i){if(l!=null&&l({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(kn(i)){this.timeoutId=setTimeout(this.handleStart,i.delay),this.handlePending(i);return}if(Cn(i)){this.handlePending(i);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(s,i){const{active:l,onPending:c}=this.props;c(l,s,this.initialCoordinates,i)}handleStart(){const{initialCoordinates:s}=this,{onStart:i}=this.props;s&&(this.activated=!0,this.documentListeners.add(Xe.Click,Mo,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(Xe.SelectionChange,this.removeTextSelection),i(s))}handleMove(s){var i;const{activated:l,initialCoordinates:c,props:r}=this,{onMove:f,options:{activationConstraint:x}}=r;if(!c)return;const g=(i=Ns(s))!=null?i:Ve,y=hs(c,g);if(!l&&x){if(Cn(x)){if(x.tolerance!=null&&Rs(y,x.tolerance))return this.handleCancel();if(Rs(y,x.distance))return this.handleStart()}if(kn(x)&&Rs(y,x.tolerance))return this.handleCancel();this.handlePending(x,y);return}s.cancelable&&s.preventDefault(),f(g)}handleEnd(){const{onAbort:s,onEnd:i}=this.props;this.detach(),this.activated||s(this.props.active),i()}handleCancel(){const{onAbort:s,onCancel:i}=this.props;this.detach(),this.activated||s(this.props.active),i()}handleKeydown(s){s.code===ce.Esc&&this.handleCancel()}removeTextSelection(){var s;(s=this.document.getSelection())==null||s.removeAllRanges()}}const No={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class ri extends sn{constructor(s){const{event:i}=s,l=At(i.target);super(s,No,l)}}ri.activators=[{eventName:"onPointerDown",handler:(t,s)=>{let{nativeEvent:i}=t,{onActivation:l}=s;return!i.isPrimary||i.button!==0?!1:(l==null||l({event:i}),!0)}}];const Po={move:{name:"mousemove"},end:{name:"mouseup"}};var $s;(function(t){t[t.RightClick=2]="RightClick"})($s||($s={}));class $o extends sn{constructor(s){super(s,Po,At(s.event.target))}}$o.activators=[{eventName:"onMouseDown",handler:(t,s)=>{let{nativeEvent:i}=t,{onActivation:l}=s;return i.button===$s.RightClick?!1:(l==null||l({event:i}),!0)}}];const Bs={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class Wo extends sn{constructor(s){super(s,Bs)}static setup(){return window.addEventListener(Bs.move.name,s,{capture:!1,passive:!1}),function(){window.removeEventListener(Bs.move.name,s)};function s(){}}}Wo.activators=[{eventName:"onTouchStart",handler:(t,s)=>{let{nativeEvent:i}=t,{onActivation:l}=s;const{touches:c}=i;return c.length>1?!1:(l==null||l({event:i}),!0)}}];var Yt;(function(t){t[t.Pointer=0]="Pointer",t[t.DraggableRect=1]="DraggableRect"})(Yt||(Yt={}));var ps;(function(t){t[t.TreeOrder=0]="TreeOrder",t[t.ReversedTreeOrder=1]="ReversedTreeOrder"})(ps||(ps={}));function qo(t){let{acceleration:s,activator:i=Yt.Pointer,canScroll:l,draggingRect:c,enabled:r,interval:f=5,order:x=ps.TreeOrder,pointerCoordinates:g,scrollableAncestors:y,scrollableAncestorRects:m,delta:A,threshold:E}=t;const D=Yo({delta:A,disabled:!r}),[v,R]=so(),p=a.useRef({x:0,y:0}),F=a.useRef({x:0,y:0}),z=a.useMemo(()=>{switch(i){case Yt.Pointer:return g?{top:g.y,bottom:g.y,left:g.x,right:g.x}:null;case Yt.DraggableRect:return c}},[i,c,g]),k=a.useRef(null),S=a.useCallback(()=>{const o=k.current;if(!o)return;const w=p.current.x*F.current.x,d=p.current.y*F.current.y;o.scrollBy(w,d)},[]),u=a.useMemo(()=>x===ps.TreeOrder?[...y].reverse():y,[x,y]);a.useEffect(()=>{if(!r||!y.length||!z){R();return}for(const o of u){if((l==null?void 0:l(o))===!1)continue;const w=y.indexOf(o),d=m[w];if(!d)continue;const{direction:h,speed:b}=Io(o,d,z,s,E);for(const T of["x","y"])D[T][h[T]]||(b[T]=0,h[T]=0);if(b.x>0||b.y>0){R(),k.current=o,v(S,f),p.current=b,F.current=h;return}}p.current={x:0,y:0},F.current={x:0,y:0},R()},[s,S,l,R,r,f,JSON.stringify(z),JSON.stringify(D),v,y,u,m,JSON.stringify(E)])}const Ho={x:{[ke.Backward]:!1,[ke.Forward]:!1},y:{[ke.Backward]:!1,[ke.Forward]:!1}};function Yo(t){let{delta:s,disabled:i}=t;const l=Os(s);return Qt(c=>{if(i||!l||!c)return Ho;const r={x:Math.sign(s.x-l.x),y:Math.sign(s.y-l.y)};return{x:{[ke.Backward]:c.x[ke.Backward]||r.x===-1,[ke.Forward]:c.x[ke.Forward]||r.x===1},y:{[ke.Backward]:c.y[ke.Backward]||r.y===-1,[ke.Forward]:c.y[ke.Forward]||r.y===1}}},[i,s,l])}function Uo(t,s){const i=s!=null?t.get(s):void 0,l=i?i.node.current:null;return Qt(c=>{var r;return s==null?null:(r=l??c)!=null?r:null},[l,s])}function Go(t,s){return a.useMemo(()=>t.reduce((i,l)=>{const{sensor:c}=l,r=c.activators.map(f=>({eventName:f.eventName,handler:s(f.handler,l)}));return[...i,...r]},[]),[t,s])}var Xt;(function(t){t[t.Always=0]="Always",t[t.BeforeDragging=1]="BeforeDragging",t[t.WhileDragging=2]="WhileDragging"})(Xt||(Xt={}));var Ws;(function(t){t.Optimized="optimized"})(Ws||(Ws={}));const vn=new Map;function Ko(t,s){let{dragging:i,dependencies:l,config:c}=s;const[r,f]=a.useState(null),{frequency:x,measure:g,strategy:y}=c,m=a.useRef(t),A=p(),E=Gt(A),D=a.useCallback(function(F){F===void 0&&(F=[]),!E.current&&f(z=>z===null?F:z.concat(F.filter(k=>!z.includes(k))))},[E]),v=a.useRef(null),R=Qt(F=>{if(A&&!i)return vn;if(!F||F===vn||m.current!==t||r!=null){const z=new Map;for(let k of t){if(!k)continue;if(r&&r.length>0&&!r.includes(k.id)&&k.rect.current){z.set(k.id,k.rect.current);continue}const S=k.node.current,u=S?new tn(g(S),S):null;k.rect.current=u,u&&z.set(k.id,u)}return z}return F},[t,r,i,A,g]);return a.useEffect(()=>{m.current=t},[t]),a.useEffect(()=>{A||D()},[i,A]),a.useEffect(()=>{r&&r.length>0&&f(null)},[JSON.stringify(r)]),a.useEffect(()=>{A||typeof x!="number"||v.current!==null||(v.current=setTimeout(()=>{D(),v.current=null},x))},[x,A,D,...l]),{droppableRects:R,measureDroppableContainers:D,measuringScheduled:r!=null};function p(){switch(y){case Xt.Always:return!1;case Xt.BeforeDragging:return i;default:return!i}}}function oi(t,s){return Qt(i=>t?i||(typeof s=="function"?s(t):t):null,[s,t])}function Xo(t,s){return oi(t,s)}function Jo(t){let{callback:s,disabled:i}=t;const l=Zs(s),c=a.useMemo(()=>{if(i||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:r}=window;return new r(l)},[l,i]);return a.useEffect(()=>()=>c==null?void 0:c.disconnect(),[c]),c}function ys(t){let{callback:s,disabled:i}=t;const l=Zs(s),c=a.useMemo(()=>{if(i||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:r}=window;return new r(l)},[i]);return a.useEffect(()=>()=>c==null?void 0:c.disconnect(),[c]),c}function Qo(t){return new tn(Rt(t),t)}function Tn(t,s,i){s===void 0&&(s=Qo);const[l,c]=a.useState(null);function r(){c(g=>{if(!t)return null;if(t.isConnected===!1){var y;return(y=g??i)!=null?y:null}const m=s(t);return JSON.stringify(g)===JSON.stringify(m)?g:m})}const f=Jo({callback(g){if(t)for(const y of g){const{type:m,target:A}=y;if(m==="childList"&&A instanceof HTMLElement&&A.contains(t)){r();break}}}}),x=ys({callback:r});return rt(()=>{r(),t?(x==null||x.observe(t),f==null||f.observe(document.body,{childList:!0,subtree:!0})):(x==null||x.disconnect(),f==null||f.disconnect())},[t]),l}function Zo(t){const s=oi(t);return Jn(t,s)}const En=[];function Vo(t){const s=a.useRef(t),i=Qt(l=>t?l&&l!==En&&t&&s.current&&t.parentNode===s.current.parentNode?l:en(t):En,[t]);return a.useEffect(()=>{s.current=t},[t]),i}function el(t){const[s,i]=a.useState(null),l=a.useRef(t),c=a.useCallback(r=>{const f=As(r.target);f&&i(x=>x?(x.set(f,Ps(f)),new Map(x)):null)},[]);return a.useEffect(()=>{const r=l.current;if(t!==r){f(r);const x=t.map(g=>{const y=As(g);return y?(y.addEventListener("scroll",c,{passive:!0}),[y,Ps(y)]):null}).filter(g=>g!=null);i(x.length?new Map(x):null),l.current=t}return()=>{f(t),f(r)};function f(x){x.forEach(g=>{const y=As(g);y==null||y.removeEventListener("scroll",c)})}},[c,t]),a.useMemo(()=>t.length?s?Array.from(s.values()).reduce((r,f)=>It(r,f),Ve):si(t):Ve,[t,s])}function Dn(t,s){s===void 0&&(s=[]);const i=a.useRef(null);return a.useEffect(()=>{i.current=null},s),a.useEffect(()=>{const l=t!==Ve;l&&!i.current&&(i.current=t),!l&&i.current&&(i.current=null)},[t]),i.current?hs(t,i.current):Ve}function tl(t){a.useEffect(()=>{if(!_s)return;const s=t.map(i=>{let{sensor:l}=i;return l.setup==null?void 0:l.setup()});return()=>{for(const i of s)i==null||i()}},t.map(s=>{let{sensor:i}=s;return i}))}function sl(t,s){return a.useMemo(()=>t.reduce((i,l)=>{let{eventName:c,handler:r}=l;return i[c]=f=>{r(f,s)},i},{}),[t,s])}function li(t){return a.useMemo(()=>t?vo(t):null,[t])}const In=[];function nl(t,s){s===void 0&&(s=Rt);const[i]=t,l=li(i?Oe(i):null),[c,r]=a.useState(In);function f(){r(()=>t.length?t.map(g=>ei(g)?l:new tn(s(g),g)):In)}const x=ys({callback:f});return rt(()=>{x==null||x.disconnect(),f(),t.forEach(g=>x==null?void 0:x.observe(g))},[t]),c}function il(t){if(!t)return null;if(t.children.length>1)return t;const s=t.children[0];return Jt(s)?s:t}function rl(t){let{measure:s}=t;const[i,l]=a.useState(null),c=a.useCallback(y=>{for(const{target:m}of y)if(Jt(m)){l(A=>{const E=s(m);return A?{...A,width:E.width,height:E.height}:E});break}},[s]),r=ys({callback:c}),f=a.useCallback(y=>{const m=il(y);r==null||r.disconnect(),m&&(r==null||r.observe(m)),l(m?s(m):null)},[s,r]),[x,g]=us(f);return a.useMemo(()=>({nodeRef:x,rect:i,setRef:g}),[i,x,g])}const ol=[{sensor:ri,options:{}},{sensor:ii,options:{}}],ll={current:{}},rs={draggable:{measure:wn},droppable:{measure:wn,strategy:Xt.WhileDragging,frequency:Ws.Optimized},dragOverlay:{measure:Rt}};class Ut extends Map{get(s){var i;return s!=null&&(i=super.get(s))!=null?i:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(s=>{let{disabled:i}=s;return!i})}getNodeFor(s){var i,l;return(i=(l=this.get(s))==null?void 0:l.node.current)!=null?i:void 0}}const al={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new Ut,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:gs},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:rs,measureDroppableContainers:gs,windowRect:null,measuringScheduled:!1},cl={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:gs,draggableNodes:new Map,over:null,measureDroppableContainers:gs},ws=a.createContext(cl),ai=a.createContext(al);function dl(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new Ut}}}function ul(t,s){switch(s.type){case ye.DragStart:return{...t,draggable:{...t.draggable,initialCoordinates:s.initialCoordinates,active:s.active}};case ye.DragMove:return t.draggable.active==null?t:{...t,draggable:{...t.draggable,translate:{x:s.coordinates.x-t.draggable.initialCoordinates.x,y:s.coordinates.y-t.draggable.initialCoordinates.y}}};case ye.DragEnd:case ye.DragCancel:return{...t,draggable:{...t.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case ye.RegisterDroppable:{const{element:i}=s,{id:l}=i,c=new Ut(t.droppable.containers);return c.set(l,i),{...t,droppable:{...t.droppable,containers:c}}}case ye.SetDroppableDisabled:{const{id:i,key:l,disabled:c}=s,r=t.droppable.containers.get(i);if(!r||l!==r.key)return t;const f=new Ut(t.droppable.containers);return f.set(i,{...r,disabled:c}),{...t,droppable:{...t.droppable,containers:f}}}case ye.UnregisterDroppable:{const{id:i,key:l}=s,c=t.droppable.containers.get(i);if(!c||l!==c.key)return t;const r=new Ut(t.droppable.containers);return r.delete(i),{...t,droppable:{...t.droppable,containers:r}}}default:return t}}function hl(t){let{disabled:s}=t;const{active:i,activatorEvent:l,draggableNodes:c}=a.useContext(ws),r=Os(l),f=Os(i==null?void 0:i.id);return a.useEffect(()=>{if(!s&&!l&&r&&f!=null){if(!Vs(r)||document.activeElement===r.target)return;const x=c.get(f);if(!x)return;const{activatorNode:g,node:y}=x;if(!g.current&&!y.current)return;requestAnimationFrame(()=>{for(const m of[g.current,y.current]){if(!m)continue;const A=ro(m);if(A){A.focus();break}}})}},[l,s,c,f,r]),null}function gl(t,s){let{transform:i,...l}=s;return t!=null&&t.length?t.reduce((c,r)=>r({transform:c,...l}),i):i}function pl(t){return a.useMemo(()=>({draggable:{...rs.draggable,...t==null?void 0:t.draggable},droppable:{...rs.droppable,...t==null?void 0:t.droppable},dragOverlay:{...rs.dragOverlay,...t==null?void 0:t.dragOverlay}}),[t==null?void 0:t.draggable,t==null?void 0:t.droppable,t==null?void 0:t.dragOverlay])}function xl(t){let{activeNode:s,measure:i,initialRect:l,config:c=!0}=t;const r=a.useRef(!1),{x:f,y:x}=typeof c=="boolean"?{x:c,y:c}:c;rt(()=>{if(!f&&!x||!s){r.current=!1;return}if(r.current||!l)return;const y=s==null?void 0:s.node.current;if(!y||y.isConnected===!1)return;const m=i(y),A=Jn(m,l);if(f||(A.x=0),x||(A.y=0),r.current=!0,Math.abs(A.x)>0||Math.abs(A.y)>0){const E=Qn(y);E&&E.scrollBy({top:A.y,left:A.x})}},[s,f,x,l,i])}const ci=a.createContext({...Ve,scaleX:1,scaleY:1});var mt;(function(t){t[t.Uninitialized=0]="Uninitialized",t[t.Initializing=1]="Initializing",t[t.Initialized=2]="Initialized"})(mt||(mt={}));const fl=a.memo(function(s){var i,l,c,r;let{id:f,accessibility:x,autoScroll:g=!0,children:y,sensors:m=ol,collisionDetection:A=bo,measuring:E,modifiers:D,...v}=s;const R=a.useReducer(ul,void 0,dl),[p,F]=R,[z,k]=ho(),[S,u]=a.useState(mt.Uninitialized),o=S===mt.Initialized,{draggable:{active:w,nodes:d,translate:h},droppable:{containers:b}}=p,T=w!=null?d.get(w):null,M=a.useRef({initial:null,translated:null}),C=a.useMemo(()=>{var Ee;return w!=null?{id:w,data:(Ee=T==null?void 0:T.data)!=null?Ee:ll,rect:M}:null},[w,T]),P=a.useRef(null),[q,B]=a.useState(null),[W,K]=a.useState(null),X=Gt(v,Object.values(v)),Z=Zt("DndDescribedBy",f),V=a.useMemo(()=>b.getEnabled(),[b]),ee=pl(E),{droppableRects:se,measureDroppableContainers:ue,measuringScheduled:U}=Ko(V,{dragging:o,dependencies:[h.x,h.y],config:ee.droppable}),Q=Uo(d,w),ne=a.useMemo(()=>W?Ns(W):null,[W]),I=_i(),J=Xo(Q,ee.draggable.measure);xl({activeNode:w!=null?d.get(w):null,config:I.layoutShiftCompensation,initialRect:J,measure:ee.draggable.measure});const H=Tn(Q,ee.draggable.measure,J),ie=Tn(Q?Q.parentElement:null),re=a.useRef({activatorEvent:null,active:null,activeNode:Q,collisionRect:null,collisions:null,droppableRects:se,draggableNodes:d,draggingNode:null,draggingNodeRect:null,droppableContainers:b,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),pe=b.getNodeFor((i=re.current.over)==null?void 0:i.id),fe=rl({measure:ee.dragOverlay.measure}),me=(l=fe.nodeRef.current)!=null?l:Q,et=o?(c=fe.rect)!=null?c:H:null,Vt=!!(fe.nodeRef.current&&fe.rect),L=Zo(Vt?null:H),le=li(me?Oe(me):null),xe=Vo(o?pe??Q:null),je=nl(xe),Te=gl(D,{transform:{x:h.x-L.x,y:h.y-L.y,scaleX:1,scaleY:1},activatorEvent:W,active:C,activeNodeRect:H,containerNodeRect:ie,draggingNodeRect:et,over:re.current.over,overlayNodeRect:fe.rect,scrollableAncestors:xe,scrollableAncestorRects:je,windowRect:le}),Be=ne?It(ne,h):null,ze=el(xe),Ne=Dn(ze),Ss=Dn(ze,[H]),Tt=It(Te,Ne),Et=et?wo(et,Te):null,Bt=C&&Et?A({active:C,collisionRect:Et,droppableRects:se,droppableContainers:V,pointerCoordinates:Be}):null,rn=mo(Bt,"id"),[dt,on]=a.useState(null),xi=Vt?Te:It(Te,Ss),fi=_o(xi,(r=dt==null?void 0:dt.rect)!=null?r:null,H),Cs=a.useRef(null),ln=a.useCallback((Ee,Pe)=>{let{sensor:$e,options:ut}=Pe;if(P.current==null)return;const Ue=d.get(P.current);if(!Ue)return;const We=Ee.nativeEvent,tt=new $e({active:P.current,activeNode:Ue,event:We,options:ut,context:re,onAbort(ve){if(!d.get(ve))return;const{onDragAbort:st}=X.current,ot={id:ve};st==null||st(ot),z({type:"onDragAbort",event:ot})},onPending(ve,ht,st,ot){if(!d.get(ve))return;const{onDragPending:Lt}=X.current,gt={id:ve,constraint:ht,initialCoordinates:st,offset:ot};Lt==null||Lt(gt),z({type:"onDragPending",event:gt})},onStart(ve){const ht=P.current;if(ht==null)return;const st=d.get(ht);if(!st)return;const{onDragStart:ot}=X.current,zt={activatorEvent:We,active:{id:ht,data:st.data,rect:M}};Ot.unstable_batchedUpdates(()=>{ot==null||ot(zt),u(mt.Initializing),F({type:ye.DragStart,initialCoordinates:ve,active:ht}),z({type:"onDragStart",event:zt}),B(Cs.current),K(We)})},onMove(ve){F({type:ye.DragMove,coordinates:ve})},onEnd:Dt(ye.DragEnd),onCancel:Dt(ye.DragCancel)});Cs.current=tt;function Dt(ve){return async function(){const{active:st,collisions:ot,over:zt,scrollAdjustedTranslate:Lt}=re.current;let gt=null;if(st&&Lt){const{cancelDrop:Mt}=X.current;gt={activatorEvent:We,active:st,collisions:ot,delta:Lt,over:zt},ve===ye.DragEnd&&typeof Mt=="function"&&await Promise.resolve(Mt(gt))&&(ve=ye.DragCancel)}P.current=null,Ot.unstable_batchedUpdates(()=>{F({type:ve}),u(mt.Uninitialized),on(null),B(null),K(null),Cs.current=null;const Mt=ve===ye.DragEnd?"onDragEnd":"onDragCancel";if(gt){const ks=X.current[Mt];ks==null||ks(gt),z({type:Mt,event:gt})}})}}},[d]),mi=a.useCallback((Ee,Pe)=>($e,ut)=>{const Ue=$e.nativeEvent,We=d.get(ut);if(P.current!==null||!We||Ue.dndKit||Ue.defaultPrevented)return;const tt={active:We};Ee($e,Pe.options,tt)===!0&&(Ue.dndKit={capturedBy:Pe.sensor},P.current=ut,ln($e,Pe))},[d,ln]),an=Go(m,mi);tl(m),rt(()=>{H&&S===mt.Initializing&&u(mt.Initialized)},[H,S]),a.useEffect(()=>{const{onDragMove:Ee}=X.current,{active:Pe,activatorEvent:$e,collisions:ut,over:Ue}=re.current;if(!Pe||!$e)return;const We={active:Pe,activatorEvent:$e,collisions:ut,delta:{x:Tt.x,y:Tt.y},over:Ue};Ot.unstable_batchedUpdates(()=>{Ee==null||Ee(We),z({type:"onDragMove",event:We})})},[Tt.x,Tt.y]),a.useEffect(()=>{const{active:Ee,activatorEvent:Pe,collisions:$e,droppableContainers:ut,scrollAdjustedTranslate:Ue}=re.current;if(!Ee||P.current==null||!Pe||!Ue)return;const{onDragOver:We}=X.current,tt=ut.get(rn),Dt=tt&&tt.rect.current?{id:tt.id,rect:tt.rect.current,data:tt.data,disabled:tt.disabled}:null,ve={active:Ee,activatorEvent:Pe,collisions:$e,delta:{x:Ue.x,y:Ue.y},over:Dt};Ot.unstable_batchedUpdates(()=>{on(Dt),We==null||We(ve),z({type:"onDragOver",event:ve})})},[rn]),rt(()=>{re.current={activatorEvent:W,active:C,activeNode:Q,collisionRect:Et,collisions:Bt,droppableRects:se,draggableNodes:d,draggingNode:me,draggingNodeRect:et,droppableContainers:b,over:dt,scrollableAncestors:xe,scrollAdjustedTranslate:Tt},M.current={initial:et,translated:Et}},[C,Q,Bt,Et,d,me,et,se,b,dt,xe,Tt]),qo({...I,delta:h,draggingRect:Et,pointerCoordinates:Be,scrollableAncestors:xe,scrollableAncestorRects:je});const ji=a.useMemo(()=>({active:C,activeNode:Q,activeNodeRect:H,activatorEvent:W,collisions:Bt,containerNodeRect:ie,dragOverlay:fe,draggableNodes:d,droppableContainers:b,droppableRects:se,over:dt,measureDroppableContainers:ue,scrollableAncestors:xe,scrollableAncestorRects:je,measuringConfiguration:ee,measuringScheduled:U,windowRect:le}),[C,Q,H,W,Bt,ie,fe,d,b,se,dt,ue,xe,je,ee,U,le]),bi=a.useMemo(()=>({activatorEvent:W,activators:an,active:C,activeNodeRect:H,ariaDescribedById:{draggable:Z},dispatch:F,draggableNodes:d,over:dt,measureDroppableContainers:ue}),[W,an,C,H,F,Z,d,dt,ue]);return Le.createElement(Xn.Provider,{value:k},Le.createElement(ws.Provider,{value:bi},Le.createElement(ai.Provider,{value:ji},Le.createElement(ci.Provider,{value:fi},y)),Le.createElement(hl,{disabled:(x==null?void 0:x.restoreFocus)===!1})),Le.createElement(xo,{...x,hiddenTextDescribedById:Z}));function _i(){const Ee=(q==null?void 0:q.autoScrollEnabled)===!1,Pe=typeof g=="object"?g.enabled===!1:g===!1,$e=o&&!Ee&&!Pe;return typeof g=="object"?{...g,enabled:$e}:{enabled:$e}}}),ml=a.createContext(null),Fn="button",jl="Draggable";function bl(t){let{id:s,data:i,disabled:l=!1,attributes:c}=t;const r=Zt(jl),{activators:f,activatorEvent:x,active:g,activeNodeRect:y,ariaDescribedById:m,draggableNodes:A,over:E}=a.useContext(ws),{role:D=Fn,roleDescription:v="draggable",tabIndex:R=0}=c??{},p=(g==null?void 0:g.id)===s,F=a.useContext(p?ci:ml),[z,k]=us(),[S,u]=us(),o=sl(f,s),w=Gt(i);rt(()=>(A.set(s,{id:s,key:r,node:z,activatorNode:S,data:w}),()=>{const h=A.get(s);h&&h.key===r&&A.delete(s)}),[A,s]);const d=a.useMemo(()=>({role:D,tabIndex:R,"aria-disabled":l,"aria-pressed":p&&D===Fn?!0:void 0,"aria-roledescription":v,"aria-describedby":m.draggable}),[l,D,R,p,v,m.draggable]);return{active:g,activatorEvent:x,activeNodeRect:y,attributes:d,isDragging:p,listeners:l?void 0:o,node:z,over:E,setNodeRef:k,setActivatorNodeRef:u,transform:F}}function _l(){return a.useContext(ai)}const yl="Droppable",wl={timeout:25};function Sl(t){let{data:s,disabled:i=!1,id:l,resizeObserverConfig:c}=t;const r=Zt(yl),{active:f,dispatch:x,over:g,measureDroppableContainers:y}=a.useContext(ws),m=a.useRef({disabled:i}),A=a.useRef(!1),E=a.useRef(null),D=a.useRef(null),{disabled:v,updateMeasurementsFor:R,timeout:p}={...wl,...c},F=Gt(R??l),z=a.useCallback(()=>{if(!A.current){A.current=!0;return}D.current!=null&&clearTimeout(D.current),D.current=setTimeout(()=>{y(Array.isArray(F.current)?F.current:[F.current]),D.current=null},p)},[p]),k=ys({callback:z,disabled:v||!f}),S=a.useCallback((d,h)=>{k&&(h&&(k.unobserve(h),A.current=!1),d&&k.observe(d))},[k]),[u,o]=us(S),w=Gt(s);return a.useEffect(()=>{!k||!u.current||(k.disconnect(),A.current=!1,k.observe(u.current))},[u,k]),a.useEffect(()=>(x({type:ye.RegisterDroppable,element:{id:l,key:r,disabled:i,node:u,rect:E,data:w}}),()=>x({type:ye.UnregisterDroppable,key:r,id:l})),[l]),a.useEffect(()=>{i!==m.current.disabled&&(x({type:ye.SetDroppableDisabled,id:l,key:r,disabled:i}),m.current.disabled=i)},[l,r,i,x]),{active:f,rect:E,isOver:(g==null?void 0:g.id)===l,node:u,over:g,setNodeRef:o}}const Cl=t=>{let{transform:s}=t;return{...s,x:0}};function nn(t,s,i){const l=t.slice();return l.splice(i<0?l.length+i:i,0,l.splice(s,1)[0]),l}function kl(t,s){return t.reduce((i,l,c)=>{const r=s.get(l);return r&&(i[c]=r),i},Array(t.length))}function ts(t){return t!==null&&t>=0}function vl(t,s){if(t===s)return!0;if(t.length!==s.length)return!1;for(let i=0;i<t.length;i++)if(t[i]!==s[i])return!1;return!0}function Tl(t){return typeof t=="boolean"?{draggable:t,droppable:t}:t}const di=t=>{let{rects:s,activeIndex:i,overIndex:l,index:c}=t;const r=nn(s,l,i),f=s[c],x=r[c];return!x||!f?null:{x:x.left-f.left,y:x.top-f.top,scaleX:x.width/f.width,scaleY:x.height/f.height}},ss={scaleX:1,scaleY:1},El=t=>{var s;let{activeIndex:i,activeNodeRect:l,index:c,rects:r,overIndex:f}=t;const x=(s=r[i])!=null?s:l;if(!x)return null;if(c===i){const y=r[f];return y?{x:0,y:i<f?y.top+y.height-(x.top+x.height):y.top-x.top,...ss}:null}const g=Dl(r,c,i);return c>i&&c<=f?{x:0,y:-x.height-g,...ss}:c<i&&c>=f?{x:0,y:x.height+g,...ss}:{x:0,y:0,...ss}};function Dl(t,s,i){const l=t[s],c=t[s-1],r=t[s+1];return l?i<s?c?l.top-(c.top+c.height):r?r.top-(l.top+l.height):0:r?r.top-(l.top+l.height):c?l.top-(c.top+c.height):0:0}const ui="Sortable",hi=Le.createContext({activeIndex:-1,containerId:ui,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:di,disabled:{draggable:!1,droppable:!1}});function Il(t){let{children:s,id:i,items:l,strategy:c=di,disabled:r=!1}=t;const{active:f,dragOverlay:x,droppableRects:g,over:y,measureDroppableContainers:m}=_l(),A=Zt(ui,i),E=x.rect!==null,D=a.useMemo(()=>l.map(o=>typeof o=="object"&&"id"in o?o.id:o),[l]),v=f!=null,R=f?D.indexOf(f.id):-1,p=y?D.indexOf(y.id):-1,F=a.useRef(D),z=!vl(D,F.current),k=p!==-1&&R===-1||z,S=Tl(r);rt(()=>{z&&v&&m(D)},[z,D,v,m]),a.useEffect(()=>{F.current=D},[D]);const u=a.useMemo(()=>({activeIndex:R,containerId:A,disabled:S,disableTransforms:k,items:D,overIndex:p,useDragOverlay:E,sortedRects:kl(D,g),strategy:c}),[R,A,S.draggable,S.droppable,k,D,p,g,E,c]);return Le.createElement(hi.Provider,{value:u},s)}const Fl=t=>{let{id:s,items:i,activeIndex:l,overIndex:c}=t;return nn(i,l,c).indexOf(s)},Al=t=>{let{containerId:s,isSorting:i,wasDragging:l,index:c,items:r,newIndex:f,previousItems:x,previousContainerId:g,transition:y}=t;return!y||!l||x!==r&&c===f?!1:i?!0:f!==c&&s===g},Rl={duration:200,easing:"ease"},gi="transform",Bl=Kt.Transition.toString({property:gi,duration:0,easing:"linear"}),zl={roleDescription:"sortable"};function Ll(t){let{disabled:s,index:i,node:l,rect:c}=t;const[r,f]=a.useState(null),x=a.useRef(i);return rt(()=>{if(!s&&i!==x.current&&l.current){const g=c.current;if(g){const y=Rt(l.current,{ignoreTransform:!0}),m={x:g.left-y.left,y:g.top-y.top,scaleX:g.width/y.width,scaleY:g.height/y.height};(m.x||m.y)&&f(m)}}i!==x.current&&(x.current=i)},[s,i,l,c]),a.useEffect(()=>{r&&f(null)},[r]),r}function Ml(t){let{animateLayoutChanges:s=Al,attributes:i,disabled:l,data:c,getNewIndex:r=Fl,id:f,strategy:x,resizeObserverConfig:g,transition:y=Rl}=t;const{items:m,containerId:A,activeIndex:E,disabled:D,disableTransforms:v,sortedRects:R,overIndex:p,useDragOverlay:F,strategy:z}=a.useContext(hi),k=Ol(l,D),S=m.indexOf(f),u=a.useMemo(()=>({sortable:{containerId:A,index:S,items:m},...c}),[A,c,S,m]),o=a.useMemo(()=>m.slice(m.indexOf(f)),[m,f]),{rect:w,node:d,isOver:h,setNodeRef:b}=Sl({id:f,data:u,disabled:k.droppable,resizeObserverConfig:{updateMeasurementsFor:o,...g}}),{active:T,activatorEvent:M,activeNodeRect:C,attributes:P,setNodeRef:q,listeners:B,isDragging:W,over:K,setActivatorNodeRef:X,transform:Z}=bl({id:f,data:u,attributes:{...zl,...i},disabled:k.draggable}),V=to(b,q),ee=!!T,se=ee&&!v&&ts(E)&&ts(p),ue=!F&&W,U=ue&&se?Z:null,ne=se?U??(x??z)({rects:R,activeNodeRect:C,activeIndex:E,overIndex:p,index:S}):null,I=ts(E)&&ts(p)?r({id:f,items:m,activeIndex:E,overIndex:p}):S,J=T==null?void 0:T.id,H=a.useRef({activeId:J,items:m,newIndex:I,containerId:A}),ie=m!==H.current.items,re=s({active:T,containerId:A,isDragging:W,isSorting:ee,id:f,index:S,items:m,newIndex:H.current.newIndex,previousItems:H.current.items,previousContainerId:H.current.containerId,transition:y,wasDragging:H.current.activeId!=null}),pe=Ll({disabled:!re,index:S,node:d,rect:w});return a.useEffect(()=>{ee&&H.current.newIndex!==I&&(H.current.newIndex=I),A!==H.current.containerId&&(H.current.containerId=A),m!==H.current.items&&(H.current.items=m)},[ee,I,A,m]),a.useEffect(()=>{if(J===H.current.activeId)return;if(J!=null&&H.current.activeId==null){H.current.activeId=J;return}const me=setTimeout(()=>{H.current.activeId=J},50);return()=>clearTimeout(me)},[J]),{active:T,activeIndex:E,attributes:P,data:u,rect:w,index:S,newIndex:I,items:m,isOver:h,isSorting:ee,isDragging:W,listeners:B,node:d,overIndex:p,over:K,setNodeRef:V,setActivatorNodeRef:X,setDroppableNodeRef:b,setDraggableNodeRef:q,transform:pe??ne,transition:fe()};function fe(){if(pe||ie&&H.current.newIndex===S)return Bl;if(!(ue&&!Vs(M)||!y)&&(ee||re))return Kt.Transition.toString({...y,property:gi})}}function Ol(t,s){var i,l;return typeof t=="boolean"?{draggable:t,droppable:!1}:{draggable:(i=t==null?void 0:t.draggable)!=null?i:s.draggable,droppable:(l=t==null?void 0:t.droppable)!=null?l:s.droppable}}ce.Down,ce.Right,ce.Up,ce.Left;function xs({record:t,resetBulkAction:s}){const i=_e(),[l,c]=a.useState(!1),[r,f]=we(),x=D=>{r({params:{action:"knowledge_base_docs_duplicate_item",id:D}})},g=D=>{r({params:{action:"knowledge_base_docs_trash_item",id:D}})},y=D=>{r({params:{action:"knowledge_base_docs_restore_item",id:D}})},m=D=>{r({params:{action:"knowledge_base_docs_delete_item",id:D}})};a.useEffect(()=>{var F,z,k,S;const{data:D,isLoading:v,isError:R,error:p}=f;i(v?Se():Ce()),!v&&R&&((z=(F=p==null?void 0:p.data)==null?void 0:F.errors)!=null&&z.message)&&Y.error((S=(k=p==null?void 0:p.data)==null?void 0:k.errors)==null?void 0:S.message),!v&&!R&&D&&(D!=null&&D.msg&&(D!=null&&D.status?Y.success(D==null?void 0:D.msg):Y.error(D==null?void 0:D.msg)),D!=null&&D.status&&s&&s())},[f,s,i]);const E=((t==null?void 0:t.post_status)||"")==="trash"?[{key:"restore",label:e.jsx(De,{action:"restore",onConfirm:()=>{y(t==null?void 0:t.ID),c(!1)},onCancel:()=>{c(!1)},children:e.jsx("span",{children:n("Restore")})})},{key:"remove",danger:!0,label:e.jsx(De,{action:"remove",onConfirm:()=>{m(t==null?void 0:t.ID),c(!1)},onCancel:()=>{c(!1)},children:e.jsx("span",{children:n("Delete")})})}]:[{key:"edit",label:e.jsx("a",{target:"_blank",href:t==null?void 0:t.edit_guid,children:n("Edit")})},{key:"duplicate",label:e.jsx(De,{action:"duplicate",onConfirm:()=>{x(t==null?void 0:t.ID),c(!1)},onCancel:()=>{c(!1)},children:e.jsx("span",{children:n("Duplicate")})})},{key:"trash",label:e.jsx(De,{action:"trash",onConfirm:()=>{g(t==null?void 0:t.ID),c(!1)},onCancel:()=>{c(!1)},children:e.jsx("span",{children:n("Move to Trash")})})},{key:"view",label:e.jsx("a",{target:"_blank",href:t==null?void 0:t.permalink,children:n("View")})}];return e.jsx(Ri,{menu:{items:E},onOpenChange:(D,v)=>{(v.source==="trigger"||D)&&c(D)},open:l,placement:"bottomRight",trigger:["click"],overlayClassName:"sg-confirm-dropdown",children:e.jsx($,{icon:e.jsx(Bi,{})})})}const{Text:Ze}=ae,pi=a.createContext({}),Nl=({orderingEnabled:t})=>{const{setActivatorNodeRef:s,listeners:i}=a.useContext(pi);return t?e.jsx($,{type:"text",size:"small",icon:e.jsx(pn,{}),style:{cursor:"move"},ref:s,...i}):e.jsx($,{type:"text",size:"small",icon:e.jsx(pn,{}),disabled:!0})},Pl=t=>{const{attributes:s,listeners:i,setNodeRef:l,setActivatorNodeRef:c,transform:r,transition:f,isDragging:x}=Ml({id:t["data-row-key"]}),g={...t.style,transform:Kt.Translate.toString(r),transition:f,...x?{position:"relative",zIndex:9999}:{}},y=a.useMemo(()=>({setActivatorNodeRef:c,listeners:i}),[c,i]);return e.jsx(pi.Provider,{value:y,children:e.jsx("tr",{...t,ref:l,style:g,...s})})};function $l({termId:t,docs:s,orderingEnabled:i,authorFilterList:l,tagFilterList:c,onAuthorChange:r,onTagChange:f}){const x=Qe(),g=_e(),[y,m]=a.useState([]),[A,E]=we(),D=p=>{A({params:{action:"knowledge_base_docs_group_order",id:t},data:{order:p}})},v=[{key:"sort",align:"center",width:40,render:()=>e.jsx(Nl,{orderingEnabled:i})},{title:n("Title"),render:p=>{const F=(p==null?void 0:p.post_title)||"",z=(p==null?void 0:p.post_status)||"";let k="";switch(z){case"future":k=n("Scheduled");break;case"draft":k=n("Draft");break;case"pending":k=n("Pending");break;case"private":k=n("Private");break}const S=(p==null?void 0:p.post_author)||0,u=(p==null?void 0:p.post_author_name)||"",o=p==null?void 0:p.tags,w=o==null?void 0:o.length,d=j.toInteger(p==null?void 0:p.analytics_positive)||0,h=j.toInteger(p==null?void 0:p.analytics_negative)||0,b=j.toInteger(p==null?void 0:p.analytics_neutral)||0,T=d+h+b;return e.jsxs(O,{direction:"vertical",children:[e.jsxs("span",{children:[z!=="trash"?e.jsx("a",{href:p==null?void 0:p.edit_guid,children:e.jsx(Ze,{style:{fontWeight:500},children:F})}):e.jsx(Ze,{style:{fontWeight:500},children:F}),k?e.jsxs(Ze,{style:{color:"rgba(0, 0, 0, 0.45)"},children:[""," — ",k]}):null]}),x.xs||x.sm||x.md||x.lg?e.jsxs(e.Fragment,{children:[u?e.jsxs(oe,{gap:"0 8px",wrap:!0,children:[e.jsx(Ze,{children:n("Author:")}),e.jsx("span",{onClick:()=>{const M=[j.toString(S)];S&&!j.isEqual(M,l)&&r(M)},style:{cursor:"pointer"},children:u})]}):null,w?e.jsxs(oe,{gap:"0 8px",wrap:!0,children:[e.jsx(Ze,{children:n("Tags:")}),e.jsx("span",{children:o==null?void 0:o.map((M,C)=>{const P=(M==null?void 0:M.term_id)||0;return e.jsxs(a.Fragment,{children:[e.jsx("span",{onClick:()=>{const q=[j.toString(P)];P&&!j.isEqual(q,c)&&f(q)},style:{cursor:"pointer"},children:M==null?void 0:M.name}),C<w-1&&", "]},P)})})]}):null,x.xs||x.sm||x.md?e.jsxs(e.Fragment,{children:[e.jsxs(oe,{gap:"0 8px",wrap:!0,children:[e.jsx(Ze,{children:n("Views:")}),e.jsx("span",{children:j.toInteger(p==null?void 0:p.analytics_views)||0})]}),e.jsxs(oe,{gap:"0 8px",wrap:!0,children:[e.jsx(Ze,{children:n("Reactions:")}),e.jsx("span",{children:e.jsx(te,{title:e.jsxs(O,{direction:"vertical",size:0,children:[e.jsx("span",{children:n("Positive: %d",d)}),e.jsx("span",{children:n("Negative: %d",h)}),e.jsx("span",{children:n("Neutral: %d",b)})]}),children:T})})]})]}):null,e.jsx(te,{title:e.jsxs(O,{direction:"vertical",align:"center",size:0,children:[e.jsx("span",{children:n("Updated:")}),e.jsx("span",{children:jt(p==null?void 0:p.post_modified_gmt)})]}),children:e.jsx(Ze,{style:{whiteSpace:"nowrap"},children:e.jsxs(oe,{align:"center",gap:4,children:[e.jsx(cs,{}),bt(p==null?void 0:p.post_modified_gmt)]})})}),e.jsx(te,{title:e.jsxs(O,{direction:"vertical",align:"center",size:0,children:[e.jsx("span",{children:n("Created:")}),e.jsx("span",{children:jt(p==null?void 0:p.post_date_gmt)})]}),children:e.jsx(Ze,{style:{color:"rgba(0, 0, 0, 0.45)",whiteSpace:"nowrap"},children:e.jsxs(oe,{align:"center",gap:4,children:[e.jsx(ds,{}),bt(p==null?void 0:p.post_date_gmt)]})})}),x.xs?e.jsx(xs,{record:p}):null]}):null]})}},{title:n("Author"),dataIndex:"post_author_name",render:(p,F)=>{const z=(F==null?void 0:F.post_author)||0;return e.jsx("span",{onClick:()=>{const k=[j.toString(z)];z&&!j.isEqual(k,l)&&r(k)},style:{cursor:"pointer"},children:p})},responsive:["xl"]},{title:n("Tags"),dataIndex:"tags",render:p=>{const F=p==null?void 0:p.length;return F?p==null?void 0:p.map((z,k)=>{const S=(z==null?void 0:z.term_id)||0;return e.jsxs(a.Fragment,{children:[e.jsx("span",{onClick:()=>{const u=[j.toString(S)];S&&!j.isEqual(u,c)&&f(u)},style:{cursor:"pointer"},children:z==null?void 0:z.name}),k<F-1&&", "]},S)}):null},responsive:["xl"]},{title:n("Views"),align:"center",render:p=>e.jsx(te,{title:n("Views"),children:j.toInteger(p==null?void 0:p.analytics_views)||0}),responsive:["lg"]},{title:n("Reactions"),align:"center",render:p=>{const F=j.toInteger(p==null?void 0:p.analytics_positive)||0,z=j.toInteger(p==null?void 0:p.analytics_negative)||0,k=j.toInteger(p==null?void 0:p.analytics_neutral)||0,S=F+z+k;return e.jsx(te,{title:e.jsxs(O,{direction:"vertical",size:0,children:[e.jsx("span",{children:n("Positive: %d",F)}),e.jsx("span",{children:n("Negative: %d",z)}),e.jsx("span",{children:n("Neutral: %d",k)})]}),children:S})},responsive:["lg"]},{title:n("Date"),width:100,render:p=>e.jsxs(O,{direction:"vertical",size:4,children:[e.jsx(te,{title:e.jsxs(O,{direction:"vertical",align:"center",size:0,children:[e.jsx("span",{children:n("Updated:")}),e.jsx("span",{children:jt(p==null?void 0:p.post_modified_gmt)})]}),children:e.jsx(Ze,{style:{whiteSpace:"nowrap"},children:e.jsxs(oe,{align:"center",gap:4,children:[e.jsx(cs,{}),bt(p==null?void 0:p.post_modified_gmt)]})})}),e.jsx(te,{title:e.jsxs(O,{direction:"vertical",align:"center",size:0,children:[e.jsx("span",{children:n("Created:")}),e.jsx("span",{children:jt(p==null?void 0:p.post_date_gmt)})]}),children:e.jsx(Ze,{style:{color:"rgba(0, 0, 0, 0.45)",whiteSpace:"nowrap"},children:e.jsxs(oe,{align:"center",gap:4,children:[e.jsx(ds,{}),bt(p==null?void 0:p.post_date_gmt)]})})})]}),responsive:["xl"]},{title:n("Actions"),width:70,align:"center",render:p=>e.jsx(xs,{record:p}),responsive:["sm"]}],R=({active:p,over:F})=>{if(p.id!==(F==null?void 0:F.id)){const z=y.findIndex(o=>o.key===(p==null?void 0:p.id)),k=y.findIndex(o=>o.key===(F==null?void 0:F.id)),S=nn([...y],z,k),u=S.map(o=>o.key);D(u),m(S)}};return a.useEffect(()=>{m(s)},[s]),a.useEffect(()=>{var S,u,o,w;const{data:p,isLoading:F,isError:z,error:k}=E;g(F?Se():Ce()),!F&&z&&((u=(S=k==null?void 0:k.data)==null?void 0:S.errors)!=null&&u.message)&&Y.error((w=(o=k==null?void 0:k.data)==null?void 0:o.errors)==null?void 0:w.message),!F&&!z&&p&&p!=null&&p.msg&&(p!=null&&p.status?Y.success(p==null?void 0:p.msg):Y.error(p==null?void 0:p.msg))},[E,g]),e.jsx(fl,{modifiers:[Cl],onDragEnd:R,children:e.jsx(Il,{items:y.map(p=>p.key),strategy:El,children:e.jsx(kt,{rowKey:"key",components:{body:{row:Pl}},columns:v,dataSource:y,showHeader:!1,pagination:!1,className:"sg-docs-drag-table"})})})}const{Text:os}=ae,{Search:Wl}=de;var Nn;const An=((Nn=window==null?void 0:window.support_genix_config)==null?void 0:Nn.admin_url)||"",zs=An?j.trimEnd(An,"/")+"/post-new.php?post_type=sgkb-docs":"/#",Rn=[{value:"any",label:n("All Statuses")},{value:"publish",label:n("Published")},{value:"future",label:n("Scheduled")},{value:"draft",label:n("Draft")},{value:"pending",label:n("Pending")},{value:"private",label:n("Private")},{value:"trash",label:n("Trash")}],ql=[{value:"0",label:n("All Agents")}],Hl=[{value:"0",label:n("All Categories")}],Yl=[{value:"0",label:n("All Tags")}],Ls=(t,s="")=>(t=j.cloneDeep(t),t=j.filter(t,({value:i})=>i!=="0"),s&&t.unshift({value:"",label:s}),t),ns=(t,s,i,l,c)=>e.jsx(G,{children:e.jsx(_,{span:24,style:{padding:"4px 0"},children:e.jsxs(G,{gutter:8,wrap:!1,children:[e.jsx(_,{flex:"none",children:e.jsx(os,{children:1<((t==null?void 0:t.length)||0)?l:c})}),e.jsx(_,{flex:"auto",children:e.jsx(oe,{gap:"4px 8px",wrap:!0,children:t==null?void 0:t.map(r=>{var f;return e.jsx(Me,{closeIcon:!0,onClose:()=>{i(j.without(t,r))},style:{margin:0},children:((f=s==null?void 0:s.find(x=>x.value===r))==null?void 0:f.label)||r},r)})})})]})})});function Ul({onViewChange:t}){const s=Qe(),i=Xs(),l=Ks(),[c,r]=a.useState(!1),[f,x]=a.useState(0),[g,y]=a.useState([]),[m,A]=a.useState(l("status","any","docs")),[E,D]=a.useState(l("category","","docs",[],I=>I&&(I==null?void 0:I.split(","))||[])),[v,R]=a.useState(l("tag","","docs",[],I=>I&&(I==null?void 0:I.split(","))||[])),[p,F]=a.useState(l("author","","docs",[],I=>I&&(I==null?void 0:I.split(","))||[])),[z,k]=a.useState(l("search","","docs")),[S,u]=a.useState(l("search","","docs")),[o,w]=a.useState(l("hide-empty","N","docs")),[d,h]=a.useState(ql),[b,T]=a.useState(Hl),[M,C]=a.useState(Yl),P=he({action:"knowledge_base_docs_group_data",status:m,category:E,tag:v,author:p,search:z,hide_empty:o}),q=he({action:"knowledge_base_author_data_for_select",select_all:!0}),B=he({action:"knowledge_base_category_data_for_select",select_all:!0}),W=he({action:"knowledge_base_tag_data_for_select",select_all:!0}),K=I=>{A(I),i("status",I,"docs")},X=I=>{w(I),i("hide-empty",I,"docs")},Z=I=>{I=(I==null?void 0:I.trim())||"",k(I),u(I),i("search",I,"docs")},V=I=>{D(I),i("category",(I==null?void 0:I.join(","))||"","docs")},ee=I=>{R(I),i("tag",(I==null?void 0:I.join(","))||"","docs")},se=I=>{F(I),i("agent",(I==null?void 0:I.join(","))||"","docs")},ue=()=>{P.refetch()},U=()=>{K("any"),Z(""),V([]),ee([]),se([]),X("N")},Q=()=>{let I=!0;return I&&(I=m==="any"),I&&(I=z===""),I&&(I=!(E!=null&&E.length)),I&&(I=!(v!=null&&v.length)),I&&(I=!(p!=null&&p.length)),I&&(I=o==="N"),I},ne=()=>{let I=!0;return I&&(I=m==="any"),I&&(I=z===""),I&&(I=!(v!=null&&v.length)),I&&(I=!(p!=null&&p.length)),I};return a.useEffect(()=>{var re,pe,fe,me;const{data:I,isFetching:J,isError:H,error:ie}=P;!J&&H&&Y.error((pe=(re=ie==null?void 0:ie.data)==null?void 0:re.errors)==null?void 0:pe.message),!J&&!H&&I&&(y((fe=I==null?void 0:I.data)==null?void 0:fe.result),x(((me=I==null?void 0:I.data)==null?void 0:me.total)||0))},[P]),a.useEffect(()=>{var re,pe,fe,me;const{data:I,isFetching:J,isError:H,error:ie}=q;!J&&H&&Y.error((pe=(re=ie==null?void 0:ie.data)==null?void 0:re.errors)==null?void 0:pe.message),!J&&!H&&I&&I!=null&&I.status&&(fe=I==null?void 0:I.data)!=null&&fe.result&&h((me=I==null?void 0:I.data)==null?void 0:me.result)},[q]),a.useEffect(()=>{var re,pe,fe,me;const{data:I,isFetching:J,isError:H,error:ie}=B;if(!J&&H&&Y.error((pe=(re=ie==null?void 0:ie.data)==null?void 0:re.errors)==null?void 0:pe.message),!J&&!H&&I&&I!=null&&I.status&&(fe=I==null?void 0:I.data)!=null&&fe.result){const et=((me=I==null?void 0:I.data)==null?void 0:me.result)||[];T([...et,{value:"999999",label:n("Uncategorized")}])}},[B]),a.useEffect(()=>{var re,pe,fe,me;const{data:I,isFetching:J,isError:H,error:ie}=W;r(J),!J&&H&&Y.error((pe=(re=ie==null?void 0:ie.data)==null?void 0:re.errors)==null?void 0:pe.message),!J&&!H&&I&&I!=null&&I.status&&(fe=I==null?void 0:I.data)!=null&&fe.result&&C((me=I==null?void 0:I.data)==null?void 0:me.result)},[W]),e.jsxs(e.Fragment,{children:[e.jsx(G,{children:e.jsx(_,{span:24,children:e.jsx(Hn,{tabBarExtraContent:e.jsxs(O,{children:[e.jsx($,{type:"primary",icon:e.jsx(yt,{}),onClick:ue,ghost:!0}),s!=null&&s.lg||s!=null&&s.xl||s!=null&&s.xxl?e.jsx($,{type:"primary",icon:e.jsx(lt,{}),href:zs,children:n("Add Docs")}):e.jsx($,{type:"primary",icon:e.jsx(lt,{}),href:zs})]}),items:[{key:"main",label:n("All Docs"),icon:e.jsx(Yn,{})}],activeKey:"main",defaultActiveKey:"main",animated:!1,style:{margin:"0 0 16px 0"}})})}),e.jsx(G,{children:e.jsx(_,{span:24,children:e.jsxs(Re,{size:"small",styles:{body:{background:"#fafafa",padding:"8px 12px"}},style:{margin:"0 0 32px 0"},children:[e.jsxs(G,{gutter:8,align:"middle",children:[e.jsx(_,{xs:{order:1},lg:{order:1},style:{paddingTop:"4px",paddingBottom:"4px"},children:e.jsx(ge,{value:m,defaultValue:"any",onChange:K,options:Rn,style:{width:"auto",minWidth:"150px"}})}),e.jsx(_,{xs:{order:3},lg:{order:2},style:{paddingTop:"4px",paddingBottom:"4px"},children:e.jsx($,{icon:e.jsx(zi,{}),onClick:()=>{t("list")},children:n("List View")})}),e.jsx(_,{xs:{order:3},lg:{order:2},style:{paddingTop:"4px",paddingBottom:"4px"},children:e.jsxs(O,{align:"center",children:[e.jsx(Ae,{size:"small",value:o==="Y",onChange:()=>{X(o==="Y"?"N":"Y")}}),e.jsx(os,{onClick:()=>{X(o==="Y"?"N":"Y")},style:{cursor:"pointer"},children:n("Hide Empty")})]})}),e.jsx(at,{showOn:["lg","xl","xxl"],children:e.jsx(_,{lg:{order:3},flex:"auto"})}),e.jsx(_,{xs:{order:2},lg:{order:4},style:{paddingTop:"4px",paddingBottom:"4px"},children:e.jsx(Wl,{enterButton:!0,allowClear:!0,value:S,onChange:I=>{var J;return u(((J=I==null?void 0:I.target)==null?void 0:J.value)||"")},defaultValue:z,placeholder:n("Search keyword"),onSearch:Z})})]}),e.jsx(Je,{style:{margin:"8px 0"}}),e.jsxs(G,{gutter:8,align:"middle",children:[e.jsx(_,{style:{paddingTop:"4px",paddingBottom:"4px"},children:e.jsx(ge,{allowClear:!0,mode:"multiple",showSearch:!1,value:E,defaultValue:[],onChange:V,options:Ls(b),maxTagCount:0,placeholder:n("All Categories"),maxTagPlaceholder:I=>{const J=(I==null?void 0:I.length)||0;return 1<J?n("%d Categories",J||0):n("%d Category",J||0)},style:{width:"auto",minWidth:"150px"},className:"sg-multiple-select"})}),e.jsx(_,{style:{paddingTop:"4px",paddingBottom:"4px"},children:e.jsx(ge,{allowClear:!0,mode:"multiple",showSearch:!1,value:v,defaultValue:[],onChange:ee,options:Ls(M),maxTagCount:0,placeholder:n("All Tags"),maxTagPlaceholder:I=>{const J=(I==null?void 0:I.length)||0;return 1<J?n("%d Tags",J||0):n("%d Tag",J||0)},style:{width:"auto",minWidth:"130px"},className:"sg-multiple-select"})}),e.jsx(_,{style:{paddingTop:"4px",paddingBottom:"4px"},children:e.jsx(ge,{allowClear:!0,mode:"multiple",showSearch:!1,value:p,defaultValue:[],onChange:se,options:Ls(d),maxTagCount:0,placeholder:n("All Authors"),maxTagPlaceholder:I=>{const J=(I==null?void 0:I.length)||0;return 1<J?n("%d Authors",J||0):n("%d Author",J||0)},style:{width:"auto",minWidth:"140px"},className:"sg-multiple-select"})}),e.jsx(at,{showOn:["lg","xl","xxl"],children:e.jsx(_,{flex:"auto"})}),e.jsx(_,{style:{paddingTop:"4px",paddingBottom:"4px"},children:e.jsx($,{icon:e.jsx(vt,{}),color:"danger",variant:"outlined",onClick:U,disabled:Q(),children:n("Reset Filters")})})]}),m!=="any"||!j.isEmpty(E)||!j.isEmpty(v)||!j.isEmpty(p)?e.jsxs(e.Fragment,{children:[e.jsx(Je,{style:{margin:"8px 0"}}),e.jsxs(oe,{gap:"0 16px",wrap:!0,children:[m!=="any"?ns([m],Rn,()=>{K("any")},n("Statuses:"),n("Status:")):null,j.isEmpty(E)?null:ns(E,b,V,n("Categories:"),n("Category:")),j.isEmpty(v)?null:ns(v,M,ee,n("Tags:"),n("Tag:")),j.isEmpty(p)?null:ns(p,d,se,n("Authors:"),n("Author:"))]})]}):null]})})}),f?e.jsx(G,{gutter:16,children:e.jsx(_,{span:24,children:g==null?void 0:g.map((I,J)=>{const H=(I==null?void 0:I.term_id)||0,ie=(I==null?void 0:I.docs)||[],re=(ie==null?void 0:ie.length)||0;return e.jsx(js,{items:[{key:H,label:e.jsxs(O,{children:[H?e.jsx(os,{style:{fontWeight:500},children:(I==null?void 0:I.name)||n("Unnamed")}):e.jsxs(O,{size:4,children:[e.jsx(os,{style:{fontWeight:500},children:(I==null?void 0:I.name)||n("Unnamed")}),e.jsx(te,{title:n("These are docs that have not yet been categorized."),children:e.jsx(ms,{style:{color:"rgba(0, 0, 0, 0.45)"}})})]}),e.jsx(Gs,{className:"site-badge-count-109",count:n("%d Docs",re),style:{backgroundColor:"#f6ffed",borderColor:"#b7eb8f",color:"#389e0d"}})]}),children:e.jsx($l,{termId:H,docs:ie,orderingEnabled:ne(),authorFilterList:p,tagFilterList:v,onAuthorChange:se,onTagChange:ee}),extra:e.jsx($,{href:zs+`&post_cat=${H}`,icon:e.jsx(lt,{}),size:"small",onClick:pe=>{pe.stopPropagation()},children:n("Add Docs")})}],defaultActiveKey:J?void 0:H,style:{borderColor:"#f0f0f0",marginTop:J?"32px":0},styles:{body:{padding:0}},className:"sg-docs-group-collapse"},H)})})}):e.jsx(G,{children:e.jsx(_,{span:24,children:e.jsx(Re,{size:"small",children:e.jsx(ct,{spinning:c,style:{maxHeight:"unset"},children:e.jsx(xn,{image:xn.PRESENTED_IMAGE_SIMPLE})})})})})]})}const{Text:Ke}=ae;function Gl({data:t,total:s,limit:i,page:l,onPageChange:c,onSizeChange:r,rowSelection:f,bulkAction:x,setBulkAction:g,bulkActionIds:y,onEditClick:m,isLoading:A,resetBulkAction:E,handleSort:D,bulkActionList:v,authorFilterList:R,categoryFilterList:p,tagFilterList:F,onAuthorChange:z,onCategoryChange:k,onTagChange:S}){const u=Qe(),o=_e(),[w,d]=we(),h=()=>{let C="";x==="edit"?m():x==="trash"?C="knowledge_base_docs_trash_items":x==="restore"?C="knowledge_base_docs_restore_items":x==="remove"&&(C="knowledge_base_docs_delete_items"),C&&w({params:{action:C,ids:y}})},b=(C,P,q,{action:B})=>{B==="sort"&&D(q)},T=[{title:n("Title"),render:C=>{const P=(C==null?void 0:C.post_title)||"",q=(C==null?void 0:C.post_status)||"";let B="";switch(q){case"future":B=n("Scheduled");break;case"draft":B=n("Draft");break;case"pending":B=n("Pending");break;case"private":B=n("Private");break}const W=(C==null?void 0:C.post_author)||0,K=(C==null?void 0:C.post_author_name)||"",X=C==null?void 0:C.categories,Z=X==null?void 0:X.length,V=C==null?void 0:C.tags,ee=V==null?void 0:V.length,se=j.toInteger(C==null?void 0:C.analytics_positive)||0,ue=j.toInteger(C==null?void 0:C.analytics_negative)||0,U=j.toInteger(C==null?void 0:C.analytics_neutral)||0,Q=se+ue+U;return e.jsxs(O,{direction:"vertical",children:[e.jsxs("span",{children:[q!=="trash"?e.jsx("a",{href:C==null?void 0:C.edit_guid,children:e.jsx(Ke,{style:{fontWeight:500},children:P})}):e.jsx(Ke,{style:{fontWeight:500},children:P}),B?e.jsxs(Ke,{style:{color:"rgba(0, 0, 0, 0.45)"},children:[""," — ",B]}):null]}),u.xs||u.sm||u.md||u.lg?e.jsxs(e.Fragment,{children:[K?e.jsxs(oe,{gap:"0 8px",wrap:!0,children:[e.jsx(Ke,{children:n("Author:")}),e.jsx("span",{onClick:()=>{const ne=[j.toString(W)];W&&!j.isEqual(ne,R)&&z(ne)},style:{cursor:"pointer"},children:K})]}):null,Z?e.jsxs(oe,{gap:"0 8px",wrap:!0,children:[e.jsx(Ke,{children:n("Categories:")}),e.jsx("span",{children:X==null?void 0:X.map((ne,I)=>{const J=(ne==null?void 0:ne.term_id)||0;return e.jsxs(a.Fragment,{children:[e.jsx("span",{onClick:()=>{const H=[j.toString(J)];J&&!j.isEqual(H,p)&&k(H)},style:{cursor:"pointer"},children:ne==null?void 0:ne.name}),I<Z-1&&", "]},J)})})]}):null,ee?e.jsxs(oe,{gap:"0 8px",wrap:!0,children:[e.jsx(Ke,{children:n("Tags:")}),e.jsx("span",{children:V==null?void 0:V.map((ne,I)=>{const J=(ne==null?void 0:ne.term_id)||0;return e.jsxs(a.Fragment,{children:[e.jsx("span",{onClick:()=>{const H=[j.toString(J)];J&&!j.isEqual(H,F)&&S(H)},style:{cursor:"pointer"},children:ne==null?void 0:ne.name}),I<ee-1&&", "]},J)})})]}):null,u.xs||u.sm||u.md?e.jsxs(e.Fragment,{children:[e.jsxs(oe,{gap:"0 8px",wrap:!0,children:[e.jsx(Ke,{children:n("Views:")}),e.jsx("span",{children:j.toInteger(C==null?void 0:C.analytics_views)||0})]}),e.jsxs(oe,{gap:"0 8px",wrap:!0,children:[e.jsx(Ke,{children:n("Reactions:")}),e.jsx("span",{children:e.jsx(te,{title:e.jsxs(O,{direction:"vertical",size:0,children:[e.jsx("span",{children:n("Positive: %d",se)}),e.jsx("span",{children:n("Negative: %d",ue)}),e.jsx("span",{children:n("Neutral: %d",U)})]}),children:Q})})]})]}):null,e.jsx(te,{title:e.jsxs(O,{direction:"vertical",align:"center",size:0,children:[e.jsx("span",{children:n("Updated:")}),e.jsx("span",{children:jt(C==null?void 0:C.post_modified_gmt)})]}),children:e.jsx(Ke,{style:{whiteSpace:"nowrap"},children:e.jsxs(oe,{align:"center",gap:4,children:[e.jsx(cs,{}),bt(C==null?void 0:C.post_modified_gmt)]})})}),e.jsx(te,{title:e.jsxs(O,{direction:"vertical",align:"center",size:0,children:[e.jsx("span",{children:n("Created:")}),e.jsx("span",{children:jt(C==null?void 0:C.post_date_gmt)})]}),children:e.jsx(Ke,{style:{color:"rgba(0, 0, 0, 0.45)",whiteSpace:"nowrap"},children:e.jsxs(oe,{align:"center",gap:4,children:[e.jsx(ds,{}),bt(C==null?void 0:C.post_date_gmt)]})})}),u.xs?e.jsx(xs,{record:C,resetBulkAction:E}):null]}):null]})}},{title:n("Author"),dataIndex:"post_author_name",render:(C,P)=>{const q=(P==null?void 0:P.post_author)||0;return e.jsx("span",{onClick:()=>{const B=[j.toString(q)];q&&!j.isEqual(B,R)&&z(B)},style:{cursor:"pointer"},children:C})},responsive:["xl"]},{title:n("Categories"),dataIndex:"categories",render:C=>{const P=C==null?void 0:C.length;return P?C==null?void 0:C.map((q,B)=>{const W=(q==null?void 0:q.term_id)||0;return e.jsxs(a.Fragment,{children:[e.jsx("span",{onClick:()=>{const K=[j.toString(W)];W&&!j.isEqual(K,p)&&k(K)},style:{cursor:"pointer"},children:q==null?void 0:q.name}),B<P-1&&", "]},W)}):null},responsive:["xl"]},{title:n("Tags"),dataIndex:"tags",render:C=>{const P=C==null?void 0:C.length;return P?C==null?void 0:C.map((q,B)=>{const W=(q==null?void 0:q.term_id)||0;return e.jsxs(a.Fragment,{children:[e.jsx("span",{onClick:()=>{const K=[j.toString(W)];W&&!j.isEqual(K,F)&&S(K)},style:{cursor:"pointer"},children:q==null?void 0:q.name}),B<P-1&&", "]},W)}):null},responsive:["xl"]},{title:n("Views"),align:"center",render:C=>j.toInteger(C==null?void 0:C.analytics_views)||0,responsive:["lg"]},{title:n("Reactions"),align:"center",render:C=>{const P=j.toInteger(C==null?void 0:C.analytics_positive)||0,q=j.toInteger(C==null?void 0:C.analytics_negative)||0,B=j.toInteger(C==null?void 0:C.analytics_neutral)||0,W=P+q+B;return e.jsx(te,{title:e.jsxs(O,{direction:"vertical",size:0,children:[e.jsx("span",{children:n("Positive: %d",P)}),e.jsx("span",{children:n("Negative: %d",q)}),e.jsx("span",{children:n("Neutral: %d",B)})]}),children:W})},responsive:["lg"]},{title:n("Date"),width:100,render:C=>e.jsxs(O,{direction:"vertical",size:4,children:[e.jsx(te,{title:e.jsxs(O,{direction:"vertical",align:"center",size:0,children:[e.jsx("span",{children:n("Updated:")}),e.jsx("span",{children:jt(C==null?void 0:C.post_modified_gmt)})]}),children:e.jsx(Ke,{style:{whiteSpace:"nowrap"},children:e.jsxs(oe,{align:"center",gap:4,children:[e.jsx(cs,{}),bt(C==null?void 0:C.post_modified_gmt)]})})}),e.jsx(te,{title:e.jsxs(O,{direction:"vertical",align:"center",size:0,children:[e.jsx("span",{children:n("Created:")}),e.jsx("span",{children:jt(C==null?void 0:C.post_date_gmt)})]}),children:e.jsx(Ke,{style:{color:"rgba(0, 0, 0, 0.45)",whiteSpace:"nowrap"},children:e.jsxs(oe,{align:"center",gap:4,children:[e.jsx(ds,{}),bt(C==null?void 0:C.post_date_gmt)]})})})]}),responsive:["xl"]},{title:n("Actions"),width:70,align:"center",render:C=>e.jsx(xs,{record:C,resetBulkAction:E}),responsive:["sm"]}],M=()=>{const C=s?(l-1)*i+1:0,P=j.min([C+i-1,s]),q=n("Showing %1$d - %2$d of %3$d",C,P,s);return e.jsxs(G,{gutter:16,align:"middle",justify:"space-between",children:[e.jsx(_,{style:{marginTop:"4px",marginBottom:"4px"},children:e.jsxs(G,{align:"middle",gutter:8,children:[e.jsx(_,{children:e.jsx(ge,{value:x,style:{width:140},onChange:B=>g(B),options:v,disabled:!(y!=null&&y.length)})}),e.jsx(_,{children:e.jsx(De,{action:x,onConfirm:()=>h(),children:e.jsx($,{type:"primary",disabled:!x,onClick:()=>{x==="edit"&&h()},children:n("Apply")})})})]})}),e.jsx(_,{style:{marginTop:"4px",marginBottom:"4px"},children:q})]})};return a.useEffect(()=>{var W,K,X,Z;const{data:C,isLoading:P,isError:q,error:B}=d;o(P?Se():Ce()),!P&&q&&((K=(W=B==null?void 0:B.data)==null?void 0:W.errors)!=null&&K.message)&&Y.error((Z=(X=B==null?void 0:B.data)==null?void 0:X.errors)==null?void 0:Z.message),!P&&!q&&C&&(C!=null&&C.msg&&(C!=null&&C.status?Y.success(C==null?void 0:C.msg):Y.error(C==null?void 0:C.msg)),C!=null&&C.status&&E())},[d,E,o]),e.jsx(kt,{rowKey:C=>C==null?void 0:C.ID,rowSelection:f,columns:T,dataSource:t,footer:M,loading:A,onChange:b,pagination:{total:s,pageSize:i,current:l,onChange:c,onShowSizeChange:r,showSizeChanger:s>10,style:{marginBottom:0}},className:"sg-tickets-table"})}const{Text:Kl}=ae,{Search:Xl}=de;var Pn;const Bn=((Pn=window==null?void 0:window.support_genix_config)==null?void 0:Pn.admin_url)||"",zn=Bn?j.trimEnd(Bn,"/")+"/post-new.php?post_type=sgkb-docs":"/#",Ln=[{value:"any",label:n("All Statuses")},{value:"publish",label:n("Published")},{value:"future",label:n("Scheduled")},{value:"draft",label:n("Draft")},{value:"pending",label:n("Pending")},{value:"private",label:n("Private")},{value:"trash",label:n("Trash")}],Jl=[{value:"",label:n("Bulk Actions")},{value:"trash",label:n("Move to Trash")},{value:"restore",label:n("Restore")},{value:"remove",label:n("Delete")}],Ql=[{value:"0",label:n("All Agents")}],Zl=[{value:"0",label:n("All Categories")}],Vl=[{value:"0",label:n("All Tags")}],Ms=(t,s="")=>(t=j.cloneDeep(t),t=j.filter(t,({value:i})=>i!=="0"),s&&t.unshift({value:"",label:s}),t),is=(t,s,i,l,c)=>e.jsx(G,{children:e.jsx(_,{span:24,style:{padding:"4px 0"},children:e.jsxs(G,{gutter:8,wrap:!1,children:[e.jsx(_,{flex:"none",children:e.jsx(Kl,{children:1<((t==null?void 0:t.length)||0)?l:c})}),e.jsx(_,{flex:"auto",children:e.jsx(oe,{gap:"4px 8px",wrap:!0,children:t==null?void 0:t.map(r=>{var f;return e.jsx(Me,{closeIcon:!0,onClose:()=>{i(j.without(t,r))},style:{margin:0},children:((f=s==null?void 0:s.find(x=>x.value===r))==null?void 0:f.label)||r},r)})})})]})})});function ea({onViewChange:t}){const s=Qe(),i=Xs(),l=Ks(),[c,r]=a.useState(0),[f,x]=a.useState([]),[g,y]=a.useState(l("status","any","docs")),[m,A]=a.useState(l("category","","docs",[],L=>L&&(L==null?void 0:L.split(","))||[])),[E,D]=a.useState(l("tag","","docs",[],L=>L&&(L==null?void 0:L.split(","))||[])),[v,R]=a.useState(l("author","","docs",[],L=>L&&(L==null?void 0:L.split(","))||[])),[p,F]=a.useState(l("limit",20,"docs")),[z,k]=a.useState(l("page",1,"docs")),[S,u]=a.useState(l("sort","date-desc","docs")),[o,w]=a.useState(l("search","","docs")),[d,h]=a.useState(l("search","","docs")),[b,T]=a.useState(Ql),[M,C]=a.useState(Zl),[P,q]=a.useState(Vl),[B,W]=a.useState(""),[K,X]=a.useState([]),Z=he({action:"knowledge_base_docs_data",status:g,category:m,tag:E,author:v,search:o,limit:p,page:z,sort:S||"date-desc"}),V=he({action:"knowledge_base_author_data_for_select",select_all:!0}),ee=he({action:"knowledge_base_category_data_for_select",select_all:!0}),se=he({action:"knowledge_base_tag_data_for_select",select_all:!0}),ue=L=>{k(1),y(L),i("page",1,"docs"),i("status",L,"docs"),H()},U=L=>{L=(L==null?void 0:L.trim())||"",k(1),w(L),h(L),i("page",1,"docs"),i("search",L,"docs"),H()},Q=L=>{k(1),A(L),i("page",1,"docs"),i("category",(L==null?void 0:L.join(","))||"","docs"),H()},ne=L=>{k(1),D(L),i("page",1,"docs"),i("tag",(L==null?void 0:L.join(","))||"","docs"),H()},I=L=>{k(1),R(L),i("page",1,"docs"),i("agent",(L==null?void 0:L.join(","))||"","docs"),H()},J=L=>{k(1),u(L),i("page",1,"docs"),i("sort",L,"docs"),H()},H=a.useCallback(()=>{W(""),X([])},[]),ie=L=>{k(L),i("page",L,"docs"),H()},re=(L,le)=>{F(le),i("limit",le,"docs"),H()},pe={selectedRowKeys:K,onChange:L=>{L!=null&&L.length||H(),X(L)}},fe=()=>{Z.refetch(),H()},me=()=>{ue("any"),U(""),Q([]),ne([]),I([]),J("date-desc"),H()},et=()=>{let L=[];return g==="trash"?L=["trash"]:L=["restore","remove"],j.filter(Jl,function(xe){return!j.includes(L,xe.value||"")})},Vt=()=>{let L=!0;return L&&(L=g==="any"),L&&(L=o===""),L&&(L=!(m!=null&&m.length)),L&&(L=!(E!=null&&E.length)),L&&(L=!(v!=null&&v.length)),L&&(L=S==="date-desc"),L};return a.useEffect(()=>{if(c){const L=j.ceil(c/p);z>L&&ie(L)}},[c,p]),a.useEffect(()=>{var Te,Be,ze,Ne;const{data:L,isFetching:le,isError:xe,error:je}=Z;!le&&xe&&Y.error((Be=(Te=je==null?void 0:je.data)==null?void 0:Te.errors)==null?void 0:Be.message),!le&&!xe&&L&&(x((ze=L==null?void 0:L.data)==null?void 0:ze.result),r((Ne=L==null?void 0:L.data)==null?void 0:Ne.total))},[Z]),a.useEffect(()=>{var Te,Be,ze,Ne;const{data:L,isFetching:le,isError:xe,error:je}=V;!le&&xe&&Y.error((Be=(Te=je==null?void 0:je.data)==null?void 0:Te.errors)==null?void 0:Be.message),!le&&!xe&&L&&L!=null&&L.status&&(ze=L==null?void 0:L.data)!=null&&ze.result&&T((Ne=L==null?void 0:L.data)==null?void 0:Ne.result)},[V]),a.useEffect(()=>{var Te,Be,ze,Ne;const{data:L,isFetching:le,isError:xe,error:je}=ee;if(!le&&xe&&Y.error((Be=(Te=je==null?void 0:je.data)==null?void 0:Te.errors)==null?void 0:Be.message),!le&&!xe&&L&&L!=null&&L.status&&(ze=L==null?void 0:L.data)!=null&&ze.result){const Ss=((Ne=L==null?void 0:L.data)==null?void 0:Ne.result)||[];C([...Ss,{value:"999999",label:n("Uncategorized")}])}},[ee]),a.useEffect(()=>{var Te,Be,ze,Ne;const{data:L,isFetching:le,isError:xe,error:je}=se;!le&&xe&&Y.error((Be=(Te=je==null?void 0:je.data)==null?void 0:Te.errors)==null?void 0:Be.message),!le&&!xe&&L&&L!=null&&L.status&&(ze=L==null?void 0:L.data)!=null&&ze.result&&q((Ne=L==null?void 0:L.data)==null?void 0:Ne.result)},[se]),e.jsxs(e.Fragment,{children:[e.jsx(G,{children:e.jsx(_,{span:24,children:e.jsx(Hn,{tabBarExtraContent:e.jsxs(O,{children:[e.jsx($,{type:"primary",icon:e.jsx(yt,{}),onClick:fe,ghost:!0}),s!=null&&s.lg||s!=null&&s.xl||s!=null&&s.xxl?e.jsx($,{type:"primary",icon:e.jsx(lt,{}),href:zn,children:n("Add Docs")}):e.jsx($,{type:"primary",icon:e.jsx(lt,{}),href:zn})]}),items:[{key:"main",label:n("All Docs"),icon:e.jsx(Yn,{})}],activeKey:"main",defaultActiveKey:"main",animated:!1,style:{margin:"0 0 16px 0"}})})}),e.jsx(G,{children:e.jsx(_,{span:24,children:e.jsxs(Re,{size:"small",styles:{body:{background:"#fafafa",padding:"8px 12px"}},style:{margin:"0 0 32px 0"},children:[e.jsxs(G,{gutter:8,align:"middle",children:[e.jsx(_,{xs:{order:1},lg:{order:1},style:{paddingTop:"4px",paddingBottom:"4px"},children:e.jsx(ge,{value:g,defaultValue:"any",onChange:ue,options:Ln,style:{width:"auto",minWidth:"150px"}})}),e.jsx(_,{xs:{order:3},lg:{order:2},style:{paddingTop:"4px",paddingBottom:"4px"},children:e.jsx($,{icon:e.jsx(Li,{}),onClick:()=>{t("group")},children:n("Group View")})}),e.jsx(at,{showOn:["lg","xl","xxl"],children:e.jsx(_,{lg:{order:3},flex:"auto"})}),e.jsx(_,{xs:{order:2},lg:{order:4},style:{paddingTop:"4px",paddingBottom:"4px"},children:e.jsx(Xl,{enterButton:!0,allowClear:!0,value:d,onChange:L=>{var le;return h(((le=L==null?void 0:L.target)==null?void 0:le.value)||"")},defaultValue:o,placeholder:n("Search keyword"),onSearch:U})})]}),e.jsx(Je,{style:{margin:"8px 0"}}),e.jsxs(G,{gutter:8,align:"middle",children:[e.jsx(_,{style:{paddingTop:"4px",paddingBottom:"4px"},children:e.jsx(ge,{allowClear:!0,mode:"multiple",showSearch:!1,value:m,defaultValue:[],onChange:Q,options:Ms(M),maxTagCount:0,placeholder:n("All Categories"),maxTagPlaceholder:L=>{const le=(L==null?void 0:L.length)||0;return 1<le?n("%d Categories",le||0):n("%d Category",le||0)},style:{width:"auto",minWidth:"150px"},className:"sg-multiple-select"})}),e.jsx(_,{style:{paddingTop:"4px",paddingBottom:"4px"},children:e.jsx(ge,{allowClear:!0,mode:"multiple",showSearch:!1,value:E,defaultValue:[],onChange:ne,options:Ms(P),maxTagCount:0,placeholder:n("All Tags"),maxTagPlaceholder:L=>{const le=(L==null?void 0:L.length)||0;return 1<le?n("%d Tags",le||0):n("%d Tag",le||0)},style:{width:"auto",minWidth:"130px"},className:"sg-multiple-select"})}),e.jsx(_,{style:{paddingTop:"4px",paddingBottom:"4px"},children:e.jsx(ge,{allowClear:!0,mode:"multiple",showSearch:!1,value:v,defaultValue:[],onChange:I,options:Ms(b),maxTagCount:0,placeholder:n("All Authors"),maxTagPlaceholder:L=>{const le=(L==null?void 0:L.length)||0;return 1<le?n("%d Authors",le||0):n("%d Author",le||0)},style:{width:"auto",minWidth:"140px"},className:"sg-multiple-select"})}),e.jsx(_,{style:{paddingTop:"4px",paddingBottom:"4px"},children:e.jsx(ge,{value:S,defaultValue:"date-desc",onChange:J,options:[{value:"date-desc",label:n("Sort: Added Date (Newest First)")},{value:"date-asc",label:n("Sort: Added Date (Oldest First)")},{value:"modified-desc",label:n("Sort: Modified Date (Newest First)")},{value:"modified-asc",label:n("Sort: Modified Date (Oldest First)")}],style:{width:"270px",maxWidth:"100%"}})}),e.jsx(at,{showOn:["lg","xl","xxl"],children:e.jsx(_,{flex:"auto"})}),e.jsx(_,{style:{paddingTop:"4px",paddingBottom:"4px"},children:e.jsx($,{icon:e.jsx(vt,{}),color:"danger",variant:"outlined",onClick:me,disabled:Vt(),children:n("Reset Filters")})})]}),g!=="any"||!j.isEmpty(m)||!j.isEmpty(E)||!j.isEmpty(v)?e.jsxs(e.Fragment,{children:[e.jsx(Je,{style:{margin:"8px 0"}}),e.jsxs(oe,{gap:"0 16px",wrap:!0,children:[g!=="any"?is([g],Ln,()=>{ue("any")},n("Statuses:"),n("Status:")):null,j.isEmpty(m)?null:is(m,M,Q,n("Categories:"),n("Category:")),j.isEmpty(E)?null:is(E,P,ne,n("Tags:"),n("Tag:")),j.isEmpty(v)?null:is(v,b,I,n("Authors:"),n("Author:"))]})]}):null]})})}),e.jsx(Gl,{data:f,total:c,limit:p,page:z,onPageChange:ie,onSizeChange:re,rowSelection:pe,bulkAction:B,setBulkAction:W,bulkActionIds:K,isLoading:Z==null?void 0:Z.isFetching,resetBulkAction:H,sortOrder:S,bulkActionList:et(),authorFilterList:v,categoryFilterList:m,tagFilterList:E,onAuthorChange:I,onCategoryChange:Q,onTagChange:ne})]})}function ta(){const t=Xs(),s=Ks(),[i,l]=a.useState(s("view","group","docs")),c=r=>{l(r),t("view",r,"docs")};return i==="group"?e.jsx(Ul,{onViewChange:c}):e.jsx(ea,{onViewChange:c})}const{Content:sa}=bs;function pa(){var m;const t=Qe(),s=Ct(),[i,l]=a.useState(""),[c,r]=fs(),f=i==="config",x=(m=it(s,"docs",["main"]))==null?void 0:m[0],g=()=>{const A=i||x||"";return A==="analytics"?e.jsx(or,{}):A==="config"?e.jsx(eo,{}):e.jsx(ta,{})},y=()=>{const A=i||x||"";return A==="analytics"?"16px 8px":A==="config"?"0":"8px 16px 16px 16px"};return a.useEffect(()=>{i&&i!=="analytics"&&(c.delete("category"),c.delete("tag"),c.delete("author"),c.delete("date-range")),r(c)},[i,c,r]),a.useEffect(()=>{var A;l((A=it(s,"docs",["main"]))==null?void 0:A[0])},[s]),e.jsx(e.Fragment,{children:e.jsx(bs,{style:{background:"transparent",minHeight:t!=null&&t.wsm?f?"calc(100vh - 315px)":"calc(100vh - 265px)":f?"calc(100vh - 260px)":"calc(100vh - 210px)"},children:e.jsx(sa,{style:{padding:y()},children:e.jsx(G,{justify:"space-around",children:e.jsx(_,{span:24,children:g()})})})})})}export{pa as default};
