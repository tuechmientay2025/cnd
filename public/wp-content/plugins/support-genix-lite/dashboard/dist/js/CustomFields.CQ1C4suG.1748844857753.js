import{u as de,P as ue,s as me,b as he,c as Se,j as e,t,_ as X,f as ye,Q as Oe,m as Ae}from"../main.aHgQEcd5.1748844857753.js";import{e as Fe,g as Ie,r as h,u as Te,k as ke}from"./vendor.Cii7CkpR.1748844857753.js";import"./toast.D8JcjdRp.1748844857753.js";import{j as R,s as q,b as re,C as p,A as ze,n as ce,o as le,x as ae,q as V,u as Y,w as Re,B as w,a as L,J as Ue,ad as Ye,F as se,d as ie,at as pe,ao as xe,aa as fe,$ as ge,Q as Be,T as _e,Y as De,X as Ne,y as je,f as Le}from"./antd.v1CHGtH-.1748844857753.js";import{A as Q}from"./Actionconfirm.BT5ZL47Y.1748844857753.js";var be={exports:{}};(function(c,F){(function(E,o,m){c.exports=m(),c.exports.default=m()})("slugify",Fe,function(){var E=JSON.parse(`{"$":"dollar","%":"percent","&":"and","<":"less",">":"greater","|":"or","¢":"cent","£":"pound","¤":"currency","¥":"yen","©":"(c)","ª":"a","®":"(r)","º":"o","À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","Æ":"AE","Ç":"C","È":"E","É":"E","Ê":"E","Ë":"E","Ì":"I","Í":"I","Î":"I","Ï":"I","Ð":"D","Ñ":"N","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","Ù":"U","Ú":"U","Û":"U","Ü":"U","Ý":"Y","Þ":"TH","ß":"ss","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","æ":"ae","ç":"c","è":"e","é":"e","ê":"e","ë":"e","ì":"i","í":"i","î":"i","ï":"i","ð":"d","ñ":"n","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","ù":"u","ú":"u","û":"u","ü":"u","ý":"y","þ":"th","ÿ":"y","Ā":"A","ā":"a","Ă":"A","ă":"a","Ą":"A","ą":"a","Ć":"C","ć":"c","Č":"C","č":"c","Ď":"D","ď":"d","Đ":"DJ","đ":"dj","Ē":"E","ē":"e","Ė":"E","ė":"e","Ę":"e","ę":"e","Ě":"E","ě":"e","Ğ":"G","ğ":"g","Ģ":"G","ģ":"g","Ĩ":"I","ĩ":"i","Ī":"i","ī":"i","Į":"I","į":"i","İ":"I","ı":"i","Ķ":"k","ķ":"k","Ļ":"L","ļ":"l","Ľ":"L","ľ":"l","Ł":"L","ł":"l","Ń":"N","ń":"n","Ņ":"N","ņ":"n","Ň":"N","ň":"n","Ō":"O","ō":"o","Ő":"O","ő":"o","Œ":"OE","œ":"oe","Ŕ":"R","ŕ":"r","Ř":"R","ř":"r","Ś":"S","ś":"s","Ş":"S","ş":"s","Š":"S","š":"s","Ţ":"T","ţ":"t","Ť":"T","ť":"t","Ũ":"U","ũ":"u","Ū":"u","ū":"u","Ů":"U","ů":"u","Ű":"U","ű":"u","Ų":"U","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","ź":"z","Ż":"Z","ż":"z","Ž":"Z","ž":"z","Ə":"E","ƒ":"f","Ơ":"O","ơ":"o","Ư":"U","ư":"u","ǈ":"LJ","ǉ":"lj","ǋ":"NJ","ǌ":"nj","Ș":"S","ș":"s","Ț":"T","ț":"t","ə":"e","˚":"o","Ά":"A","Έ":"E","Ή":"H","Ί":"I","Ό":"O","Ύ":"Y","Ώ":"W","ΐ":"i","Α":"A","Β":"B","Γ":"G","Δ":"D","Ε":"E","Ζ":"Z","Η":"H","Θ":"8","Ι":"I","Κ":"K","Λ":"L","Μ":"M","Ν":"N","Ξ":"3","Ο":"O","Π":"P","Ρ":"R","Σ":"S","Τ":"T","Υ":"Y","Φ":"F","Χ":"X","Ψ":"PS","Ω":"W","Ϊ":"I","Ϋ":"Y","ά":"a","έ":"e","ή":"h","ί":"i","ΰ":"y","α":"a","β":"b","γ":"g","δ":"d","ε":"e","ζ":"z","η":"h","θ":"8","ι":"i","κ":"k","λ":"l","μ":"m","ν":"n","ξ":"3","ο":"o","π":"p","ρ":"r","ς":"s","σ":"s","τ":"t","υ":"y","φ":"f","χ":"x","ψ":"ps","ω":"w","ϊ":"i","ϋ":"y","ό":"o","ύ":"y","ώ":"w","Ё":"Yo","Ђ":"DJ","Є":"Ye","І":"I","Ї":"Yi","Ј":"J","Љ":"LJ","Њ":"NJ","Ћ":"C","Џ":"DZ","А":"A","Б":"B","В":"V","Г":"G","Д":"D","Е":"E","Ж":"Zh","З":"Z","И":"I","Й":"J","К":"K","Л":"L","М":"M","Н":"N","О":"O","П":"P","Р":"R","С":"S","Т":"T","У":"U","Ф":"F","Х":"H","Ц":"C","Ч":"Ch","Ш":"Sh","Щ":"Sh","Ъ":"U","Ы":"Y","Ь":"","Э":"E","Ю":"Yu","Я":"Ya","а":"a","б":"b","в":"v","г":"g","д":"d","е":"e","ж":"zh","з":"z","и":"i","й":"j","к":"k","л":"l","м":"m","н":"n","о":"o","п":"p","р":"r","с":"s","т":"t","у":"u","ф":"f","х":"h","ц":"c","ч":"ch","ш":"sh","щ":"sh","ъ":"u","ы":"y","ь":"","э":"e","ю":"yu","я":"ya","ё":"yo","ђ":"dj","є":"ye","і":"i","ї":"yi","ј":"j","љ":"lj","њ":"nj","ћ":"c","ѝ":"u","џ":"dz","Ґ":"G","ґ":"g","Ғ":"GH","ғ":"gh","Қ":"KH","қ":"kh","Ң":"NG","ң":"ng","Ү":"UE","ү":"ue","Ұ":"U","ұ":"u","Һ":"H","һ":"h","Ә":"AE","ә":"ae","Ө":"OE","ө":"oe","Ա":"A","Բ":"B","Գ":"G","Դ":"D","Ե":"E","Զ":"Z","Է":"E'","Ը":"Y'","Թ":"T'","Ժ":"JH","Ի":"I","Լ":"L","Խ":"X","Ծ":"C'","Կ":"K","Հ":"H","Ձ":"D'","Ղ":"GH","Ճ":"TW","Մ":"M","Յ":"Y","Ն":"N","Շ":"SH","Չ":"CH","Պ":"P","Ջ":"J","Ռ":"R'","Ս":"S","Վ":"V","Տ":"T","Ր":"R","Ց":"C","Փ":"P'","Ք":"Q'","Օ":"O''","Ֆ":"F","և":"EV","ء":"a","آ":"aa","أ":"a","ؤ":"u","إ":"i","ئ":"e","ا":"a","ب":"b","ة":"h","ت":"t","ث":"th","ج":"j","ح":"h","خ":"kh","د":"d","ذ":"th","ر":"r","ز":"z","س":"s","ش":"sh","ص":"s","ض":"dh","ط":"t","ظ":"z","ع":"a","غ":"gh","ف":"f","ق":"q","ك":"k","ل":"l","م":"m","ن":"n","ه":"h","و":"w","ى":"a","ي":"y","ً":"an","ٌ":"on","ٍ":"en","َ":"a","ُ":"u","ِ":"e","ْ":"","٠":"0","١":"1","٢":"2","٣":"3","٤":"4","٥":"5","٦":"6","٧":"7","٨":"8","٩":"9","پ":"p","چ":"ch","ژ":"zh","ک":"k","گ":"g","ی":"y","۰":"0","۱":"1","۲":"2","۳":"3","۴":"4","۵":"5","۶":"6","۷":"7","۸":"8","۹":"9","฿":"baht","ა":"a","ბ":"b","გ":"g","დ":"d","ე":"e","ვ":"v","ზ":"z","თ":"t","ი":"i","კ":"k","ლ":"l","მ":"m","ნ":"n","ო":"o","პ":"p","ჟ":"zh","რ":"r","ს":"s","ტ":"t","უ":"u","ფ":"f","ქ":"k","ღ":"gh","ყ":"q","შ":"sh","ჩ":"ch","ც":"ts","ძ":"dz","წ":"ts","ჭ":"ch","ხ":"kh","ჯ":"j","ჰ":"h","Ṣ":"S","ṣ":"s","Ẁ":"W","ẁ":"w","Ẃ":"W","ẃ":"w","Ẅ":"W","ẅ":"w","ẞ":"SS","Ạ":"A","ạ":"a","Ả":"A","ả":"a","Ấ":"A","ấ":"a","Ầ":"A","ầ":"a","Ẩ":"A","ẩ":"a","Ẫ":"A","ẫ":"a","Ậ":"A","ậ":"a","Ắ":"A","ắ":"a","Ằ":"A","ằ":"a","Ẳ":"A","ẳ":"a","Ẵ":"A","ẵ":"a","Ặ":"A","ặ":"a","Ẹ":"E","ẹ":"e","Ẻ":"E","ẻ":"e","Ẽ":"E","ẽ":"e","Ế":"E","ế":"e","Ề":"E","ề":"e","Ể":"E","ể":"e","Ễ":"E","ễ":"e","Ệ":"E","ệ":"e","Ỉ":"I","ỉ":"i","Ị":"I","ị":"i","Ọ":"O","ọ":"o","Ỏ":"O","ỏ":"o","Ố":"O","ố":"o","Ồ":"O","ồ":"o","Ổ":"O","ổ":"o","Ỗ":"O","ỗ":"o","Ộ":"O","ộ":"o","Ớ":"O","ớ":"o","Ờ":"O","ờ":"o","Ở":"O","ở":"o","Ỡ":"O","ỡ":"o","Ợ":"O","ợ":"o","Ụ":"U","ụ":"u","Ủ":"U","ủ":"u","Ứ":"U","ứ":"u","Ừ":"U","ừ":"u","Ử":"U","ử":"u","Ữ":"U","ữ":"u","Ự":"U","ự":"u","Ỳ":"Y","ỳ":"y","Ỵ":"Y","ỵ":"y","Ỷ":"Y","ỷ":"y","Ỹ":"Y","ỹ":"y","–":"-","‘":"'","’":"'","“":"\\"","”":"\\"","„":"\\"","†":"+","•":"*","…":"...","₠":"ecu","₢":"cruzeiro","₣":"french franc","₤":"lira","₥":"mill","₦":"naira","₧":"peseta","₨":"rupee","₩":"won","₪":"new shequel","₫":"dong","€":"euro","₭":"kip","₮":"tugrik","₯":"drachma","₰":"penny","₱":"peso","₲":"guarani","₳":"austral","₴":"hryvnia","₵":"cedi","₸":"kazakhstani tenge","₹":"indian rupee","₺":"turkish lira","₽":"russian ruble","₿":"bitcoin","℠":"sm","™":"tm","∂":"d","∆":"delta","∑":"sum","∞":"infinity","♥":"love","元":"yuan","円":"yen","﷼":"rial","ﻵ":"laa","ﻷ":"laa","ﻹ":"lai","ﻻ":"la"}`),o=JSON.parse('{"bg":{"Й":"Y","Ц":"Ts","Щ":"Sht","Ъ":"A","Ь":"Y","й":"y","ц":"ts","щ":"sht","ъ":"a","ь":"y"},"de":{"Ä":"AE","ä":"ae","Ö":"OE","ö":"oe","Ü":"UE","ü":"ue","ß":"ss","%":"prozent","&":"und","|":"oder","∑":"summe","∞":"unendlich","♥":"liebe"},"es":{"%":"por ciento","&":"y","<":"menor que",">":"mayor que","|":"o","¢":"centavos","£":"libras","¤":"moneda","₣":"francos","∑":"suma","∞":"infinito","♥":"amor"},"fr":{"%":"pourcent","&":"et","<":"plus petit",">":"plus grand","|":"ou","¢":"centime","£":"livre","¤":"devise","₣":"franc","∑":"somme","∞":"infini","♥":"amour"},"pt":{"%":"porcento","&":"e","<":"menor",">":"maior","|":"ou","¢":"centavo","∑":"soma","£":"libra","∞":"infinito","♥":"amor"},"uk":{"И":"Y","и":"y","Й":"Y","й":"y","Ц":"Ts","ц":"ts","Х":"Kh","х":"kh","Щ":"Shch","щ":"shch","Г":"H","г":"h"},"vi":{"Đ":"D","đ":"d"},"da":{"Ø":"OE","ø":"oe","Å":"AA","å":"aa","%":"procent","&":"og","|":"eller","$":"dollar","<":"mindre end",">":"større end"},"nb":{"&":"og","Å":"AA","Æ":"AE","Ø":"OE","å":"aa","æ":"ae","ø":"oe"},"it":{"&":"e"},"nl":{"&":"en"},"sv":{"&":"och","Å":"AA","Ä":"AE","Ö":"OE","å":"aa","ä":"ae","ö":"oe"}}');function m(I,d){if(typeof I!="string")throw new Error("slugify: string argument expected");d=typeof d=="string"?{replacement:d}:d||{};var S=o[d.locale]||{},T=d.replacement===void 0?"-":d.replacement,k=d.trim===void 0?!0:d.trim,j=I.normalize().split("").reduce(function(K,U){var b=S[U];return b===void 0&&(b=E[U]),b===void 0&&(b=U),b===T&&(b=" "),K+b.replace(d.remove||/[^\w\s$*_+~.()'"!\-:@]+/g,"")},"");return d.strict&&(j=j.replace(/[^A-Za-z0-9\s]/g,"")),k&&(j=j.trim()),j=j.replace(/\s+/g,T),d.lower&&(j=j.toLowerCase()),j}return m.extend=function(I){Object.assign(E,I)},m})})(be);var qe=be.exports;const He=Ie(qe);function $e({data:c,isEdit:F,onCloseModal:E,categorySelectList:o}){var G;const m=c?{...c,category_arr:((G=c==null?void 0:c.choose_category)==null?void 0:G.split(","))||["0"],status:(c==null?void 0:c.status)==="A"}:{field_type:"T",form_opts:[],where_to_create:"T",create_for:"B",category_arr:["0"],status:!0},I=de(),[d]=R.useForm(),[S,T]=h.useState(""),[k,j]=h.useState(m==null?void 0:m.field_type),[K,U]=h.useState(m==null?void 0:m.where_to_create),[b,B]=ue(),z=s=>{var g;if(X.has(s,"field_type")&&j(s==null?void 0:s.field_type),X.has(s,"field_label")){const _=He(s==null?void 0:s.field_label,{replacement:"_",lower:!0,strict:!0,trim:!0});d.setFieldValue("field_slug",_)}X.has(s,"where_to_create")&&U(s==null?void 0:s.where_to_create),X.has(s,"category_arr")&&((g=s==null?void 0:s.category_arr)!=null&&g.length||d.setFieldValue("category_arr",["0"]))},y=s=>{var l,u,a,O,A,$,ne;const g=((l=s==null?void 0:s.field_type)==null?void 0:l.trim())||"",_=((u=s==null?void 0:s.fld_option)==null?void 0:u.trim())||"",C=((a=s==null?void 0:s.field_label)==null?void 0:a.trim())||"",v=((O=s==null?void 0:s.field_slug)==null?void 0:O.trim())||"",W=((A=s==null?void 0:s.help_text)==null?void 0:A.trim())||"",D=(s==null?void 0:s.form_opts)||[],H=(($=s==null?void 0:s.where_to_create)==null?void 0:$.trim())||"",te=((ne=s==null?void 0:s.create_for)==null?void 0:ne.trim())||"",i=(s==null?void 0:s.category_arr)||["0"],r=s!=null&&s.status?"A":"I";b({params:{action:F?"custom_field_edit":"custom_field_add",id:m==null?void 0:m.id},data:{field_type:g,fld_option:_,field_label:C,field_slug:v,help_text:W,form_opts:D,where_to_create:H,create_for:te,category_arr:i,status:r}})};return h.useEffect(()=>{var v,W,D,H;const{data:s,isLoading:g,isError:_,error:C}=B;I(g?me():he()),!g&&_&&((W=(v=C==null?void 0:C.data)==null?void 0:v.errors)!=null&&W.message)&&q.error((H=(D=C==null?void 0:C.data)==null?void 0:D.errors)==null?void 0:H.message),!g&&!_&&s&&(s!=null&&s.msg&&(s!=null&&s.status?(T(""),q.success(s==null?void 0:s.msg)):(T(s==null?void 0:s.msg),Se())),s!=null&&s.status&&E())},[B,E,I]),e.jsx(R,{form:d,name:"createCustomField",layout:"vertical",onFinish:y,onValuesChange:z,initialValues:m,autoComplete:"off",children:e.jsxs(re,{gutter:16,children:[S?e.jsx(p,{span:24,children:e.jsx(ze,{message:S,type:"error",showIcon:!0,closable:!0,afterClose:()=>T(""),style:{marginBottom:"24px"}})}):null,e.jsx(p,{span:24,children:e.jsx(R.Item,{label:t("Field Type"),name:"field_type",rules:[{required:!0,message:t("%s is required.",t("Field type"))}],children:e.jsx(ce,{style:{width:"100%"},options:[{value:"T",label:t("Textbox")},{value:"N",label:t("Numeric")},{value:"D",label:t("Date")},{value:"S",label:t("Switch")},{value:"R",label:t("Radio")},{value:"W",label:t("Dropdown")},{value:"E",label:t("Instruction Text")},{value:"U",label:t("URL Input")}]})})}),X.includes(["R","W","E"],k)?e.jsx(p,{span:24,children:e.jsx(R.Item,{label:t("Field Options"),name:"fld_option",rules:[{required:!0,message:t("%s is required.",t("Field label")),whitespace:!0}],tooltip:k==="E"?t("Maximum 255 character."):t("Comma-separated options (example: Option A, Option B, Option C)."),children:e.jsx(le,{})})}):null,e.jsx(p,{span:24,children:e.jsx(R.Item,{label:t("Field Label"),name:"field_label",rules:[{required:!0,message:t("%s is required.",t("Field label")),whitespace:!0}],children:e.jsx(le,{})})}),e.jsx(p,{span:24,children:e.jsx(R.Item,{label:t("Field Slug"),name:"field_slug",rules:[{required:!0,message:t("%s is required.",t("Field slug")),whitespace:!0}],children:e.jsx(le,{})})}),e.jsx(p,{span:24,children:e.jsx(R.Item,{label:t("Placeholder"),name:"help_text",rules:[{whitespace:!0}],children:e.jsx(le,{})})}),e.jsx(p,{span:24,children:e.jsx(R.Item,{label:t("Form Options"),name:"form_opts",htmlFor:null,children:e.jsx(ae.Group,{children:e.jsxs(re,{children:[e.jsx(p,{span:24,children:e.jsx(ae,{value:"is_required",style:{lineHeight:"32px"},children:t("Required Field")})}),e.jsx(p,{span:24,children:e.jsx(ae,{value:"is_half_field",style:{lineHeight:"32px"},children:t("Half Field")})})]})})})}),e.jsx(p,{span:24,children:e.jsx(R.Item,{label:t("Create Where"),name:"where_to_create",htmlFor:null,children:e.jsx(V.Group,{children:e.jsxs(Y,{direction:"vertical",children:[e.jsx(V,{value:"T",children:t("Ticket Form")}),e.jsx(V,{value:"I",children:t("Registration Form")})]})})})}),e.jsx(p,{span:24,children:e.jsx(R.Item,{label:t("Create For"),name:"create_for",htmlFor:null,children:e.jsx(V.Group,{children:e.jsxs(Y,{direction:"vertical",children:[e.jsx(V,{value:"B",children:t("Both (Clients & Admin)")}),e.jsx(V,{value:"A",children:t("Admin Only")})]})})})}),K==="T"?e.jsx(p,{span:24,children:e.jsx(R.Item,{label:t("Choose Category"),name:"category_arr",rules:[{required:!0,message:t("%s is required.",t("Category"))}],children:e.jsx(ce,{allowClear:!0,mode:"multiple",options:o,onSelect:s=>{const g=d.getFieldValue("category_arr"),_=s==="0"?["0"]:g==null?void 0:g.filter(C=>C!=="0");d.setFieldValue("category_arr",_),z({category_arr:_})}})})}):null,e.jsx(p,{span:24,children:e.jsx(R.Item,{label:t("Status"),name:"status",valuePropName:"checked",children:e.jsx(Re,{})})}),e.jsx(p,{span:24,style:{textAlign:"right"},children:e.jsxs(Y,{children:[e.jsx(w,{htmlType:"button",onClick:E,children:t("Cancel")}),e.jsx(w,{type:"primary",htmlType:"submit",loading:B==null?void 0:B.isLoading,children:F?t("Update"):t("Create")})]})})]})})}const{Text:ee}=_e;function Ge({data:c,total:F,limit:E,page:o,onPageChange:m,onSizeChange:I,rowSelection:d,bulkAction:S,setBulkAction:T,bulkActionIds:k,onEditClick:j,isLoading:K,resetBulkAction:U,sortOrder:b,handleSort:B,categorySelectList:z}){const y=ye(),G=de(),[s,g]=ue(),_=(i,r)=>{s({params:{action:"custom_field_order_change",id:i,typ:r}})},C=i=>{s({params:{action:"custom_field_delete_item",id:i}})},v=()=>{let i="";S==="remove"?i="custom_field_delete_items":S==="activate"?i="custom_field_activate_items":S==="deactivate"&&(i="custom_field_deactivate_items"),i&&s({params:{action:i,ids:k}})},W=(i,r,l,{action:u})=>{u==="sort"&&B(l)},D=i=>b===`${i}-asc`?"ascend":b===`${i}-desc`?"descend":null,H=[{title:t("ID"),dataIndex:"id",width:70,sorter:!0,sortDirections:["ascend","descend","ascend"],sortOrder:D("id")},{title:t("Label"),dataIndex:"field_label",sorter:!0,sortDirections:["ascend","descend","ascend"],sortOrder:D("field_label"),render:(i,r)=>{let l="";switch(r==null?void 0:r.field_type){case"T":l=t("Textbox");break;case"N":l=t("Numeric");break;case"D":l=t("Date");break;case"S":l=t("Switch");break;case"R":l=t("Radio");break;case"W":l=t("Dropdown");break;case"E":l=t("Instruction Text");break;case"U":l=t("URL Input");break;default:l=t("Textbox");break}const u=X.split(r==null?void 0:r.choose_category,","),a=[];for(const O of u){const A=z==null?void 0:z.find(({value:$})=>$===O);A!=null&&A.label?a.push(A.label):a.push(O)}return e.jsxs(Y,{direction:"vertical",children:[(r==null?void 0:r.where_to_create)==="T"?e.jsxs(Y,{align:"center",children:[e.jsx(L,{color:"blue",style:{margin:0},bordered:!1,children:e.jsx(Ue,{})}),i]}):e.jsxs(Y,{align:"center",children:[e.jsx(L,{color:"purple",style:{margin:0},bordered:!1,children:e.jsx(Ye,{})}),i]}),y.xs||y.sm||y.md||y.lg||y.xl?e.jsxs(e.Fragment,{children:[e.jsxs(se,{gap:"0 8px",wrap:!0,children:[e.jsx(ee,{children:t("Slug:")}),e.jsx(ee,{children:(r==null?void 0:r.field_slug)||""})]}),e.jsxs(se,{gap:"0 8px",wrap:!0,children:[e.jsx(ee,{children:t("Type:")}),e.jsx(ee,{children:l})]}),e.jsxs(se,{gap:"0 8px",wrap:!0,children:[e.jsx(ee,{children:t("Categories:")}),e.jsx(se,{gap:"4px 0",wrap:!0,children:a.map((O,A)=>e.jsx(L,{bordered:!1,children:O},A))})]}),y.xs||y.sm||y.md||y.lg?e.jsxs(e.Fragment,{children:[e.jsxs(se,{gap:"0 8px",wrap:!0,children:[e.jsx(ee,{children:t("Status:")}),(r==null?void 0:r.status)==="A"?e.jsx(L,{color:"green",children:t("Active")}):e.jsx(L,{color:"default",children:t("Inactive")})]}),e.jsxs(Y,{size:4,children:[e.jsx(Q,{action:"orderup",onConfirm:()=>_(r==null?void 0:r.id,"u"),children:e.jsx(ie,{title:t("Order Up"),children:e.jsx(w,{icon:e.jsx(pe,{}),size:"small"})})}),e.jsx(L,{style:{lineHeight:"22px",margin:0},children:(r==null?void 0:r.fld_order)||0}),e.jsx(Q,{action:"orderdown",onConfirm:()=>_(r==null?void 0:r.id,"d"),children:e.jsx(ie,{title:t("Order Down"),children:e.jsx(w,{icon:e.jsx(xe,{}),size:"small"})})})]})]}):null,y.xs?e.jsxs(Y,{children:[e.jsx(w,{type:"primary",icon:e.jsx(fe,{}),size:"small",ghost:!0,onClick:()=>j(r)}),e.jsx(Q,{action:"remove",onConfirm:()=>C(r==null?void 0:r.id),children:e.jsx(w,{type:"primary",icon:e.jsx(ge,{}),size:"small",danger:!0,ghost:!0})})]}):null]}):null]})}},{title:t("Slug"),dataIndex:"field_slug",responsive:["xxl"]},{title:t("Type"),dataIndex:"field_type",render:i=>{switch(i){case"T":return t("Textbox");case"N":return t("Numeric");case"D":return t("Date");case"S":return t("Switch");case"R":return t("Radio");case"W":return t("Dropdown");case"E":return t("Instruction Text");case"U":return t("URL Input");default:return t("Textbox")}},responsive:["xxl"]},{title:t("Categories"),dataIndex:"choose_category",render:i=>{const r=X.split(i,","),l=[];for(const u of r){const a=z==null?void 0:z.find(({value:O})=>O===u);a!=null&&a.label?l.push(a.label):l.push(u)}return e.jsx(e.Fragment,{children:l.map((u,a)=>e.jsx(L,{bordered:!1,children:u},a))})},responsive:["xxl"]},{title:t("Status"),dataIndex:"status",render:i=>i==="A"?e.jsx(L,{color:"green",children:t("Active")}):e.jsx(L,{color:"default",children:t("Inactive")}),responsive:["xl"]},{title:t("Order"),dataIndex:"fld_order",width:100,render:(i,r)=>e.jsxs(Y,{size:4,children:[e.jsx(Q,{action:"orderup",onConfirm:()=>_(r==null?void 0:r.id,"u"),children:e.jsx(ie,{title:t("Order Up"),children:e.jsx(w,{icon:e.jsx(pe,{}),size:"small"})})}),e.jsx(L,{style:{lineHeight:"22px",margin:0},children:i||0}),e.jsx(Q,{action:"orderdown",onConfirm:()=>_(r==null?void 0:r.id,"d"),children:e.jsx(ie,{title:t("Order Down"),children:e.jsx(w,{icon:e.jsx(xe,{}),size:"small"})})})]}),sorter:!0,sortDirections:["ascend","descend","ascend"],sortOrder:D("fld_order"),responsive:["xl"]},{title:t("Action"),width:100,align:"right",render:i=>e.jsxs(Y,{children:[e.jsx(w,{type:"primary",icon:e.jsx(fe,{}),size:"small",ghost:!0,onClick:()=>j(i)}),e.jsx(Q,{action:"remove",onConfirm:()=>C(i==null?void 0:i.id),children:e.jsx(w,{type:"primary",icon:e.jsx(ge,{}),size:"small",danger:!0,ghost:!0})})]}),responsive:["sm"]}],te=()=>{const i=F?(o-1)*E+1:0,r=X.min([i+E-1,F]),l=t("Showing %1$d - %2$d of %3$d",i,r,F);return e.jsxs(re,{gutter:16,align:"middle",justify:"space-between",children:[e.jsx(p,{style:{marginTop:"4px",marginBottom:"4px"},children:e.jsxs(re,{align:"middle",gutter:8,children:[e.jsx(p,{children:e.jsx(ce,{value:S,style:{width:140},onChange:u=>T(u),options:[{value:"",label:t("Bulk Actions")},{value:"activate",label:t("Activate")},{value:"deactivate",label:t("Deactivate")},{value:"remove",label:t("Delete")}],disabled:!(k!=null&&k.length)})}),e.jsx(p,{children:e.jsx(Q,{action:S,onConfirm:()=>v(),children:e.jsx(w,{type:"primary",disabled:!S,children:t("Apply")})})})]})}),e.jsx(p,{style:{marginTop:"4px",marginBottom:"4px"},children:l})]})};return h.useEffect(()=>{var a,O,A,$;const{data:i,isLoading:r,isError:l,error:u}=g;G(r?me():he()),!r&&l&&((O=(a=u==null?void 0:u.data)==null?void 0:a.errors)!=null&&O.message)&&q.error(($=(A=u==null?void 0:u.data)==null?void 0:A.errors)==null?void 0:$.message),!r&&!l&&i&&(i!=null&&i.msg&&(i!=null&&i.status?q.success(i==null?void 0:i.msg):q.error(i==null?void 0:i.msg)),i!=null&&i.status&&U())},[g,U,G]),e.jsx(Be,{rowKey:i=>i==null?void 0:i.id,rowSelection:d,columns:H,dataSource:c,footer:te,loading:K,onChange:W,pagination:{total:F,pageSize:E,current:o,onChange:m,onShowSizeChange:I,showSizeChanger:F>10,style:{marginBottom:0}}})}const{Title:ve}=_e;function Qe(){const c=ye(),F=de(),E=Te(),[o,m]=ke(),[I,d]=h.useState((o==null?void 0:o.get("limit"))||20),[S,T]=h.useState((o==null?void 0:o.get("page"))||1),[k,j]=h.useState((o==null?void 0:o.get("sort"))||""),[K,U]=h.useState(""),[b,B]=h.useState([]),[z,y]=h.useState(!1),[G,s]=h.useState(null),[g,_]=h.useState(!1),[C,v]=h.useState(0),[W,D]=h.useState([]),[H,te]=h.useState([]),[i,r]=ue(),l=Oe({action:"custom_field_data",limit:I,page:S,sort:k||"fld_order-asc"}),u=Ae({action:"ticket_category_data_for_select",select_all:!0}),a=h.useCallback(()=>{U(""),B([])},[]),O=n=>{n===1?o.delete("page"):o.set("page",n),T(n),m(o),a()},A=(n,x)=>{x===20?o.delete("limit"):o.set("limit",x),d(x),m(o),a()},$={selectedRowKeys:b,onChange:n=>{n!=null&&n.length||a(),B(n)}},ne=n=>{s(n),_(!0),y(!0)},oe=h.useCallback(()=>{y(!1),s(null),_(!1)},[]),Ce=()=>{i({params:{action:"custom_field_reset_order"}})},we=()=>{l.refetch(),a()},Ee=n=>{const{field:x,order:N}=n||{};let f=x;N==="ascend"?f+="-asc":f+="-desc",j(f),T(1),o.delete("page"),o.set("sort",f),m(o),a()};return h.useEffect(()=>{var J,M,P,Z;const{data:n,isFetching:x,isError:N,error:f}=l;!x&&N&&q.error((M=(J=f==null?void 0:f.data)==null?void 0:J.errors)==null?void 0:M.message),!x&&!N&&n&&(D((P=n==null?void 0:n.data)==null?void 0:P.result),v(((Z=n==null?void 0:n.data)==null?void 0:Z.total)||0))},[l]),h.useEffect(()=>{var J,M,P,Z;const{data:n,isFetching:x,isError:N,error:f}=u;!x&&N&&q.error((M=(J=f==null?void 0:f.data)==null?void 0:J.errors)==null?void 0:M.message),!x&&!N&&n&&n!=null&&n.status&&(P=n==null?void 0:n.data)!=null&&P.result&&te((Z=n==null?void 0:n.data)==null?void 0:Z.result)},[u]),h.useEffect(()=>{var J,M,P,Z;const{data:n,isLoading:x,isError:N,error:f}=r;F(x?me():he()),!x&&N&&((M=(J=f==null?void 0:f.data)==null?void 0:J.errors)!=null&&M.message)&&q.error((Z=(P=f==null?void 0:f.data)==null?void 0:P.errors)==null?void 0:Z.message),!x&&!N&&n&&(n!=null&&n.msg&&(n!=null&&n.status?q.success(n==null?void 0:n.msg):q.error(n==null?void 0:n.msg)),n!=null&&n.status&&a())},[r,a,F]),h.useEffect(()=>{const{search:n}=E,x=new URLSearchParams(n);x.has("limit")||d(20),x.has("page")||T(1),x.has("sort")||j("")},[E]),e.jsxs(e.Fragment,{children:[e.jsxs(re,{gutter:16,justify:"space-between",align:"middle",style:{paddingBottom:"8px",marginBottom:"16px"},children:[e.jsx(p,{style:{paddingBottom:"8px"},children:e.jsx(ve,{level:5,style:{fontSize:"18px",margin:0},children:t("Custom Fields")})}),e.jsx(p,{style:{paddingBottom:"8px"},children:e.jsxs(Y,{children:[e.jsx(Q,{action:"orderreset",onConfirm:()=>Ce(),children:e.jsx(ie,{title:t("Reset Order"),children:e.jsx(w,{icon:e.jsx(De,{})})})}),e.jsx(w,{type:"primary",icon:e.jsx(Ne,{}),onClick:we,ghost:!0}),c!=null&&c.lg||c!=null&&c.xl||c!=null&&c.xxl?e.jsx(w,{type:"primary",icon:e.jsx(je,{}),onClick:()=>{y(!0)},children:t("Add New")}):e.jsx(w,{type:"primary",icon:e.jsx(je,{}),onClick:()=>{y(!0)}})]})})]}),e.jsx(Ge,{data:W,total:C,limit:I,page:S,onPageChange:O,onSizeChange:A,rowSelection:$,bulkAction:K,setBulkAction:U,bulkActionIds:b,onEditClick:ne,isLoading:l==null?void 0:l.isFetching,resetBulkAction:a,sortOrder:k,handleSort:Ee,categorySelectList:H}),e.jsx(Le,{title:g?t("Edit %s",t("Custom Field")):t("Add New %s",t("Custom Field")),centered:!0,open:z,onCancel:oe,onClose:oe,footer:null,width:800,style:{maxWidth:"calc(100vw - 32px)",marginTop:"40px",marginBottom:"40px"},destroyOnClose:!0,children:e.jsx($e,{isOpen:z,onCloseModal:oe,data:G,isEdit:g,categorySelectList:H})})]})}export{Qe as default};
