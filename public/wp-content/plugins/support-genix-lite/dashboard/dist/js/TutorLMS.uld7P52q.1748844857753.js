import{u as q,a8 as N,a9 as Q,s as $,b as v,C as H,j as t,t as n,_ as l}from"../main.aHgQEcd5.1748844857753.js";import{r as c}from"./vendor.Cii7CkpR.1748844857753.js";import{t as J}from"./editor-value.B-WWB6lV.1748844857753.js";import"./toast.D8JcjdRp.1748844857753.js";import{j as S,s as F,b as j,C as m,A as U,u as x,w as X,B as h,T as I,d as B,ak as w,al as D,k as Y}from"./antd.v1CHGtH-.1748844857753.js";function Z(){const R=[],A=[],G={tutorlms_status:!1},g=q(),[u]=S.useForm(),[r,z]=c.useState(null),[d,T]=c.useState(null),[C,f]=c.useState(!0),[_,y]=c.useState(""),[K,k]=N(),{Text:O}=I,L=Q({action:"tutorlms_data"}),b=(s,o)=>{o=l.mapValues(o,function(e){return l.isString(e)?l.trim(e):e});for(const e of R){const i=s==null?void 0:s[e];i&&l.includes(i,"*")&&(o[e]=r[e])}for(const e of A)(s==null?void 0:s[e])&&(o[e]=J((s==null?void 0:s[e])||""));T(o||{});const a=l.pick(r,l.keys(o));l.isEqual(a,o)?f(!0):r!=null&&r.tutorlms_status||o!=null&&o.tutorlms_status?f(!1):f(!0)},P=async s=>{const o=s!=null&&s.tutorlms_status?"A":"I";K({params:{action:"tutorlms"},data:{tutorlms_status:o}})},W=()=>{u.setFieldsValue(r||{}),b(null,r)};return c.useEffect(()=>{u.setFieldsValue(r||{}),T(r||{}),f(!0)},[r,u]),c.useEffect(()=>{var i,p;const{data:s,isFetching:o,isError:a,error:e}=L;!o&&a&&F.error((p=(i=e==null?void 0:e.data)==null?void 0:i.errors)==null?void 0:p.message),!o&&!a&&s&&z((s==null?void 0:s.data)||{})},[L]),c.useEffect(()=>{var i,p,M,E;const{data:s,isLoading:o,isError:a,error:e}=k;g(o?$():v()),!o&&a&&((p=(i=e==null?void 0:e.data)==null?void 0:i.errors)!=null&&p.message)&&F.error((E=(M=e==null?void 0:e.data)==null?void 0:M.errors)==null?void 0:E.message),!o&&!a&&s&&s!=null&&s.msg&&(s!=null&&s.status?(y(""),F.success(s==null?void 0:s.msg)):(y(s==null?void 0:s.msg),H()))},[k,g]),t.jsx(S,{form:u,name:"saveTutorLMS",layout:"vertical",autoComplete:"off",onFinish:P,onValuesChange:b,initialValues:G,children:t.jsxs(j,{children:[_?t.jsx(m,{span:24,children:t.jsx(U,{message:_,type:"error",showIcon:!0,closable:!0,afterClose:()=>y(""),style:{marginBottom:"24px"}})}):null,t.jsx(m,{span:24,children:t.jsxs(x,{align:"center",style:{marginBottom:"24px"},children:[t.jsx(S.Item,{name:"tutorlms_status",valuePropName:"checked",style:{marginBottom:0},children:t.jsx(X,{})}),t.jsx(O,{onClick:()=>{u.setFieldValue("tutorlms_status",!(d!=null&&d.tutorlms_status)),b(null,u.getFieldsValue())},style:{cursor:"pointer"},children:d!=null&&d.tutorlms_status?n("Click to disable."):n("Click to enable.")})]})}),t.jsx(m,{span:24,children:t.jsxs(x,{children:[t.jsx(h,{type:"primary",htmlType:"submit",loading:!1,disabled:C,children:n("Save Changes")}),t.jsx(h,{htmlType:"button",onClick:W,disabled:C,children:n("Discard")})]})})]})})}const{Title:V}=I;function it(){return t.jsx(j,{justify:"space-around",children:t.jsxs(m,{span:24,style:{maxWidth:"960px"},children:[t.jsxs(j,{gutter:16,justify:"space-between",align:"middle",style:{paddingBottom:"8px",marginBottom:"8px"},children:[t.jsx(m,{style:{paddingBottom:"8px"},children:t.jsx(V,{level:5,style:{fontSize:"18px",margin:0},children:n("%s Integration",n("Tutor LMS"))})}),t.jsx(m,{style:{paddingBottom:"8px"},children:t.jsxs(x,{children:[t.jsx(B,{title:t.jsxs(x,{align:"center",children:[t.jsx(w,{}),t.jsx("span",{children:n("Learn more")})]}),children:t.jsx(h,{icon:t.jsx(w,{}),href:"https://supportgenix.com/integrations/tutor-lms/",target:"_blank"})}),t.jsx(B,{title:t.jsxs(x,{align:"center",children:[t.jsx(D,{}),t.jsx("span",{children:n("Documentation")})]}),children:t.jsx(h,{icon:t.jsx(D,{}),href:"https://supportgenix.com/doc/tutor-lms-integration/",target:"_blank"})})]})})]}),t.jsx(j,{children:t.jsx(m,{span:24,children:t.jsx(Y,{size:"small",styles:{header:{background:"#fafafa"},body:{padding:"20px 24px 24px 24px"}},children:t.jsx(Z,{})})})})]})})}export{it as default};
